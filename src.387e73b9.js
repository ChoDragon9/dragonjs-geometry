parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"xbRW":[function(require,module,exports) {
module.exports={getRadian:function(t){return t*(Math.PI/180)},getSine:function(t){return Math.sin(this.getRadian(t))},getCosine:function(t){return Math.cos(this.getRadian(t))},pythagoreanTheorem:function(t,n,e,a){var r=Math.abs(t-e),i=Math.abs(n-a);return Math.sqrt(Math.pow(r,2)+Math.pow(i,2))},getAngle:function(t,n,e,a){var r=t-e,i=n-a,u=Math.atan2(r,i);return u*=180/Math.PI,u*=-1},getVertextAngle:function(t,n,e){var a=[n[0]-t[0],n[1]-t[1]],r=[n[0]-e[0],n[1]-e[1]],i=a[0]*r[0]+a[1]*r[1],u=a[0]*r[1]-a[1]*r[0];return 180*Math.atan2(u,i)/Math.PI},checkLineIntersection:function(t,n,e,a,r,i,u,h){var o=!0,c=(h-i)*(e-t)-(u-r)*(a-n);if(0===c)return o;var M=n-i,g=t-r,s=(u-r)*M-(h-i)*g;return g=((e-t)*M-(a-n)*g)/c,(M=s/c)>0&&M<1&&g>0&&g<1&&(o=!1),o},getLineCenter:function(t,n,e,a){var r=0,i=0,u=0,h=0;return t>e?(r=t,i=e):(r=e,i=t),n>a?(u=n,h=a):(u=a,h=n),[(r-i)/2+i,(u-h)/2+h]}};
},{}],"KjOz":[function(require,module,exports) {
function n(r){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(r)}var r=function(n){return function(r){for(var t=0,u=r.length;t<u;t++)n(r[t],t,r,u);return r}},t=function(n){return function(r){for(var t=0;t<r;t++)n(t,r);return r}},u=function(n){return function(t){var u=[];return r(function(r){u.push(n(r))})(t),u}},o=function(n){return function(t){var u=[];return r(function(r){n(r)&&u.push(r)})(t),u}},e=function(n){return function(r){for(var t=0,u=r.length;t<u;t++)if(n(r[t],t,r))return r[t];return null}},f=function(n){return function(r){for(var t=0,u=r.length;t<u;t++)if(n(r[t],t,r))return t;return-1}},i=function(n,t){return function(u){return r(function(r){n=t(n,r)})(u),n}},c=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return function(n){return i(n,function(n,r){return r(n)})(r)}},a=function(){for(var n=arguments.length,t=new Array(n),u=0;u<n;u++)t[u]=arguments[u];return function(n){return r(function(r){return r(n)})(t),n}},l=function(n){return void 0===n},y=function(n){return!n},p=function r(t){if("object"!==n(t))return t;var u=t.constructor();for(var o in t)t.hasOwnProperty(o)&&(u[o]=r(t[o]));return u},v=function(n,r){var t=p(r);for(var u in n)l(t[u])&&(t[u]=n[u]);return t};module.exports={each:r,loop:t,map:u,filter:o,find:e,findIndex:f,reduce:i,pipe:c,divEq:a,isUndefined:l,negate:y,clone:p,merge:v};
},{}],"Uh1v":[function(require,module,exports) {
function t(t,n){return o(t)||i(t,n)||r(t,n)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var u,c=t[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}return r}}function o(t){if(Array.isArray(t))return t}var u=require("./fp");module.exports={setAttr:function(t,e,r){return r&&(r=null),function(n){return n.setAttributeNS(r,t,e),n}},getAttr:function(t){return function(e){return e.getAttributeNS(null,t)}},setHrefAttr:function(t){return this.setAttr("href",t,"http://www.w3.org/1999/xlink")},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},style:function(t,e){return function(r){return r.style[t]=e,r}},createSVGElement:function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},createLine:function(t){return u.pipe(this.createSVGElement,u.divEq(this.setAttr("stroke-width",t),this.setAttr("draggable",!1)))("line")},createCircle:function(t){return u.pipe(this.createSVGElement,u.divEq(this.setAttr("r",t),this.setAttr("draggable",!1)))("circle")},createRect:function(t,e){return u.pipe(this.createSVGElement,u.divEq(this.setAttr("width",t),this.setAttr("height",e),this.setAttr("draggable",!1)))("rect")},createText:function(t){return u.pipe(this.createSVGElement,this.setAttr("draggable",!1),function(e){return e.textContent=t,e})("text")},createGroup:function(){return this.createSVGElement("g")},createImage:function(t,e,r){var n=this.createGroup(),i=u.pipe(this.createSVGElement,u.divEq(this.setHrefAttr(t),this.setAttr("width",e),this.setAttr("height",r),this.setAttr("draggable",!1)))("image");return n.appendChild(i),[i,n]},createPolygon:function(){return u.pipe(this.createSVGElement,this.setAttr("draggable",!1))("polygon")},createUse:function(){return this.createSVGElement("use")},getBodyScroll:function(){var t=!1,e=document.body,r=document.documentElement;return 0!==e.scrollTop||0!==e.scrollLeft?t={left:e.scrollLeft,top:e.scrollTop}:0===r.scrollTop&&0===r.scrollLeft||(t={left:r.scrollLeft,top:r.scrollTop}),t},getSVGOffset:function(t){return function(){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}},getPageAxis:function(e,r){var n=this;return u.pipe(this.getSVGOffset(e),function(t){var e=t.left,n=t.top;return[r.pageX-e,r.pageY-n]},function(e){var r=t(e,2),i=r[0],o=r[1],u=n.getBodyScroll();return u&&(i-=u.left,o-=u.top),[i,o]})()},getSize:function(t){return{width:u.pipe(this.getAttr("width"),function(e){return e||t.clientWidth},parseInt)(t),height:u.pipe(this.getAttr("height"),function(e){return e||t.clientHeight},parseInt)(t)}}};
},{"./fp":"KjOz"}],"jKlS":[function(require,module,exports) {
var t=require("../../common/ElementController"),i=require("../../common/fp");function n(n,e){var s=this;this.points=i.clone(n.options.points),this.isAllSelected=!1,this.setIsAllSelectedState=function(t){this.isAllSelected=t},this.modifyPoints=function(t){this.setPoints(t),n.changeAxis()},this.getRectangleIndex=function(){var t=[],i=n.options.flip,e=n.options.mirror,s=i&&e;return t[0]=s?2:i?1:e?3:0,t[1]=s?3:i?0:e?2:1,t[2]=s?0:i?3:e?1:2,t[3]=s?1:i?2:e?0:3,t},this.alignCenter=function(){var i=t.getSize(e),o=s.getAxis(0),h=s.getAxis(2),c=h[0]-o[0],r=h[1]-o[1],l=Math.round(i.width/2-c/2),u=Math.round(i.height/2-r/2),a=l+c,d=u+r;s.setAxis(0,l,u),s.setAxis(1,l,d),s.setAxis(2,a,d),s.setAxis(3,a,u),n.changeAxis()},this.changeMinSizeOption=function(t){n.options.minSize=i.clone(t)},this.changeMaxSizeOption=function(t){n.options.maxSize=i.clone(t)},this.addAxis=function(s,o,h){var c=null,r=null,l=t.getSVGOffset(e)(),u=this.getPointsLength();i.isUndefined(s)&&i.isUndefined(o)?((r=[(c=this.getAxis(u-1))[0],c[1]])[0]+=n.options.circleRadius,r[1]+=n.options.circleRadius,r[0]<0&&(r[0]=0),r[1]<0&&(r[1]=0),r[0]>l.width&&(r[0]=l.width),r[1]>l.height&&(r[1]=l.height)):r=[s,o],i.negate(i.isUndefined(h))?this.appendAxis(h,r[0],r[1]):this.setAxis(u,r[0],r[1])},this.validateAxis=function(i,n){var s=t.getSVGOffset(e)(),o=!0;return(i<0||n<0||i>s.width||n>s.height)&&(o=!1),o},this.validateAllPoint=function(t,n){var e=this;return!i.find(function(i){return!e.validateAxis(i[0]+t,i[1]+n)})(this.getPoints())}}n.prototype={setPoints:function(t){this.points=i.clone(t)},getPoints:function(){return i.clone(this.points)},getPointsLength:function(){return this.points.length},setAxis:function(t,i,n){this.points[t]=[i,n]},appendAxis:function(t,i,n){this.points.splice(t,0,[i,n])},getAxis:function(t){return this.points[t]}},module.exports=n;
},{"../../common/ElementController":"Uh1v","../../common/fp":"KjOz"}],"EG0U":[function(require,module,exports) {
"use strict";var e=require("../../common/ElementController"),i=require("../../common/fp");module.exports=function(i,n){var o=null,t=i.options.notUseMoveTopLayer;this.add=function(){o=e.createGroup()},this.remove=function(){e.removeChild(n,o)},this.moveTopLayer=function(){if(!0!==t){var e=n.lastChild;e!==o&&n.insertBefore(o,e.nextSibling)}},this.append=function(){e.appendChild(n,o)},this.appendChild=function(i){e.appendChild(o,i)},this.removeChild=function(i){e.removeChild(o,i)},this.insertBefore=function(){o.insertBefore.apply(o,arguments)}};
},{"../../common/ElementController":"Uh1v","../../common/fp":"KjOz"}],"AjX5":[function(require,module,exports) {
var t=require("../../common/ElementController"),e=require("../../common/fp");module.exports=function(i){var o=null,n=i.options.wiseFaceDetection;function l(e){t.style("color",e)(o)}!1!==n&&(e.isUndefined(n.fillColor)&&(n.fillColor="#dd2200"),e.isUndefined(n.heightRatio)&&(n.heightRatio=2.2),e.isUndefined(n.widthRatio)&&(n.widthRatio=!1),this.updateCircle=function(i,l,d){var a=d/100;"heightRatio"in n?a*=n.heightRatio:"widthRatio"in n&&(a*=n.widthRatio),e.divEq(t.style("top",l-a+"px"),t.style("left",i-a+"px"),t.style("fontSize",2*a+"px"))(o)},this.append=function(){try{document.getElementById("sketchbook").appendChild(o)}catch(t){}},this.add=function(){(o=document.createElement("span")).className="tui tui-wn5-smile",t.style("position","absolute")(o),l(n.fillColor)},this.remove=function(){try{document.getElementById("sketchbook").removeChild(o)}catch(t){}},this.changeFillColor=l)};
},{"../../common/ElementController":"Uh1v","../../common/fp":"KjOz"}],"EMQ7":[function(require,module,exports) {
module.exports="plus.01e90f02.svg";
},{}],"wiLd":[function(require,module,exports) {
module.exports="minus.f8a9c0a9.svg";
},{}],"Jb2g":[function(require,module,exports) {
var t=require("../../common/ElementController"),e=require("../../common/fp");module.exports=function(n){var i=require("../../images/plus.svg"),o=require("../../images/minus.svg"),l=null,a=null,s=16,u=this,r=null,c=null,p=null;this.createIcon=function(u){var f=u?i:o;null===a&&(a=t.createRect(s,s),l=t.createImage(f,s,s)[0],t.setAttr("fill","#000000")(a),e.each(t.style("opacity",0))([a,l]),null!==r&&(e.each(t.style("cursor","pointer"))([a,l]),a.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),r(t)}),l.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),null!==r&&r(t)}),l.addEventListener("mouseleave",function(t){t.preventDefault(),t.stopPropagation(),null!==c&&c(t)}),l.addEventListener("contextmenu",function(t){t.preventDefault(),t.stopPropagation(),null!==p&&p(t)}))),n.appendChild(a),n.appendChild(l)},this.changePosition=function(n,i){e.divEq(t.setAttr("x",n-s/2),t.setAttr("y",i-s/2))(a),e.divEq(t.setAttr("x",n-s/2),t.setAttr("y",i-s/2))(l)},this.show=function(){e.each(t.style("opacity",1))([a,l])},this.hide=function(){null!==a&&"1"===a.style.opacity&&(e.each(t.style("opacity",0))([a,l]),u.changePosition(0,0))},this.onClick=function(t){r=t},this.onLeave=function(t){c=t},this.onContextMenu=function(t){p=t}};
},{"../../common/ElementController":"Uh1v","../../common/fp":"KjOz","../../images/plus.svg":"EMQ7","../../images/minus.svg":"wiLd"}],"n6AC":[function(require,module,exports) {
exports.MOVED_ATTR="is-moved",exports.ICON_HIDDEN_DELAY=2e3,exports.CLICK_DETECTION_TIME=100;
},{}],"nNCE":[function(require,module,exports) {
var e=require("./icon-helper"),n=require("../../common/FunnyMath"),t=require("../../common/ElementController"),i=require("../../common/fp"),o=require("../../modules/constants"),l=o.ICON_HIDDEN_DELAY;module.exports=function(o,s){"use strict";var r="is-moved",u=[],d=[],a=new e(o.groupHelper),c="0.5",h=null,p=null,f=t.setAttr("stroke",o.options.lineColor),m=f;function g(){d=o.drawModel.getPoints()}function v(e){if(clearTimeout(p),!("true"===t.getAttr(r)(s)||null!==o.selectedLineIndex||this.style.opacity===c||o.drawModel.getPointsLength()>=o.options.maxPoint)){var i=t.getPageAxis(s,e),d=i[0],f=i[1],m=null,g=null;!1!==o.options.minLineLength&&(m=o.drawModel.getAxis(this.lineIndex),g=o.drawModel.getAxis(this.lineIndex===u.length-1?0:this.lineIndex+1),n.pythagoreanTheorem(d,f,m[0],m[1])<o.options.minLineLength||n.pythagoreanTheorem(d,f,g[0],g[1])<o.options.minLineLength)||(a.changePosition(i[0],i[1]),h=this.lineIndex,a.show(),p=setTimeout(function(){a.hide()},l))}}function L(){setTimeout(function(){o.callCustomEvent("mouseup",o.getData())})}function x(e){o.callCustomEvent("linecontextmenu",e)}function y(e){e.addEventListener("contextmenu",x),!1===o.options.useOnlyRectangle&&!1===o.options.fixedRatio&&(e.addEventListener("mousemove",v),!1===o.options.fill&&(a.onContextMenu(x),e.addEventListener("mousedown",E),e.addEventListener("mouseup",L),e.addEventListener("mouseleave",function(){!0===this.isSelected&&L()})))}function E(){m(this),this.isSelected=!0,o.groupHelper.moveTopLayer(),g()}a.onClick(function(e){g(),function(e){var n=null,l=null,r=null;if(!1===function(){var e=o.drawModel.getPoints();if(d.length!==e.length)return!1;return i.pipe(i.findIndex(function(n,t){return n[0]!==e[t][0]||n[1]!==e[t][1]}),function(e){return d=[],-1===e})(d)}())return;if(o.drawModel.getPointsLength()>=o.options.maxPoint)return;n=t.getPageAxis(s,e),l=n[0],r=n[1],o.addPoint(l,r,this.lineIndex+1),L()}.call({lineIndex:h},e),a.hide()}),a.onLeave(a.hide),this.addLine=function(e,n){var i=t.createLine(o.options.lineStrokeWidth);i.lineIndex=u.length,!0===o.options.useEvent&&!1!==e&&y(i),f(i),!1!==n&&o.drawView.setCursor(i),u.push(i)},this.setDefaultColor=f,this.setSelectColor=m,this.appendAll=function(){i.each(function(e){return o.groupHelper.appendChild(e)})(u),a.createIcon(!0)},this.appendAtLast=function(){var e=u.length,n=u[e-1],t=u[e-2].nextElementSibling;o.groupHelper.insertBefore(n,t)},this.bindEvent=y,this.removeAll=function(){i.each(function(e){return o.groupHelper.removeChild(e)})(u)},this.hide=function(e){!0===o.options.fill?t.style("display","none")(e):t.style("opacity",c)(e)},this.show=function(e){!0===o.options.fill?t.style("display","inline")(e):t.style("opacity",1)(e)},this.getLines=function(){return u},this.setLines=function(e){u=e}};
},{"./icon-helper":"Jb2g","../../common/FunnyMath":"xbRW","../../common/ElementController":"Uh1v","../../common/fp":"KjOz","../../modules/constants":"n6AC"}],"EDWs":[function(require,module,exports) {
var e=require("./icon-helper"),t=require("../../common/ElementController"),n=require("../../common/fp"),i=require("../../modules/constants"),o=i.ICON_HIDDEN_DELAY;module.exports=function(i,s){var r=!1,l=new e(i.groupHelper),u=null,c=null,a=[],d=t.setAttr("fill",i.options.pointColor),h=d;function p(e){e.onmousedown=w,e.onmouseup=function(){r=!1,!0!==i.options.customDraw&&v()},e.addEventListener("mouseleave",function(){r=!0}),!0!==i.options.fixedRatio&&(e.customContextmenu=C,e.addEventListener("contextmenu",function(e){e.preventDefault()}),e.addEventListener("mouseover",f),e.addEventListener("mouseout",g),e.addEventListener("mousedown",m))}function f(){var e=i.drawModel.getPointsLength();if(!(null!==i.selectedCircleIndex||e<=i.options.minPoint)){c=this.circleIndex;var n=parseInt(t.getAttr("x")(this)),o=parseInt(t.getAttr("y")(this)),s=parseInt(t.getAttr("width")(this)),r=parseInt(t.getAttr("height")(this));n-2*s<0?n+=2*s:n-=s,o-2*s<0?o+=2*r:o-=r,clearTimeout(u),l.changePosition(n,o),l.show()}}function m(){l.hide()}function g(){clearTimeout(u),u=setTimeout(function(){l.hide()},o)}function v(){setTimeout(function(){i.callCustomEvent("mouseup",i.getData())})}function C(e){var t=this,n=i.drawModel.getPoints(),o=n.length;e.preventDefault(),o<=i.options.minPoint||("text"===this.nodeName&&(t=a[o-1]),n.splice(t.circleIndex,1),i.drawModel.setPoints(n),i.reset(),i.init(),i.drawView.changeActiveStatus())}function w(){r=!1;var e=this,t=i.drawModel.getPointsLength();"text"===this.nodeName&&(e=a[t-1]),h(e),e.isSelected=!0,i.drawView.setCursor(s)}l.onClick(function(e){l.hide(),C.call({circleIndex:c},e),v()}),this.addCircle=function(e,n,o){var s=t.createRect(2*e,2*e);(!0===i.options.useResizeRectangle||!0===i.options.useEvent&&!1!==n)&&p(s),d(s),!1!==o&&i.drawView.setCursor(s),s.circleIndex=a.length,a.push(s)},this.bindEvent=p,this.selectCircle=w,this.setDefaultColor=d,this.setSelectColor=h,this.appendAll=function(){n.each(function(e){return i.groupHelper.appendChild(e)})(a),l.createIcon(!1)},this.changeRadius=function(e,i){n.divEq(t.setAttr("width",2*i),t.setAttr("height",2*i))(a[e])},this.appendAtLast=function(){var e=a.length,t=a[e-1],n=a[e-2].nextElementSibling;null===i.options.textInCircle||null===n?i.groupHelper.appendChild(t):i.groupHelper.insertBefore(t,n)},this.removeAll=function(){n.each(function(e){i.groupHelper.removeChild(e)})(a)},this.update=v,this.isMouseLeave=function(){return r},this.hide=t.style("display","none"),this.show=t.style("display","inline"),this.getCircles=function(){return a},this.setCircles=function(e){a=e}};
},{"./icon-helper":"Jb2g","../../common/ElementController":"Uh1v","../../common/fp":"KjOz","../../modules/constants":"n6AC"}],"oslI":[function(require,module,exports) {
var e=require("../../common/ElementController"),t=require("../../common/fp");module.exports=function(n,o){var i=null;this.addText=function(){var o,l,r;null!==n.options.textInCircle&&(i=t.pipe(e.createText,t.divEq(e.style("fontSize","12px"),n.drawView.setCursor))(n.options.textInCircle),o=n.circleHelper.getCircles(),l=n.drawModel.getPointsLength(),r=o[l-1],i.onmousedown=r.onmousedown,i.onmouseup=r.onmouseup,!0!==n.options.fixedRatio&&i.addEventListener("contextmenu",r.customContextmenu))},this.append=function(){null!==n.options.textInCircle&&n.groupHelper.appendChild(i)},this.remove=function(){null!==n.options.textInCircle&&n.groupHelper.removeChild(i)},this.show=function(){null!==n.options.textInCircle&&e.style("display","inline")(i)},this.hide=function(){null!==n.options.textInCircle&&e.style("display","none")(i)},this.getTextTag=function(){return i},this.setTextTag=function(e){i=e}};
},{"../../common/ElementController":"Uh1v","../../common/fp":"KjOz"}],"xwqZ":[function(require,module,exports) {
var o=require("../../common/ElementController"),t=require("../../common/fp");module.exports=function(e,n){"use strict";var i=null;function l(){u(),i.isSelected=!0,e.groupHelper.moveTopLayer()}function s(){i.onmousedown=l,i.onmouseup=function(){!0!==e.options.customDraw&&c()},i.addEventListener("mouseleave",function(){!0===i.isSelected&&c()}),i.addEventListener("contextmenu",function(o){e.callCustomEvent("polygoncontextmenu",o)})}function u(){if(null!==i){var t=e.options.fillOpacity;t>0&&(t+=.5*t),o.style("opacity",t)}}function c(){setTimeout(function(){e.callCustomEvent("mouseup",e.getData())})}this.addPolygon=function(){i=o.createPolygon(),!0===e.options.useEvent&&s(),e.drawView.setCursor(i)},this.append=function(){!0===e.options.fill&&e.groupHelper.appendChild(i)},this.bindEvent=s,this.selectPolygon=l,this.remove=function(){!0===e.options.fill&&e.groupHelper.removeChild(i)},this.setDefaultColor=function(){!0===e.options.fill&&t.divEq(o.style("fill",e.options.fillColor),o.style("opacity",e.options.fillOpacity))(i)},this.setSelectColor=u,this.getPolygon=function(){return i},this.setPolygon=function(o){i=o}};
},{"../../common/ElementController":"Uh1v","../../common/fp":"KjOz"}],"UKN0":[function(require,module,exports) {
module.exports="btn_in-out_normal.fdb8c67a.png";
},{}],"OVyW":[function(require,module,exports) {
module.exports="btn_in-out_press.dffd9e67.png";
},{}],"jXEY":[function(require,module,exports) {
module.exports="btn_all_normal.ebffad16.png";
},{}],"aWwW":[function(require,module,exports) {
module.exports="btn_all_press.815fb70d.png";
},{}],"xUQg":[function(require,module,exports) {
var e=require("../../common/ElementController"),n=require("../../common/FunnyMath"),t=require("../../common/fp");module.exports=function(o,r){"use strict";var i=25,a=33,u=require("../../images/btn_in-out_normal.png"),s=require("../../images/btn_in-out_press.png"),l=require("../../images/btn_all_normal.png"),p=require("../../images/btn_all_press.png"),c=null,d=null,f=i/2,g=a/2,m=null,h=[],v=["L","R","LR"],A=v.length,w=[],x=null;function C(n){var t;x=n,y(),t=x===v[A-1]?l:u,e.setHrefAttr(t)(d)}function y(){var r=o.drawModel.getAxis(0),i=o.drawModel.getAxis(1),a=n.getAngle(r[0],r[1],i[0],i[1]),u=a,s=x===v[1]?90:270,l=n.getLineCenter(r[0],r[1],i[0],i[1]),p=l[0],A=l[1];t.divEq(e.setAttr("x",p),e.setAttr("y",A))(d),!0!==o.options.notUseAutoChangeOfArrow&&Math.abs(a)>90&&(s=90===s?270:90,u-=180),function(o,r,i){var a=f+20,u=function(e){return n.getCosine(e)*a-4},s=function(e){return n.getSine(e)*a+6},l=[{x:u(i+180),y:s(i+180)},{x:u(i),y:s(i)}];null!==m&&(t.divEq(e.setAttr("x",o+l[0].x),e.setAttr("y",r+l[0].y))(h[0]),t.divEq(e.setAttr("x",o+l[1].x),e.setAttr("y",r+l[1].y))(h[1]))}(p,A,u),a+=s,e.setAttr("transform","rotate(".concat(a," ").concat(p," ").concat(A,") translate(").concat(-1*f,",").concat(-1*g,")"))(c)}!0===o.useArrow&&function(){for(var e=t.findIndex(function(e){return e===o.options.arrow.min})(v),n=t.findIndex(function(e){return e===o.options.arrow.max})(v),r=e;r<=n;r++)w.push(v[r])}(),this.addImage=function(){if(!0===o.useArrow){var n=o.options.arrow.mode===v[A-1]?l:u,r=e.createImage(n,i,a,!0);d=r[0],c=r[1],null!==o.options.arrow&&t.negate(t.isUndefined(o.options.arrow.text))&&!0===o.options.arrow.text&&(m=e.createGroup(),h[0]=e.createText("A"),h[1]=e.createText("B"),e.appendChild(m,h[0]),e.appendChild(m,h[1])),o.drawView.setCursor(d),!0===o.options.useEvent&&(d.onclick=function(e){e.stopPropagation()},d.onmousedown=function(n){n.stopPropagation();var t=x===v[A-1]?p:s;d.isSelected=!0,e.setHrefAttr(t)(d)},d.onmouseup=function(e){if(e.stopPropagation(),!0===d.isSelected){var n=function(e){var n=t.findIndex(function(n,t,o){return n===e&&o.length-1!==t})(w)+1;return v[n]}(x);d.isSelected=!1,C(n),o.callCustomEvent("mouseup",o.getData())}},d.onmouseleave=function(e){e.stopPropagation(),!0===d.isSelected&&d.onmouseup(e)}),C(o.options.arrow.mode)}},this.append=function(){null!==c&&(c.appendChild(d),o.groupHelper.appendChild(c)),null!==m&&(m.appendChild(h[0]),m.appendChild(h[1]),o.groupHelper.appendChild(m))},this.remove=function(){!0===o.useArrow&&(c.removeChild(d),o.groupHelper.removeChild(c),null!==m&&(m.removeChild(h[0]),m.removeChild(h[1]),o.groupHelper.removeChild(m)))},this.getArrow=function(){return x},this.changeArrowImage=y,this.changeArrow=C,this.show=function(){t.each(e.style("display","inline"))([d,m])},this.hide=function(){t.each(e.style("display","none"))([d,m])},this.resetData=function(){c=null,d=null,m=null,h=[]}};
},{"../../common/ElementController":"Uh1v","../../common/FunnyMath":"xbRW","../../common/fp":"KjOz","../../images/btn_in-out_normal.png":"UKN0","../../images/btn_in-out_press.png":"OVyW","../../images/btn_all_normal.png":"jXEY","../../images/btn_all_press.png":"aWwW"}],"XfI7":[function(require,module,exports) {
module.exports={bindEvent:function(n,t){return function(e){return e.addEventListener(n,t),e}},unbindEvent:function(n,t){return function(e){return e.removeEventListener(n,t),e}},bindBodyEvent:function(n,t){return this.bindEvent(n,t)(document.body)},unbindBodyEvent:function(n,t){return this.unbindEvent(n,t)(document.body)}};
},{}],"ybtO":[function(require,module,exports) {
function e(e){return i(e)||n(e)||r(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function i(e){if(Array.isArray(e))return s(e)}function o(e,t){return d(e)||a(e,t)||r(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,l=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(a){o=!0,l=a}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}return n}}function d(e){if(Array.isArray(e))return e}var c=require("./group-helper"),p=require("./wise-facedetection-helper"),u=require("./line-helper"),g=require("./circle-helper"),h=require("./text-helper"),f=require("./polygon-helper"),x=require("./arrow-image-helper"),w=require("../../common/ElementController"),m=require("../../common/FunnyMath"),H=require("../../common/EventController"),v=require("../../common/fp"),A=require("../../modules/constants"),y=A.MOVED_ATTR;module.exports=function(t,n){var i=[],l=null,r=null,s=this;t.selectedCircleIndex=null,t.selectedLineIndex=null,t.groupHelper=new c(t,n),t.wiseFaceDetectionHelper=new p(t,n),t.lineHelper=new u(t,n),t.circleHelper=new g(t,n),t.textTagHelper=new h(t,n),t.polygonHelper=new f(t,n),t.arrowImageHelper=new x(t,n),this.getArrow=t.arrowImageHelper.getArrow,this.changeArrow=t.arrowImageHelper.changeArrow,this.moveTopLayer=t.groupHelper.moveTopLayer,this.changeFillColor=t.wiseFaceDetectionHelper.changeFillColor,this.changeAxis=function(){var e="",n=0,i=t.lineHelper.getLines(),l=t.circleHelper.getCircles(),r=t.textTagHelper.getTextTag(),s=t.polygonHelper.getPolygon(),a=t.drawModel.getPoints();if(v.each(function(e,n,i,l){var r=!0===t.options.fill&&n===l-1?0:n+1,s=o(a[n],2),d=s[0],c=s[1],p=o(a[r],2),u=p[0],g=p[1];v.divEq(w.setAttr("x1",d),w.setAttr("y1",c),w.setAttr("x2",u),w.setAttr("y2",g))(e)})(i),v.each(function(n,i,o,l){var s=a[i],d=s[0],c=s[1],p=parseInt(w.getAttr("width")(n)),u=parseInt(w.getAttr("height")(n));if(!1===t.options.fixedRatio&&!1===t.options.useOnlyRectangle)d-=p/2,c-=u/2;else if(!0===t.options.fixedRatio)switch(i){case t.rectangleIndex[0]:d-=p-t.options.lineStrokeWidth/2,c-=u-t.options.lineStrokeWidth/2;break;case t.rectangleIndex[1]:d-=t.options.lineStrokeWidth/2,c-=u-t.options.lineStrokeWidth/2;break;case t.rectangleIndex[2]:d-=p-t.options.lineStrokeWidth/2,c-=u-t.options.lineStrokeWidth/2;break;case t.rectangleIndex[3]:d-=p-t.options.lineStrokeWidth/2,c-=t.options.lineStrokeWidth/2}n.setAttributeNS(null,"x",d),n.setAttributeNS(null,"y",c),i===l-1&&null!==t.options.textInCircle&&(r.setAttributeNS(null,"x",s[0]-3),r.setAttributeNS(null,"y",s[1]+4)),!0===t.options.fill&&(e+=s[0]+","+s[1]+" ")})(l),!0===t.options.fill&&s.setAttributeNS(null,"points",e.replace(/[\s]{1}$/,"")),!0===t.useArrow&&t.arrowImageHelper.changeArrowImage(),!1!==t.options.wiseFaceDetection){var d=a[0],c=a[1],p=a[2],u=m.getLineCenter(c[0],c[1],p[0],p[1])[0],g=m.getLineCenter(d[0],d[1],c[0],c[1])[1];n=0,"heightRatio"in t.options.wiseFaceDetection?n=d[1]-c[1]:"widthRatio"in t.options.wiseFaceDetection&&(n=d[0]-c[0]),n=Math.abs(n),t.wiseFaceDetectionHelper.updateCircle(u,g,n)}},this.resetAllColor=function(){var e=t.lineHelper.getLines(),n=t.circleHelper.getCircles();v.each(function(e){return t.lineHelper.setDefaultColor(e)})(e),v.each(function(e){return t.lineHelper.setDefaultColor(e)})(n),t.polygonHelper.setDefaultColor()},this.setAllColor=function(){var e=t.lineHelper.getLines(),n=t.circleHelper.getCircles();v.each(function(e){return t.lineHelper.setSelectColor(e)})(e),v.each(function(e){return t.lineHelper.setSelectColor(e)})(n),t.polygonHelper.setSelectColor()},this.setCursor=function(e){w.style("cursor",t.options.useCursor?"pointer":"default")(e)},this.resetCursor=function(e){w.style("cursor","default")(e)},this.createSVGElement=function(){var e=t.options.circleRadius,n=t.drawModel.getPointsLength(),i=function(){!0===t.options.fixedRatio?t.lineHelper.addLine(!1,!1):t.lineHelper.addLine()};v.loop(function(n,o){n<o-1?i():(null!==t.options.textInCircle&&(e*=1.5),!0===t.options.fill&&(i(),t.polygonHelper.addPolygon())),!0===t.options.fixedRatio?n===t.rectangleIndex[2]?t.circleHelper.addCircle(e):t.circleHelper.addCircle(0,!1,!1):t.circleHelper.addCircle(e)})(n),t.textTagHelper.addText(),t.arrowImageHelper.addImage(),t.groupHelper.add(),!1!==t.options.wiseFaceDetection&&t.wiseFaceDetectionHelper.add()},this.appendDom=function(){t.groupHelper.append(),t.polygonHelper.append(),t.lineHelper.appendAll(),t.circleHelper.appendAll(),t.textTagHelper.append(),t.arrowImageHelper.append(),!1!==t.options.wiseFaceDetection&&t.wiseFaceDetectionHelper.append()},this.resetParentSvgAttr=function(){window.setTimeout(function(){w.setAttr(y,!1)(n)},100)},this.removeAllElement=function(){try{t.lineHelper.removeAll(),t.circleHelper.removeAll(),t.polygonHelper.remove(),t.textTagHelper.remove(),t.arrowImageHelper.remove(),!1!==t.options.wiseFaceDetection&&t.wiseFaceDetectionHelper.remove(),t.groupHelper.remove()}catch(e){}},this.addPoint=function(e,n,i){var o=t.options.circleRadius,l=t.drawModel.getPointsLength();v.negate(v.isUndefined(i))?t.drawModel.addAxis(e,n,i):t.drawModel.addAxis(e,n),t.lineHelper.addLine(),t.lineHelper.appendAtLast(),null!==t.options.textInCircle&&(o*=1.5),t.circleHelper.addCircle(o),t.circleHelper.changeRadius(l-1,t.options.circleRadius),t.circleHelper.appendAtLast(),t.changeAxis(),t.drawModel.isAllSelected&&t.setAllColor()},this.callCustomEvent=function(e,n){var i="";!0!==t.options.useResizeRectangle&&!0!==t.options.useEvent||null===t.options.event||!1!==t.options.customDraw||e in t.options.event&&(i=!0===Array.isArray(n)?"apply":"call",t.options.event[e][i](t,n))},this.createArrow=function(e){t.useArrow=!0,t.options.arrow=v.clone(e),t.arrowImageHelper.addImage(),t.changeAxis(),t.arrowImageHelper.append()},this.toggleDraggingStatus=function(e){var t=!0===e?"add":"remove";document.body.classList[t]("svg-geometry")},this.resetElementStatus=function(){var e=t.lineHelper.getLines(),o=t.circleHelper.getCircles(),a=t.polygonHelper.getPolygon();null!==t.selectedLineIndex&&(e[t.selectedLineIndex].isSelected=!1,t.selectedLineIndex=null),null!==t.selectedCircleIndex&&(o.forEach(function(e){!0===e.isSelected&&(e.isSelected=!1)}),t.selectedCircleIndex=null),!0===t.options.fill&&(a.isSelected=!1,r=null),!1===t.drawModel.isAllSelected&&t.resetAllColor(),s.resetCursor(n),!0===t.options.fixedRatio&&(i=[]),l=null},this.parentSVGMouseUpHandle=function(){s.toggleDraggingStatus(!1),null!==t.selectedCircleIndex&&t.circleHelper.isMouseLeave()&&t.circleHelper.update(),null!==t.selectedLineIndex&&s.callCustomEvent("mouseup",t.getData()),s.resetElementStatus(),s.resetParentSvgAttr()},this.parentSVGMouseDownHandle=function(e){var o=t.circleHelper.getCircles(),a=(t.lineHelper.getLines(),t.polygonHelper.getPolygon()),d=function(e){return e.isSelected};l=w.getPageAxis(n,e),v.pipe(v.findIndex(d),function(e){e>-1&&(t.selectedCircleIndex=e)})(o),null===t.selectedCircleIndex&&!1===t.options.fixedRatio&&v.pipe(v.findIndex(d),function(e){e>-1&&(t.selectedLineIndex=e)}),!0===t.options.fixedRatio&&!1!==t.options.ratio?i=t.options.ratio:null!==t.selectedCircleIndex&&!0===t.options.fixedRatio&&(i=[t.options.points[2][0]-t.options.points[0][0],t.options.points[2][1]-t.options.points[0][1]]),!0===t.options.fill&&!0===a.isSelected&&(r=!0),!0===t.options.customDraw?(t.selectedCircleIndex=!0===t.options.useOnlyRectangle||!0===t.options.useRectangleForCustomDraw?2:o.length-1,s.toggleDraggingStatus(!0)):null===t.selectedCircleIndex&&null===t.selectedLineIndex&&null===r||(w.setAttr(y,!0)(n),s.toggleDraggingStatus(!0))};this.parentSVGMouseMoveHandle=function(a){if(!0===t.options.customDraw&&null===t.selectedCircleIndex&&s.parentSVGMouseDownHandle(a),null!==t.selectedCircleIndex||null!==t.selectedLineIndex||null!==r||!1!==t.options.customDraw){var d=w.getPageAxis(n,a),c=d[0],p=d[1],u=c-l[0],g=p-l[1],h=w.getSVGOffset(n)().width,f=w.getSVGOffset(n)().height,x=t.drawModel.getAxis(t.rectangleIndex[0]),H=t.drawModel.getAxis(t.rectangleIndex[2]),A=[],y=t.drawModel.getPointsLength(),S=0,I=0,C=0,M=0,b=null,L=[],D=[],R=null;if(null!==t.selectedCircleIndex)if(c<0?c=0:c>h&&(c=h),p<0?p=0:p>f&&(p=f),!0===t.options.fixedRatio||!0===t.options.useRectangleForCustomDraw){var E=[];if(E=!0===t.options.useOnlyRectangle||!0===t.options.useRectangleForCustomDraw?function(e){var i=o(t.drawModel.getAxis(t.rectangleIndex[0]),2),l=i[0],r=i[1],a=o(w.getPageAxis(n,e),2),d=a[0],c=a[1],p=t.drawModel.getAxis(t.rectangleIndex[2]);return s.validateGeometrySize(Math.abs(l-d),Math.abs(r-p[1]))||(d=p[0]),s.validateGeometrySize(Math.abs(l-p[0]),Math.abs(r-c))||(c=p[1]),[l,r,d,c]}(a):function(e){var o=w.getPageAxis(n,e),r=o[0],a=o[1],d=t.drawModel.getAxis(t.rectangleIndex[0]),c=r-l[0],p=a-l[1],u=Math.abs(c)+Math.abs(p),g=i[0]/(i[1]+i[0])*u;(c<0||p<0)&&(g*=-1);var h=d[0],f=r+g,x=d[1],m=x+(f-h)*i[1]/i[0];if(!1===t.drawModel.validateAxis(f,m)){if(!(0===h&&0===x&&f>0&&m>0))return;f=t.options.maxSize.width,m=t.options.maxSize.height}if(s.validateGeometrySize(Math.abs(h-f),Math.abs(x-m)))return[h,x,f,m]}(a),v.isUndefined(E)||!1===t.options.useRectangleForCustomDraw&&(x[0]>E[2]||x[1]>E[3]))return;s.changeRectangle.apply(s,e(E))}else{var P=[],T=0,G=0;if(!1===t.options.customDraw&&!1!==t.options.minLineLength){L=t.circleHelper.getCircles(),!1===t.options.fill&&0===t.selectedCircleIndex||(T=0===t.selectedCircleIndex?L.length-1:t.selectedCircleIndex-1,P.push(t.drawModel.getAxis(T))),!1===t.options.fill&&t.selectedCircleIndex===L.length-1||(G=t.selectedCircleIndex===L.length-1?0:t.selectedCircleIndex+1,P.push(t.drawModel.getAxis(G)));for(var F=0,V=P.length;F<V;F++)if(b=P[F],m.pythagoreanTheorem(c,p,b[0],b[1])<t.options.minLineLength)return}if((A=t.drawModel.getPoints())[t.selectedCircleIndex]=[c,p],!1===t.validateStabilization(A))return;t.drawModel.setAxis(t.selectedCircleIndex,c,p)}else if(!0===t.options.fill&&null!==t.selectedLineIndex){D=t.lineHelper.getLines();var z=t.drawModel.getAxis(t.selectedLineIndex),q=!0===t.options.fill&&t.selectedLineIndex===D.length-1?0:t.selectedLineIndex+1,O=t.drawModel.getAxis(q);if(S=z[0]+u,C=z[1]+g,I=O[0]+u,M=O[1]+g,!1!==t.drawModel.validateAxis(S,C)&&!1!==t.drawModel.validateAxis(I,M)||(S=z[0],C=z[1],I=O[0],M=O[1]),(A=t.drawModel.getPoints())[t.selectedLineIndex]=[S,C],A[q]=[I,M],!1===t.validateStabilization(A))return;t.drawModel.setAxis(t.selectedLineIndex,S,C),t.drawModel.setAxis(q,I,M)}else if(!0===t.options.fill||null!==t.selectedLineIndex){var k=!1;k=null!==(R=t.polygonHelper.getPolygon())?!0===R.isSelected:null!==t.selectedLineIndex,!0!==t.options.useOnlyRectangle&&!0!==t.options.fixedRatio||((x[0]+u<0||H[0]+u>h)&&(u=0),(x[1]+g<0||H[1]+g>f)&&(g=0)),!1===t.drawModel.validateAllPoint(u,0)&&(u=0),!1===t.drawModel.validateAllPoint(0,g)&&(g=0),k&&v.loop(function(e){var n=t.drawModel.getAxis(e);t.drawModel.setAxis(e,n[0]+u,n[1]+g)})(y)}l=[c,p],t.changeAxis()}},this.bindEvent=function(){!0!==t.options.useResizeRectangle&&!0!==t.options.useEvent&&!0!==t.options.customDraw||(l=null,H.bindBodyEvent("mousedown",s.parentSVGMouseDownHandle),H.bindBodyEvent("mousemove",s.parentSVGMouseMoveHandle),H.bindBodyEvent("mouseup",s.parentSVGMouseUpHandle),H.bindBodyEvent("mouseleave",s.parentSVGMouseUpHandle))},this.init=function(){s.createSVGElement(),!0===t.options.initCenter&&t.drawModel.alignCenter(),t.changeAxis(),t.resetAllColor(),s.bindEvent(),s.appendDom()},this.reset=function(){s.removeAllElement(),s.unbindEvent(),t.lineHelper.setLines([]),t.circleHelper.setCircles([]),t.polygonHelper.setPolygon(null),t.textTagHelper.setTextTag(null),t.arrowImageHelper.resetData()},this.unbindEvent=function(){H.unbindBodyEvent("mousedown",s.parentSVGMouseDownHandle),H.unbindBodyEvent("mousemove",s.parentSVGMouseMoveHandle),H.unbindBodyEvent("mouseup",s.parentSVGMouseUpHandle),H.unbindBodyEvent("mouseleave",s.parentSVGMouseUpHandle)},this.endDraw=function(){t.options.customDraw=!1,t.options.useRectangleForCustomDraw=!1,s.resetElementStatus(),s.resetParentSvgAttr()},this.changeRectangleToSize=function(e,i){if(!0===t.options.useOnlyRectangle||!0===t.options.fixedRatio){var o=t.drawModel.getAxis(0),l=t.drawModel.getAxis(2),r=w.getSVGOffset(n)(),a=0,d=0,c=0,p=0;l[0]>=r.width?(a=l[0]-e,d=l[0]):(a=o[0],d=o[0]+e),l[1]>=r.height?(c=l[1]-i,p=l[1]):(c=o[1],p=o[1]+i),s.changeRectangle(a,c,d,p,!0),t.changeAxis()}},this.changeRectangle=function(e,n,i,o,l){!0===l&&t.drawModel.setAxis(0,e,n),t.drawModel.setAxis(t.rectangleIndex[1],e,o),t.drawModel.setAxis(t.rectangleIndex[2],i,o),t.drawModel.setAxis(t.rectangleIndex[3],i,n)},this.changeNormalStatus=function(){var e=t.lineHelper.getLines(),n=t.circleHelper.getCircles();e.forEach(function(e){t.lineHelper.hide(e)}),n.forEach(function(e){t.circleHelper.hide(e)}),!0===t.useArrow&&t.arrowImageHelper.hide(),t.textTagHelper.hide(),t.resetAllColor()},this.changeActiveStatus=function(){var e=t.lineHelper.getLines(),n=t.circleHelper.getCircles();e.forEach(function(e){t.lineHelper.show(e)}),n.forEach(function(e){t.circleHelper.show(e)}),!0===t.useArrow&&t.arrowImageHelper.show(),t.textTagHelper.show(),t.setAllColor()},this.validateGeometrySize=function(e,n){return(!v.negate(v.isUndefined(t.options.minSize))||!(e<t.options.minSize.width||n<t.options.minSize.height))&&(!v.negate(v.isUndefined(t.options.maxSize))||!(e>t.options.maxSize.width||n>t.options.maxSize.height))}};
},{"./group-helper":"EG0U","./wise-facedetection-helper":"AjX5","./line-helper":"nNCE","./circle-helper":"EDWs","./text-helper":"oslI","./polygon-helper":"xwqZ","./arrow-image-helper":"xUQg","../../common/ElementController":"Uh1v","../../common/FunnyMath":"xbRW","../../common/EventController":"XfI7","../../common/fp":"KjOz","../../modules/constants":"n6AC"}],"IolE":[function(require,module,exports) {
"use strict";var e=require("../../common/FunnyMath"),i=require("./DrawModel"),n=require("./DrawView"),t=require("../../common/fp");module.exports=function(o,r){var a=this,l=1;function d(i){var n=[],o=0;try{if((o=(n=t.isUndefined(i)?t.clone(a.drawModel.getPoints()):t.clone(i)).length)>=3&&!0===a.options.fill){if(Math.abs(e.getVertextAngle(n[0],n[1],n[2]))<l)return!1;t.loop(function(){n.push(n.shift())})(o)}}catch(r){console.warn(r)}return!0}function w(i){var n=!0,o=0,r=0;if(!1!==a.options.fill&&!0!==a.options.fixedRatio){try{r=(o=t.isUndefined(i)?t.clone(a.drawModel.getPoints()):t.clone(i)).length;for(var l=0;l<r-1;l++)for(var d=o[l],w=o[l+1],c=l+1;c<r;c++){var s=o[c],u=o[c+1===r?0:c+1];if(!1===e.checkLineIntersection(d[0],d[1],w[0],w[1],s[0],s[1],u[0],u[1])){n=!1;break}}}catch(g){console.info(g)}return n}}a.options=t.merge({fillColor:"#cccccc",lineColor:"#cccccc",pointColor:"#cccccc",points:[[0,0],[100,100]],lineStrokeWidth:3,circleRadius:5,minLineLength:30,textInCircle:null,arrow:null,useEvent:!1,useResizeRectangle:!1,notUseMoveTopLayer:!1,useCursor:!1,useOnlyRectangle:!1,useRectangleForCustomDraw:!1,fill:!1,fillOpacity:.5,fixedRatio:!1,ratio:!1,event:{},customDraw:!1,minSize:{width:30,height:30},maxSize:!1,minPoint:4,maxPoint:8,initCenter:!1,mirror:!1,flip:!1,notUseAutoChangeOfArrow:!1,wiseFaceDetection:!1},r),a.useArrow=!0,null===a.options.arrow?a.useArrow=!1:""===a.options.arrow.mode&&(a.useArrow=!1),!0===a.options.useOnlyRectangle&&(a.options.fixedRatio=!0),a.drawModel=new i(a,o),a.drawView=new n(a,o),a.rectangleIndex=a.drawModel.getRectangleIndex(),a.callCustomEvent=a.drawView.callCustomEvent,a.init=a.drawView.init,a.addPoint=a.drawView.addPoint,a.hide=a.drawView.removeAllElement,a.show=a.drawView.appendDom,a.active=a.drawView.changeActiveStatus,a.normal=a.drawView.changeNormalStatus,a.getData=function(){return{points:a.drawModel.getPoints(),arrow:a.drawView.getArrow()}},a.reset=a.drawView.reset,a.destroy=a.drawView.reset,a.endDraw=a.drawView.endDraw,a.createArrow=a.drawView.createArrow,a.changeArrow=a.drawView.changeArrow,a.changeMinSizeOption=a.drawModel.changeMinSizeOption,a.changeMaxSizeOption=a.drawModel.changeMaxSizeOption,a.changeRectangleToSize=a.drawView.changeRectangleToSize,a.modifyPoints=a.drawModel.modifyPoints,a.alignCenter=a.drawModel.alignCenter,a.validateAxis=a.drawModel.validateAxis,a.stopEvent=a.drawView.unbindEvent,a.startEvent=a.drawView.bindEvent,a.moveTopLayer=a.drawView.moveTopLayer,a.changeWFDFillColor=a.drawView.changeFillColor,a.changeAxis=a.drawView.changeAxis,a.resetAllColor=function(){a.drawView.resetAllColor(),a.drawModel.setIsAllSelectedState(!1)},a.setAllColor=function(){a.drawView.setAllColor(),a.drawModel.setIsAllSelectedState(!0)},a.validateStabilization=function(e){var i=t.isUndefined(e)?t.clone(a.drawModel.getPoints()):t.clone(e),n=!0;!1!==d(i)&&!1!==w(i)||(n=!1);return n},a.validateIntersection=w,a.validateMinimumAngle=d,a.drawView.init()};
},{"../../common/FunnyMath":"xbRW","./DrawModel":"jKlS","./DrawView":"ybtO","../../common/fp":"KjOz"}],"BU8R":[function(require,module,exports) {
function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,o,r){return o&&n(t.prototype,o),r&&n(t,r),t}var r=require("../draw"),e=function(t,n,o,r){return[[t,n],[t,r],[o,r],[o,n]]},i=function(t,n){"start"in t.event&&t.event.start(n)},u=function(t,n){"end"in t.event&&t.event.end(n)},s=function(){return{obj:null,currentPoint:0,options:null}},c=function(t,n,o,e){var u=new r(t,n);return i(n,u),{obj:u,currentPoint:++e}},a=function(t,n){return t.endDraw(),u(n,t),s()},f=function(t){return t.destory(),s()},l=function(t){return 0===t},h=function(){function n(o){t(this,n);var r=s(),e=r.obj,i=r.currentPoint,u=r.options;this._rootSVG=o,this._obj=e,this._currentPoint=i,this._options=u}return o(n,[{key:"start",value:function(t,n){this._options=t;var o=c(this._rootSVG,t,n,this._currentPoint),r=o.obj,e=o.currentPoint;this._obj=r,this._currentPoint=e}},{key:"end",value:function(){var t=a(this._obj,this._options),n=t.obj,o=t.currentPoint,r=t.options;this._obj=n,this._currentPoint=o,this._options=r}},{key:"add",value:function(){}},{key:"isLast",value:function(){}},{key:"isFirst",value:function(){return l(this._currentPoint)}},{key:"destroy",value:function(){var t=f(this._obj),n=t.obj,o=t.currentPoint,r=t.options;this._obj=n,this._currentPoint=o,this._options=r}},{key:"convertRectanglePoints",value:function(){return e.apply(void 0,arguments)}}]),n}();module.exports=h;
},{"../draw":"IolE"}],"tB5R":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=s();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?a(e):n}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=require("./state"),h=function(t){c(i,y);var n=f(i);function i(t){return e(this,i),n.call(this,t)}return r(i,[{key:"start",value:function(t,e){var n=[];n=!1===t.minSize?this.convertRectanglePoints(e[0],e[1],e[0]+t.ratio[0],e[1]+t.ratio[1]):this.convertRectanglePoints(e[0],e[1],e[0]+t.minSize.width,e[1]+t.minSize.height),t.points=n,o(p(i.prototype),"start",this).call(this,t,e)}},{key:"end",value:function(){o(p(i.prototype),"end",this).call(this)}},{key:"isLast",value:function(){return 0!==this._currentPoint}}]),i}();module.exports=h;
},{"./state":"BU8R"}],"Dn5L":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=c(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=s();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?a(e):n}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=require("./state"),b=function(t){u(c,y);var n=f(c);function c(t){return e(this,c),n.call(this,t)}return r(c,[{key:"start",value:function(t,e){t.points=this.convertRectanglePoints(e[0],e[1],e[0],e[1]),o(p(c.prototype),"start",this).call(this,t,e)}},{key:"end",value:function(){o(p(c.prototype),"end",this).call(this)}},{key:"isLast",value:function(){return 0!==this._currentPoint}}]),c}();module.exports=b;
},{"./state":"BU8R"}],"pnh9":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=s();return function(){var n,r=p(t);if(e){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?l(e):n}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=require("./state"),h=require("../../common/FunnyMath"),b=require("../../common/fp"),v=function(t){u(i,y);var n=f(i);function i(t){return e(this,i),n.call(this,t)}return r(i,[{key:"start",value:function(t,e){t.points=[e,e],o(p(i.prototype),"start",this).call(this,t,e),this._currentPoint=2}},{key:"end",value:function(){o(p(i.prototype),"end",this).call(this)}},{key:"add",value:function(t){!1!==this.validateAllAxis(this._options.minLineLength)&&(this._currentPoint>2&&!1===this._obj.validateStabilization()||(this._obj.addPoint(t[0],t[1]),this._currentPoint++))}},{key:"isLast",value:function(){return this._currentPoint===this._options.minPoint&&(!1!==this.validateAllAxis(this._options.minLineLength)&&!1!==this._obj.validateStabilization())}},{key:"validateAllAxis",value:function(){var t=this,e=this._obj.getData().points,n=h.pythagoreanTheorem;return!b.find(function(e,r,o){var i=r===o.length-1?o[0]:o[r+1];if(n(e[0],e[1],i[0],i[1])<t._options.minLineLength)return!0})(e)}}]),i}();module.exports=v;
},{"./state":"BU8R","../../common/FunnyMath":"xbRW","../../common/fp":"KjOz"}],"WbEv":[function(require,module,exports) {
"use strict";var e=require("../../common/EventController"),n=require("../../common/ElementController"),t=require("../../common/fp"),r=require("./fixed_ratio_state"),i=require("./ractangle_state"),o=require("./line_state"),u=require("../../modules/constants"),c=u.MOVED_ATTR,a=function(e){return!0===e.useOnlyRectangle?!0===e.fixedRatio?r:i:o},s=function(e){var n=t.merge({minPoint:4,event:{},fixedRatio:!1,useOnlyRectangle:!1,ratio:!1,minLineLength:20,minSize:!1},e);return n.fixedRatio&&(n.useOnlyRectangle=!0),n.customDraw=!0,n},f=function(n,t,r){return e.bindEvent(t,r)(n),function(){e.unbindEvent(t,r)(n)}},l=function(e,t,r){var i,o,u=function(){!1===t.isFirst()&&(t.destroy(),s())},a=function(){i=f(e,"contextmenu",u),o=f(document,"keyup",function(e){27===e.keyCode&&u()})},s=function(){i(),o()};return f(e,"click",function(i){if("true"!==n.getAttr(c)(e)){var o=n.getPageAxis(e,i);t.isFirst()?(a(),t.start(r,o)):t.isLast()?(s(),t.end()):t.add(o)}})};module.exports=function(e,n){var t=s(n),r=new(a(t))(e);return{destroy:l(e,r,t)}};
},{"../../common/EventController":"XfI7","../../common/ElementController":"Uh1v","../../common/fp":"KjOz","./fixed_ratio_state":"tB5R","./ractangle_state":"Dn5L","./line_state":"pnh9","../../modules/constants":"n6AC"}],"UH7W":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function i(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=f();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,n){return!n||"object"!==t(n)&&"function"!=typeof n?l(e):n}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=require("./customeditor"),v=require("./draw"),d=require("../common/EventController"),y=require("../common/ElementController"),b=require("../common/fp"),m=require("../modules/constants"),w=m.MOVED_ATTR,g=m.CLICK_DETECTION_TIME,E=function(t){u(i,p);var n=s(i);function i(t,r){var o;return e(this,i),(o=n.call(this,t,r))._mouseDownTimer=null,o._svgObj=null,o}return r(i,[{key:"unbindEvent",value:function(){b.divEq(d.unbindEvent("click",this.parentSVGClickHandle),d.unbindEvent("mousedown",this.parentSVGMouseDownHandle),d.unbindEvent("mouseup",this.parentSVGMouseUpHandle))(this._rootSVG)}},{key:"createParentSVGClickHandle",value:function(){var t=this,e=o(h(i.prototype),"createParentSVGClickHandle",this).call(this);return function(n){t._options.useRectangleForCustomDraw=!1,e(n)}}},{key:"bindEvent",value:function(){this.parentSVGMouseDownHandle=this.createParentSVGMouseDownHandle(),this.parentSVGMouseUpHandle=this.createParentSVGMouseUpHandle(),this.parentSVGClickHandle=this.createParentSVGClickHandle(),b.divEq(d.bindEvent("mousedown",this.parentSVGMouseDownHandle),d.bindEvent("mouseup",this.parentSVGMouseUpHandle))(this._rootSVG)}},{key:"bindCancelEvent",value:function(){this.bindContextMenu(),document.addEventListener("keyup",this.handleESCKey)}},{key:"unbindCancelEvent",value:function(){this.unbindContextMenu(),document.removeEventListener("keyup",this.handleESCKey)}},{key:"removeDrawingGeometry",value:function(){o(h(i.prototype),"removeDrawingGeometry",this).call(this),!1===this._state.isFirst()&&this.restartDrawing()}},{key:"restartDrawing",value:function(){this.unbindCancelEvent(),this.unbindEvent(),this.bindEvent()}},{key:"endDraw",value:function(){o(h(i.prototype),"endDraw",this).call(this),this.restartDrawing()}},{key:"endDragEvent",value:function(){this._svgObj.endDraw(),this.unbindCancelEvent(),this.restartDrawing(),this._svgObj=null}},{key:"createParentSVGMouseUpHandle",value:function(){var t=this;return function(e){if(null!==t._mouseDownTimer)t.abortCheckingDragEvent(e);else{var n=2===e.buttons,r="true"===y.getAttr(w)(t._rootSVG);n||r||null===t._svgObj||t.endDragEvent()}}}},{key:"abortCheckingDragEvent",value:function(t){window.clearTimeout(this._mouseDownTimer),this._mouseDownTimer=null,this.parentSVGClickHandle(t),b.divEq(d.unbindEvent("mousedown",this.parentSVGMouseDownHandle),d.unbindEvent("mouseup",this.parentSVGMouseUpHandle),d.bindEvent("click",this.parentSVGClickHandle))(this._rootSVG)}},{key:"createParentSVGMouseDownHandle",value:function(){var t=this;return function(e){var n=2===e.buttons,r=e.currentTarget!==e.target,o="true"===y.getAttr(w)(t._rootSVG);n||r||o||t.startCheckingDragEvent(e)}}},{key:"startCheckingDragEvent",value:function(t){var e=this;window.clearTimeout(this._mouseDownTimer),this._mouseDownTimer=window.setTimeout(function(t){return e.startDragEvent(t)},g,y.getPageAxis(this._rootSVG,t))}},{key:"startDragEvent",value:function(t){this._mouseDownTimer=null,this._options.points=[t,[t[0],t[1]+30],[t[0]+30,t[1]+30],[t[0]+30,t[1]]],this._options.useRectangleForCustomDraw=!0,this._svgObj=new v(this._rootSVG,this._options),this.bindCancelEvent()}}]),i}();module.exports=E;
},{"./customeditor":"WbEv","./draw":"IolE","../common/EventController":"XfI7","../common/ElementController":"Uh1v","../common/fp":"KjOz","../modules/constants":"n6AC"}],"DyCu":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var n=require("../plugins/draw"),o=require("../plugins/customeditor"),u=require("../plugins/svg_geometry_plugin_customeditor_v2"),i=require("../common/ElementController"),s=require("../common/fp"),l=function(){function t(r){e(this,t),s.divEq(i.setAttr("draggable",!1),i.style("cursor","normal"),i.style("userSelect","none"),i.style("mozUserSelect","none"),i.style("webkitUserSelect","none"),i.style("msUserSelect","none"))(r),this._rootSVG=r}return r(t,[{key:"draw",value:function(e){return new n(this._rootSVG,e)}},{key:"customEditor",value:function(e){return o(this._rootSVG,e)}},{key:"customEditorV2",value:function(e){return this.customEditor(e)}}]),t}();module.exports=l;
},{"../plugins/draw":"IolE","../plugins/customeditor":"WbEv","../plugins/svg_geometry_plugin_customeditor_v2":"UH7W","../common/ElementController":"Uh1v","../common/fp":"KjOz"}],"k3zf":[function(require,module,exports) {
var n=require("../src/modules/svg_geometry");module.exports=function(){var o=document.getElementById("svg_polygon"),e=new n(o),t=null;function i(){var n=t.getData(),o=document.getElementById("svg_polygon_log");o.innerHTML="";for(var e=0,i=n.points.length;e<i;e++){var r=n.points[e];o.innerHTML+="["+r[0]+","+r[1]+"]",e<i-1&&(o.innerHTML+=",")}}return{draw:function(){t=e.draw({fillColor:"#ff6633",lineColor:"#ff6633",pointColor:"#ff6633",lineStrokeWidth:5,circleRadius:6,fill:!0,points:[[156.5,370],[239.5,304],[321.5,366],[286.5,271],[370.5,220],[271.5,221],[238.5,125],[210.5,222],[114.5,225],[197.5,272]],minPoint:2,maxPoint:10,useEvent:!0,useCursor:!0,event:{mouseup:i,polygoncontextmenu:function(){alert("polygoncontextmenu")}}})},addPoint:function(){t.addPoint()},getPoints:i}};
},{"../src/modules/svg_geometry":"DyCu"}],"jNjG":[function(require,module,exports) {
var n=require("../src/modules/svg_geometry");module.exports=function(){var e=document.getElementById("svg_privacy_polygon"),t=document.getElementById("svg_privacy_polygon_list"),o=new n(e),r=[],i=null,a={lineStrokeWidth:5,circleRadius:8,useEvent:!0,maxPoint:8,fill:!0,fillOpacity:0,event:{end:function(n){l(n),c()},mouseup:c}};function l(n){r.push(n),t.innerHTML="";for(var e=0,o=r.length;e<o;e++)t.innerHTML+="<option>"+e+"</option>"}function u(){null===i&&(i=o.customEditor(a))}function c(){for(var n=document.getElementById("svg_privacy_polygon_log"),e="",t=0,o=r.length;t<o;t++){var i=r[t].getData().points;e+="index : "+t+" data: ";for(var a=0,l=i.length;a<l;a++)e+="["+i[a][0]+", "+i[a][1]+"],";e+="<br>"}n.innerHTML=e}return{selectShape:function(){for(var n=0,e=r.length;n<e;n++){var o=parseInt(t.value)===n?"active":"normal";r[n][o]()}},init:function(){u(),a.points=[[219,59],[80,109],[96,238],[190,189]],l(o.draw(a)),a.points=[[363,81],[302,133],[348,217],[466,160]],l(o.draw(a))},startDrawing:u,stopDrawing:function(){null!==i&&(i.destroy(),i=null)},addPoint:function(){var n=parseInt(t.value);r[n].addPoint()},removeDrawingGeometry:function(){null!==i&&i.removeDrawingGeometry()}}};
},{"../src/modules/svg_geometry":"DyCu"}],"XSyp":[function(require,module,exports) {
var e=require("../src/modules/svg_geometry");module.exports=function(){var t=document.getElementById("svg_privacy_rectangle"),n=new e(t),i=[],a={width:50,height:50},r={width:250,height:250},g=function(){for(var e=document.getElementById("svg_privacy_rectangle_log"),t="",n=0,a=i.length;n<a;n++){var r=i[n].getData().points;t+="index : "+n+" data: ";for(var g=0,o=r.length;g<o;g++)t+="["+r[g][0]+", "+r[g][1]+"],";t+="<br>"}e.innerHTML=t};return{startDrawing:function(){var e={lineStrokeWidth:5,circleRadius:8,useEvent:!1,useResizeRectangle:!0,fill:!0,fillOpacity:0,fixedRatio:!0,minSize:a,maxSize:r,ratio:[1,1],event:{mouseup:g}};e.event.end=function(e){i.push(e),g()},e.wiseFaceDetection={strokeWidth:2,strokeColor:"#dd5500",fillOpacity:0,heightRatio:2.2},n.customEditor(e),e.points=[[0,0],[0,100],[100,100],[100,0]],i.push(n.draw(e))},changeMinMaxSize:function(){var e=document.getElementById("svg_privacy_rectangle_min"),t=document.getElementById("svg_privacy_rectangle_max");a.width=a.height=parseInt(e.value),r.width=r.height=parseInt(t.value);for(var n=0,g=i.length;n<g;n++){var o=i[n];o.changeMinSizeOption(a),o.changeMaxSizeOption(r)}},changeRectangleToMinSize:function(){for(var e=0,t=i.length;e<t;e++)i[e].changeRectangleToSize(a.width,a.height)},changeRectangleToMaxSize:function(){for(var e=0,t=i.length;e<t;e++)i[e].changeRectangleToSize(r.width,r.height)}}};
},{"../src/modules/svg_geometry":"DyCu"}],"HlDc":[function(require,module,exports) {
var o=require("../src/modules/svg_geometry");module.exports=function(){var i=document.getElementById("svg_line"),e=new o(i),n=[];return{draw:function(){n.push(e.draw({lineColor:"#ff6633",pointColor:"#ff6633",lineStrokeWidth:4,circleRadius:6,minPoint:2,maxPoint:8,points:[[70,242],[362,380]],useEvent:!0})),n.push(e.draw({lineColor:"#ff6633",pointColor:"#ff6633",lineStrokeWidth:4,circleRadius:6,minPoint:2,maxPoint:8,points:[[70,270],[380,270]],useEvent:!0})),e.customEditor({lineColor:"#ff6633",pointColor:"#ff6633",lineStrokeWidth:4,circleRadius:6,minPoint:2,maxPoint:8,useEvent:!0})}}};
},{"../src/modules/svg_geometry":"DyCu"}],"rqhg":[function(require,module,exports) {
var e=require("../src/modules/svg_geometry");module.exports=function(){var o=document.getElementById("svg_fixed_ratio"),i=new e(o),r=[];return{draw:function(){r.push(i.draw({fillColor:"#7fa9e3",lineColor:"#7fa9e3",pointColor:"#7fa9e3",lineStrokeWidth:4,circleRadius:8,useCursor:!0,fill:!0,points:[[10,10],[10,100],[130,100],[130,10]],fixedRatio:!0,useEvent:!0})),r.push(i.draw({fillColor:"#e38d7f",lineColor:"#e38d7f",pointColor:"#e38d7f",lineStrokeWidth:4,circleRadius:8,useCursor:!0,fill:!0,points:[[200,10],[200,210],[400,210],[400,10]],fixedRatio:!0,useEvent:!0})),r.push(i.draw({fillColor:"#7fe3a8",lineColor:"#7fe3a8",pointColor:"#7fe3a8",lineStrokeWidth:4,circleRadius:8,useCursor:!0,fill:!0,points:[[100,250],[100,430],[460,430],[460,250]],fixedRatio:!0,useEvent:!0}))},alignCenter:function(){for(var e=0,o=r.length;e<o;e++)r[e].alignCenter()}}};
},{"../src/modules/svg_geometry":"DyCu"}],"Focm":[function(require,module,exports) {
var e=require("./src/modules/svg_geometry"),n=require("./scripts/polygon.js"),i=require("./scripts/uwa_privacy_polygon.js"),o=require("./scripts/uwa_privacy_rectangle.js"),r=require("./scripts/line.js"),t=require("./scripts/fixedratio.js"),l=null,a=null;function c(e){return document.getElementById(e)}window.onload=function(){var e=new n;e.draw(),c("svg_polygon_add_point").onclick=e.addPoint,c("svg_polygon_get_point").onclick=e.getPoints;var l=new t;l.draw(),c("svg_fixed_ratio_btn").onclick=l.alignCenter,(new r).draw();var a=new i;a.init(),c("svg_privacy_polygon_remove_drawing_geometry").onclick=a.removeDrawingGeometry,c("svg_privacy_polygon_stop_drawing").onclick=a.stopDrawing,c("svg_privacy_polygon_start_drawing").onclick=a.startDrawing,c("svg_privacy_polygon_list").onchange=a.selectShape,c("svg_privacy_polygon_add_point").onclick=a.addPoint;var u=new o;u.startDrawing(),c("svg_privacy_rectangle_min").onchange=u.changeMinMaxSize,c("svg_privacy_rectangle_max").onchange=u.changeMinMaxSize,c("svg_privacy_rectangle_change_min").onclick=u.changeRectangleToMinSize,c("svg_privacy_rectangle_change_max").onclick=u.changeRectangleToMaxSize};var u={red:"#CE534D",blue:"#3184F9",includeArea:{fill:"#ff6633",line:"#ff6633",point:"#ff6633"},excludeArea:{fill:"#000000",line:"#ffffff",point:"#999999"}};function d(){return{fillColor:u.includeArea.fill,lineColor:u.includeArea.line,pointColor:u.includeArea.point,lineStrokeWidth:4,circleRadius:5,useEvent:!0,useCursor:!0,minPoint:4,maxPoint:8,fill:!0,fillOpacity:"0.2"}}function s(){return{fillColor:u.includeArea.fill,lineColor:u.includeArea.line,pointColor:u.includeArea.point,lineStrokeWidth:4,circleRadius:6,useEvent:!0,useCursor:!0,minPoint:2,maxPoint:8,arrow:{mode:"R",min:"L",max:"LR",text:!0}}}window.addEventListener("load",function(){var n=document.getElementById("wfd_roi"),i=new e(n),o=d();o.points=[[0,0],[0,480],[854,480],[854,0]],o.ratio=[1.77,1],o.fixedRatio=!0,o.wiseFaceDetection={strokeWidth:2,strokeColor:u.includeArea.line,fillOpacity:0,heightRatio:4},i.draw(o);var r=document.getElementById("roi"),t=new e(r),l=d(),a=[],c=function(e){for(var n=0,i=a.length;n<i;n++)a[n].normal();e.active()},g=[[[686,319],[455,333],[465,467],[694,459]],[[294,46],[135,55],[150,216],[367,194]]];l.event={start:function(){},end:function(e){a.push(e),c(e)},mouseup:function(){var e=this;setTimeout(function(){c(e)})}},t.customEditorV2(l);for(var p=0,v=g.length;p<v;p++)l.points=g[p],l.fillColor=0===p?u.includeArea.fill:u.excludeArea.fill,l.pointColor=0===p?u.includeArea.point:u.excludeArea.point,l.lineColor=0===p?u.includeArea.line:u.excludeArea.line,a.push(t.draw(l));c(a[0]);var _=document.getElementById("virtual_line"),f=new e(_),m=s();m.fillColor=u.blue,m.lineColor=u.blue,m.pointColor=u.blue;var w=[],y=[[[736,146],[455,333]],[[651,332],[295,152]]],h=function(e){for(var n=0,i=w.length;n<i;n++)w[n].normal();e.active()};m.event={start:function(){},end:function(e){w.push(e),h(e)},mouseup:function(){var e=this;setTimeout(function(){h(e)})}},f.customEditor(m);for(p=0,v=y.length;p<v;p++)m.points=y[p],w.push(f.draw(m));h(w[0]);var C=document.getElementById("common_calibration"),x=new e(C),A=d();A.initCenter=!0,A.notUseMoveTopLayer=!0,A.useOnlyRectangle=!0,A.minSize={width:100,height:100},A.maxSize={width:854,height:480},A.points=[[0,0],[0,480],[854,480],[854,0]],A.fillColor=u.red,A.lineColor=u.red,A.pointColor=u.red,x.draw(A),A.points=[[0,0],[0,100],[100,100],[100,0]],A.fillColor=u.blue,A.lineColor=u.blue,A.pointColor=u.blue,x.draw(A)});
},{"./src/modules/svg_geometry":"DyCu","./scripts/polygon.js":"k3zf","./scripts/uwa_privacy_polygon.js":"jNjG","./scripts/uwa_privacy_rectangle.js":"XSyp","./scripts/line.js":"HlDc","./scripts/fixedratio.js":"rqhg"}]},{},["Focm"], null)
//# sourceMappingURL=src.387e73b9.js.map