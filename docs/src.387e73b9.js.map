{"version":3,"sources":["src/common/FunnyMath.js","src/common/fp.js","src/common/ElementController.js","src/plugins/draw/DrawModel.js","src/plugins/draw/group-helper.js","src/plugins/draw/wise-facedetection-helper.js","src/plugins/draw/icon-helper.js","src/modules/constants.js","src/plugins/draw/line-helper.js","src/plugins/draw/circle-helper.js","src/plugins/draw/text-helper.js","src/plugins/draw/polygon-helper.js","src/plugins/draw/arrow-image-helper.js","src/common/EventController.js","src/plugins/draw/DrawView.js","src/plugins/draw/index.js","src/plugins/customeditor/state.js","src/plugins/customeditor/fixed_ratio_state.js","src/plugins/customeditor/ractangle_state.js","src/plugins/customeditor/line_state.js","src/plugins/customeditor/index.js","src/plugins/svg_geometry_plugin_customeditor_v2.js","src/modules/svg_geometry.js","scripts/polygon.js","scripts/uwa_privacy_polygon.js","scripts/uwa_privacy_rectangle.js","scripts/line.js","scripts/fixedratio.js","index.js"],"names":["module","exports","getRadian","angle","Math","PI","getSine","num","sin","getCosine","cos","pythagoreanTheorem","x1","y1","x2","y2","xLength","abs","yLength","lineLength","sqrt","pow","getAngle","atan2","getVertextAngle","a","b","c","ab","cb","dot","cross","alpha","checkLineIntersection","line1StartX","line1StartY","line1EndX","line1EndY","line2StartX","line2StartY","line2EndX","line2EndY","returnVal","denominator","numerator1","getLineCenter","longX","shortX","longY","shortY","each","iter","list","i","len","length","loop","map","newList","item","push","filter","find","findIndex","reduce","init","pipe","fns","res","fn","divEq","val","isUndefined","obj","negate","v","clone","copiedObj","constructor","attr","hasOwnProperty","merge","defaultOptions","_options","newOptions","keyName","_","require","setAttr","attrName","ns","element","setAttributeNS","getAttr","getAttributeNS","setHrefAttr","removeChild","parentElement","childrenElement","appendChild","style","name","value","elem","createSVGElement","document","createElementNS","createLine","strokeWidth","createCircle","circleRadius","createRect","width","height","createText","txt","text","textContent","createGroup","createImage","imagePath","imageContainner","image","createPolygon","createUse","getBodyScroll","scroll","body","html","documentElement","scrollTop","scrollLeft","left","top","getSVGOffset","target","getBoundingClientRect","getPageAxis","event","pageX","pageY","xAxis","yAxis","getSize","clientWidth","parseInt","clientHeight","ElementController","DrawModel","draw","rootSVG","self","points","options","isAllSelected","setIsAllSelectedState","state","modifyPoints","setPoints","changeAxis","getRectangleIndex","indexList","isFlip","flip","isMirror","mirror","isMirrorAndFlip","alignCenter","parentSvgSize","firstPoint","getAxis","thirdPoint","geometryWidth","geometryHeight","changedX1","round","changedY1","changedX3","changedY3","setAxis","changeMinSizeOption","newMinSize","minSize","changeMaxSizeOption","newMaxSize","maxSize","addAxis","appendIndex","lastPoint","newPoint","offset","pointsLength","getPointsLength","appendAxis","validateAxis","validateAllPoint","movedXAxis","movedYAxis","point","getPoints","prototype","index","x","y","splice","groupTag","notUseMoveTopLayer","add","remove","moveTopLayer","lastChild","insertBefore","nextSibling","append","child","apply","arguments","wiseFaceDetectionCircle","wiseFaceDetection","changeFillColor","fillColor","heightRatio","widthRatio","updateCircle","radius","getElementById","e","createElement","className","groupHelper","PLUS_IMAGE","MINUS_IMAGE","iconText","icon","clickEventHandler","leaveEventHandler","contextMenuEventHandler","createIcon","iconType","src","addEventListener","preventDefault","stopPropagation","changePosition","show","hide","opacity","onClick","callBack","onLeave","onContextMenu","MOVED_ATTR","ICON_HIDDEN_DELAY","CLICK_DETECTION_TIME","IconHelper","FunnyMath","parentSvgMovedAttr","lines","tempArrForDragChecking","iconHelper","hideOpacity","hoveredLineIndex","iconHelperTimer","setDefaultColor","lineColor","setSelectColor","backupPoints","drawModel","showPointIcon","clearTimeout","selectedLineIndex","maxPoint","pageAxis","leftAxis","rightAxis","minLineLength","lineIndex","setTimeout","mouseUpHandler","callCustomEvent","getData","contextMenuHandler","bindEvent","lineElement","useOnlyRectangle","fixedRatio","fill","selectLine","isSelected","addPointInLine","isPointsChanged","currentPoints","addPoint","call","addLine","useLineEvent","useLineCursor","newLine","lineStrokeWidth","useEvent","drawView","setCursor","appendAll","line","appendAtLast","newLineElement","nextElementSibling","removeAll","getLines","setLines","_lines","isLeave","hoveredPointIndex","circles","pointColor","circleElement","onmousedown","selectCircle","onmouseup","customDraw","update","customContextmenu","removeCircle","showDeleteIcon","hideDeleteIconWithDelay","hideDeleteIcon","selectedCircleIndex","minPoint","circleIndex","nodeName","reset","changeActiveStatus","addCircle","useCircleEvent","useCircleCursor","newCircle","useResizeRectangle","circle","changeRadius","circleLength","newCircleElement","textInCircle","isMouseLeave","getCircles","setCircles","_circles","textTag","addText","lastCircle","circleHelper","getTextTag","setTextTag","_textTag","polygon","selectPolygon","fillOpacity","addPolygon","getPolygon","setPolygon","_polygon","IMAGE_WIDTH","IMAGE_HEIGHT","NORMAL_IMAGE","PRESS_IMAGE","NORMAL_ALL_IMAGE","PRESS_ALL_IMAGE","arrowImageContainner","arrowImage","halfArrowWidth","halfArrowHeight","arrowTextContainner","arrowText","arrowQueue","arrowQueueLength","arrowScope","currentArrow","changeArrow","arrow","changeArrowImagePath","changeArrowImage","startAxis","endAxis","textAngle","degree","lineCenter","notUseAutoChangeOfArrow","changeArrowGuideText","getXAxisOfText","getYAxisOfText","axis","useArrow","setArrowScope","startIndex","min","endIndex","max","addImage","mode","createdImage","onclick","getNextArrow","nextIndex","onmouseleave","getArrow","resetData","callback","unbindEvent","removeEventListener","bindBodyEvent","unbindBodyEvent","GroupHelper","WiseFaceDetectionHelper","LineHelper","CircleHelper","TextTagHelper","PolygonHelper","ArrowImageHelper","EventController","TEXT_POINT_RADIUS","parentSvgRatio","parentSvgStartAxis","selectedPolygon","wiseFaceDetectionHelper","lineHelper","textTagHelper","polygonHelper","arrowImageHelper","polygonPoint","endAxisIndex","pointAxis","circleXAxis","circleYAxis","rectangleIndex","replace","secondPoint","thridPoint","resetAllColor","setAllColor","useCursor","resetCursor","appendDom","resetParentSvgAttr","window","removeAllElement","newCircleRadius","eventName","arg","method","Array","isArray","createArrow","arrowOptions","toggleDraggingStatus","statusType","classList","resetElementStatus","forEach","parentSVGMouseUpHandle","parentSVGMouseDownHandle","idx","ratio","useRectangleForCustomDraw","parentSVGMouseMoveHandle","offsetWidth","offsetHeight","prevPoints","changedX2","changedY2","validateGeometrySize","moveRectangle","totalMovement","incrementXAxis","moveFixedRect","changeRectangle","leftAxisIndex","rightAxisIndex","ii","validateStabilization","isMoveOk","initCenter","endDraw","changeRectangleToSize","flagForchangeFirstAxis","changeNormalStatus","DrawView","MINIMUM_ANGLE","validateMinimumAngle","vertextAngle","shift","console","warn","validateIntersection","firstLineFirstPoint","firstLineSecondPoint","j","secondLineFirstPoint","secondLineSecondPoint","info","active","normal","destroy","stopEvent","startEvent","changeWFDFillColor","Draw","convertRectanglePoints","callStartEvent","start","callEndEvent","end","currentPoint","destory","isFirst","State","_rootSVG","_obj","_currentPoint","FixedRatioState","RectangleState","LineState","validateAllAxis","getState","calibrateOptions","eventListener","unbindContextMenu","unbindESCkeyEvent","stopDrawing","startDraw","keyCode","isLast","CustomEditor","CustomEditorV2","_mouseDownTimer","_svgObj","parentSVGClickHandle","createParentSVGMouseDownHandle","createParentSVGMouseUpHandle","createParentSVGClickHandle","bindContextMenu","handleESCKey","_state","restartDrawing","unbindCancelEvent","isCheckingDragEvent","abortCheckingDragEvent","isRightMouseBtn","buttons","isUsingParent","endDragEvent","isNotCurrentTarget","currentTarget","startCheckingDragEvent","startDragEvent","bindCancelEvent","customEditor","SVGGeometry","svgTag","svgGeometry","polygonObject","data","log","innerHTML","mouseup","polygoncontextmenu","alert","selectTag","svgDrawingObj","customObj","addSvgDrawingObj","updatelog","startDrawing","svgPrivacyLog","logStr","jLen","selectShape","selectedObjIndex","removeDrawingGeometry","strokeColor","changeMinMaxSize","minElem","maxElem","changeRectangleToMinSize","changeRectangleToMaxSize","lineObject","kindSVGObj","Polygon","UWAPrivacyPolygon","UWAPrivacyRectangle","Line","FixedRatio","kindSVGDrawing","getElem","id","onload","uwaPrivacyPolygon","onchange","uwaPrivacyRectangle","colorFactory","red","blue","includeArea","excludeArea","getROIOptions","getLineOptions","wiseFDROI","wiseFDROIEditor","wiseFDOptions","roi","roiEditor","roiOptions","roiObj","selectROIObj","defaultROIPoints","customEditorV2","virtualLine","virtualLineEditor","virtualLineOptions","virtualLineObj","defaultVirtualLinePoints","selectLineObj","commonCalibration","commonCalibrationEditor","commonCalibrationOptions"],"mappings":"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","file":"src.387e73b9.js","sourceRoot":"../src","sourcesContent":["module.exports = {\n  getRadian: function (angle) {\n    return angle * (Math.PI / 180)\n  },\n  getSine: function (num) {\n    return Math.sin(this.getRadian(num))\n  },\n  getCosine: function (num) {\n    return Math.cos(this.getRadian(num))\n  },\n  pythagoreanTheorem: function (x1, y1, x2, y2) {\n    var xLength = Math.abs(x1 - x2)\n    var yLength = Math.abs(y1 - y2)\n    /**\n     * It is Pythagorean theorem.\n     * Math.pow(a, 2) + Math.pow(b, 2) = Math.pow(c, 2)\n     */\n    var lineLength = Math.sqrt(\n      Math.pow(xLength, 2) + Math.pow(yLength, 2)\n    )\n\n    return lineLength\n  },\n  getAngle: function (x1, y1, x2, y2) {\n    var xLength = x1 - x2\n    var yLength = y1 - y2\n    var angle = Math.atan2(xLength, yLength)\n\n    angle *= 180 / Math.PI\n    angle *= -1\n\n    return angle\n  },\n  getVertextAngle: function (a, b, c) {\n    var ab = [\n      b[0] - a[0],\n      b[1] - a[1]\n    ]\n    var cb = [\n      b[0] - c[0],\n      b[1] - c[1]\n    ]\n    var dot = (ab[0] * cb[0] + ab[1] * cb[1]) // dot product\n    var cross = (ab[0] * cb[1] - ab[1] * cb[0]) // cross product\n    var alpha = Math.atan2(cross, dot)\n    return alpha * 180 / Math.PI\n  },\n  checkLineIntersection: function (line1StartX, line1StartY, line1EndX, line1EndY, line2StartX, line2StartY, line2EndX, line2EndY) {\n    var returnVal = true\n    var denominator = ((line2EndY - line2StartY) * (line1EndX - line1StartX)) - ((line2EndX - line2StartX) * (line1EndY - line1StartY))\n\n    if (denominator === 0) {\n      return returnVal\n    }\n    var a = line1StartY - line2StartY\n    var b = line1StartX - line2StartX\n    var numerator1 = ((line2EndX - line2StartX) * a) - ((line2EndY - line2StartY) * b)\n    var numerator2 = ((line1EndX - line1StartX) * a) - ((line1EndY - line1StartY) * b)\n    a = numerator1 / denominator\n    b = numerator2 / denominator\n    /*\n    // it is worth noting that this should be the same as:\n    x = line2StartX + (b * (line2EndX - line2StartX));\n    y = line2StartX + (b * (line2EndY - line2StartY));\n    */\n    // if line1 is a segment and line2 is infinite, they intersect if:\n    // if line2 is a segment and line1 is infinite, they intersect if:\n    if ((a > 0 && a < 1) && (b > 0 && b < 1)) {\n      returnVal = false\n    }\n    return returnVal\n  },\n  getLineCenter: function (x1, y1, x2, y2) {\n    var longX = 0\n    var shortX = 0\n    var longY = 0\n    var shortY = 0\n    var centerX = 0\n    var centerY = 0\n\n    if (x1 > x2) {\n      longX = x1\n      shortX = x2\n    } else {\n      longX = x2\n      shortX = x1\n    }\n\n    if (y1 > y2) {\n      longY = y1\n      shortY = y2\n    } else {\n      longY = y2\n      shortY = y1\n    }\n\n    centerX = (longX - shortX) / 2 + shortX\n    centerY = (longY - shortY) / 2 + shortY\n\n    return [centerX, centerY]\n  }\n}\n","const each = iter => (list) => {\n  for (let i = 0, len = list.length; i < len; i++) {\n    iter(list[i], i, list, len)\n  }\n  return list\n}\nconst loop = iter => len => {\n  for (let i = 0; i < len; i++) {\n    iter(i, len)\n  }\n  return len\n}\nconst map = iter => list => {\n  const newList = []\n  each(item => {\n    newList.push(iter(item))\n  })(list)\n  return newList\n}\nconst filter = iter => list => {\n  const newList = []\n  each(item => {\n    if (iter(item)) {\n      newList.push(item)\n    }\n  })(list)\n  return newList\n}\nconst find = iter => list => {\n  for (let i = 0, len = list.length; i < len; i++) {\n    if (iter(list[i], i, list)) return list[i]\n  }\n  return null\n}\nconst findIndex = iter => list => {\n  for (let i = 0, len = list.length; i < len; i++) {\n    if (iter(list[i], i, list)) return i\n  }\n  return -1\n}\nconst reduce = (init, iter) => list => {\n  each((item) => {\n    init = iter(init, item)\n  })(list)\n  return init\n}\nconst pipe = (...fns) => res => {\n  return reduce(res, (res, fn) => fn(res))(fns)\n}\nconst divEq = (...fns) => val => { // Divided Equal\n  each((fn) => fn(val))(fns)\n  return val\n}\nconst isUndefined = (obj) => typeof obj === 'undefined'\nconst negate = v => !v\nconst clone = (obj) => {\n  if (typeof (obj) !== 'object') {\n    return obj\n  }\n\n  var copiedObj = obj.constructor()\n\n  for (var attr in obj) {\n    if (obj.hasOwnProperty(attr)) {\n      copiedObj[attr] = clone(obj[attr])\n    }\n  }\n\n  return copiedObj\n}\nconst merge = (defaultOptions, _options) => {\n  var newOptions = clone(_options)\n\n  for (var keyName in defaultOptions) {\n    if (isUndefined(newOptions[keyName])) {\n      newOptions[keyName] = defaultOptions[keyName]\n    }\n  }\n\n  return newOptions\n}\n\nmodule.exports = {\n  each,\n  loop,\n  map,\n  filter,\n  find,\n  findIndex,\n  reduce,\n  pipe,\n  divEq,\n  isUndefined,\n  negate,\n  clone,\n  merge\n}\n","/**\n * DOM 조작 객체\n */\nconst _ = require('./fp')\n\nmodule.exports = {\n  setAttr (attrName, val, ns) {\n    !!ns && (ns = null)\n    return (element) => {\n      element.setAttributeNS(ns, attrName, val)\n      return element\n    }\n  },\n  getAttr: (attrName) => (element) => element.getAttributeNS(null, attrName),\n  setHrefAttr: function (val) {\n    return this.setAttr('href', val, 'http://www.w3.org/1999/xlink')\n  },\n  removeChild: function (parentElement, childrenElement) {\n    parentElement.removeChild(childrenElement)\n  },\n  appendChild: function (parentElement, childrenElement) {\n    parentElement.appendChild(childrenElement)\n  },\n  style (name, value) {\n    return elem => {\n      elem.style[name] = value\n      return elem\n    }\n  },\n  createSVGElement: function (name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name)\n  },\n  createLine: function (strokeWidth) {\n    return _.pipe(\n      this.createSVGElement,\n      _.divEq(\n        this.setAttr('stroke-width', strokeWidth),\n        this.setAttr('draggable', false)\n      )\n    )('line')\n  },\n  createCircle: function (circleRadius) {\n    return _.pipe(\n      this.createSVGElement,\n      _.divEq(\n        this.setAttr('r', circleRadius),\n        this.setAttr('draggable', false)\n      )\n    )('circle')\n  },\n  createRect: function (width, height) {\n    return _.pipe(\n      this.createSVGElement,\n      _.divEq(\n        this.setAttr('width', width),\n        this.setAttr('height', height),\n        this.setAttr('draggable', false)\n      )\n    )('rect')\n  },\n  createText: function (txt) {\n    return _.pipe(\n      this.createSVGElement,\n      this.setAttr('draggable', false),\n      (text) => {\n        text.textContent = txt\n        return text\n      }\n    )('text')\n  },\n  createGroup: function () {\n    return this.createSVGElement('g')\n  },\n  createImage: function (imagePath, width, height) {\n    var imageContainner = this.createGroup()\n    var image = _.pipe(\n      this.createSVGElement,\n      _.divEq(\n        this.setHrefAttr(imagePath),\n        this.setAttr('width', width),\n        this.setAttr('height', height),\n        this.setAttr('draggable', false)\n      )\n    )('image')\n\n    imageContainner.appendChild(image)\n\n    return [image, imageContainner]\n  },\n  createPolygon: function () {\n    return _.pipe(\n      this.createSVGElement,\n      this.setAttr('draggable', false)\n    )('polygon')\n  },\n  createUse: function () {\n    return this.createSVGElement('use')\n  },\n  getBodyScroll: function () {\n    var scroll = false\n    var body = document.body\n    var html = document.documentElement\n\n    if (body.scrollTop !== 0 || body.scrollLeft !== 0) {\n      // For Chrome, Safari, Opera\n      scroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      }\n    } else if (html.scrollTop !== 0 || html.scrollLeft !== 0) {\n      // Firefox, IE\n      scroll = {\n        left: html.scrollLeft,\n        top: html.scrollTop\n      }\n    }\n\n    return scroll\n  },\n  getSVGOffset (target) {\n    return () => {\n      const {\n        top, left, width, height\n      } = target.getBoundingClientRect()\n\n      return {\n        top, left, width, height\n      }\n    }\n  },\n  getPageAxis (element, event) {\n    return _.pipe(\n      this.getSVGOffset(element),\n      ({left, top}) => {\n        return [\n          event.pageX - left,\n          event.pageY - top\n        ]\n      },\n      ([xAxis, yAxis]) => {\n        const scroll = this.getBodyScroll()\n\n        if (scroll) {\n          xAxis -= scroll.left\n          yAxis -= scroll.top\n        }\n\n        return [xAxis, yAxis]\n      }\n    )()\n  },\n  getSize (element) {\n    const width = _.pipe(\n      this.getAttr('width'),\n      (width) => {\n        return width || element.clientWidth\n      },\n      parseInt\n    )(element)\n\n    const height = _.pipe(\n      this.getAttr('height'),\n      (height) => {\n        return height || element.clientHeight\n      },\n      parseInt\n    )(element)\n\n    return { width, height }\n  }\n}\n","const ElementController = require('../../common/ElementController')\nconst _ = require('../../common/fp')\n\nfunction DrawModel (draw, rootSVG) {\n  var self = this\n  this.points = _.clone(draw.options.points)\n  this.isAllSelected = false\n  this.setIsAllSelectedState = function (state) {\n    this.isAllSelected = state\n  }\n  this.modifyPoints = function (points) {\n    this.setPoints(points)\n    // Notify\n    draw.changeAxis()\n  }\n  this.getRectangleIndex = function () {\n    var indexList = []\n    var isFlip = draw.options.flip\n    var isMirror = draw.options.mirror\n    var isMirrorAndFlip = isFlip && isMirror\n\n    indexList[0] = isMirrorAndFlip ? 2 : (isFlip ? 1 : (isMirror ? 3 : 0))\n    indexList[1] = isMirrorAndFlip ? 3 : (isFlip ? 0 : (isMirror ? 2 : 1))\n    indexList[2] = isMirrorAndFlip ? 0 : (isFlip ? 3 : (isMirror ? 1 : 2))\n    indexList[3] = isMirrorAndFlip ? 1 : (isFlip ? 2 : (isMirror ? 0 : 3))\n\n    return indexList\n  }\n  this.alignCenter = function () {\n    var parentSvgSize = ElementController.getSize(rootSVG)\n    var firstPoint = self.getAxis(0)\n    var thirdPoint = self.getAxis(2)\n    var geometryWidth = thirdPoint[0] - firstPoint[0]\n    var geometryHeight = thirdPoint[1] - firstPoint[1]\n\n    var changedX1 = Math.round(parentSvgSize.width / 2 - geometryWidth / 2)\n    var changedY1 = Math.round(parentSvgSize.height / 2 - geometryHeight / 2)\n    var changedX3 = changedX1 + geometryWidth\n    var changedY3 = changedY1 + geometryHeight\n\n    self.setAxis(0, changedX1, changedY1)\n    self.setAxis(1, changedX1, changedY3)\n    self.setAxis(2, changedX3, changedY3)\n    self.setAxis(3, changedX3, changedY1)\n\n    draw.changeAxis()\n  }\n  this.changeMinSizeOption = function (newMinSize) {\n    draw.options.minSize = _.clone(newMinSize)\n  }\n  this.changeMaxSizeOption = function (newMaxSize) {\n    draw.options.maxSize = _.clone(newMaxSize)\n  }\n  this.addAxis = function (xAxis, yAxis, appendIndex) {\n    var lastPoint = null\n    var newPoint = null\n\n    var offset = ElementController.getSVGOffset(rootSVG)()\n\n    var pointsLength = this.getPointsLength()\n\n    if (_.isUndefined(xAxis) && _.isUndefined(yAxis)) {\n      lastPoint = this.getAxis(pointsLength - 1)\n      newPoint = [lastPoint[0], lastPoint[1]]\n      newPoint[0] += draw.options.circleRadius\n      newPoint[1] += draw.options.circleRadius\n\n      if (newPoint[0] < 0) {\n        newPoint[0] = 0\n      }\n      if (newPoint[1] < 0) {\n        newPoint[1] = 0\n      }\n      if (newPoint[0] > offset.width) {\n        newPoint[0] = offset.width\n      }\n      if (newPoint[1] > offset.height) {\n        newPoint[1] = offset.height\n      }\n    } else {\n      newPoint = [xAxis, yAxis]\n    }\n\n    if (_.negate(_.isUndefined(appendIndex))) {\n      this.appendAxis(appendIndex, newPoint[0], newPoint[1])\n    } else {\n      this.setAxis(pointsLength, newPoint[0], newPoint[1])\n    }\n  }\n  this.validateAxis = function (xAxis, yAxis) {\n    var offset = ElementController.getSVGOffset(rootSVG)()\n    var returnVal = true\n\n    if (\n      xAxis < 0 ||\n      yAxis < 0 ||\n      xAxis > offset.width ||\n      yAxis > offset.height\n    ) {\n      returnVal = false\n    }\n\n    return returnVal\n  }\n  this.validateAllPoint = function (movedXAxis, movedYAxis) {\n    return !_.find(point => {\n      return !this.validateAxis(point[0] + movedXAxis, point[1] + movedYAxis)\n    })(this.getPoints())\n  }\n}\nDrawModel.prototype = {\n  setPoints: function (points) {\n    this.points = _.clone(points)\n  },\n  getPoints: function () {\n    return _.clone(this.points)\n  },\n  getPointsLength: function () {\n    return this.points.length\n  },\n  setAxis: function (index, x, y) {\n    this.points[index] = [x, y]\n  },\n  appendAxis: function (index, x, y) {\n    this.points.splice(index, 0, [x, y])\n  },\n  getAxis: function (index) {\n    return this.points[index]\n  }\n}\n\nmodule.exports = DrawModel","'use strict'\n\n/**\n * Group 태그 Helper\n */\nconst ElementController = require('../../common/ElementController')\nconst _ = require('../../common/fp')\n\nmodule.exports = function GroupHelper (draw, rootSVG) { // eslint-disable-line\n  var groupTag = null\n  var notUseMoveTopLayer = draw.options.notUseMoveTopLayer\n\n  this.add = function () {\n    groupTag = ElementController.createGroup()\n  }\n  this.remove = function () {\n    ElementController.removeChild(rootSVG, groupTag)\n  }\n  this.moveTopLayer = function () {\n    if (notUseMoveTopLayer === true) {\n      return\n    }\n    var lastChild = rootSVG.lastChild\n\n    if (lastChild !== groupTag) {\n      rootSVG.insertBefore(\n        groupTag,\n        lastChild.nextSibling\n      )\n    }\n  }\n  this.append = function () {\n    ElementController.appendChild(rootSVG, groupTag)\n  }\n  this.appendChild = function (child) {\n    ElementController.appendChild(groupTag, child)\n  }\n  this.removeChild = function (child) {\n    ElementController.removeChild(groupTag, child)\n  }\n  this.insertBefore = function () {\n    groupTag.insertBefore.apply(groupTag, arguments)\n  }\n}\n","/**\n * Wise Face Detection 헬퍼\n */\nconst ElementController = require('../../common/ElementController')\nconst _ = require('../../common/fp')\n\nmodule.exports = function WiseFaceDetectionHelper (draw) { // eslint-disable-line\n  var wiseFaceDetectionCircle = null\n  var wiseFaceDetection = draw.options.wiseFaceDetection\n\n  function changeFillColor (fillColor) {\n    ElementController.style('color', fillColor)(wiseFaceDetectionCircle)\n  }\n\n  function add () {\n    wiseFaceDetectionCircle = document.createElement('span')\n    wiseFaceDetectionCircle.className = 'tui tui-wn5-smile'\n    ElementController.style('position', 'absolute')(wiseFaceDetectionCircle)\n    changeFillColor(wiseFaceDetection.fillColor)\n  }\n\n  function append () {\n    try {\n      document.getElementById('sketchbook').appendChild(wiseFaceDetectionCircle)\n    } catch (e) {\n\n    }\n  }\n\n  function remove () {\n    try {\n      document.getElementById('sketchbook').removeChild(wiseFaceDetectionCircle)\n    } catch (e) {\n\n    }\n  }\n\n  function updateCircle (xAxis, yAxis, height) {\n    var radius = height / 100\n\n    if ('heightRatio' in wiseFaceDetection) {\n      radius *= wiseFaceDetection.heightRatio\n    } else if ('widthRatio' in wiseFaceDetection) {\n      radius *= wiseFaceDetection.widthRatio\n    }\n\n    _.divEq(\n      ElementController.style('top', (yAxis - radius) + 'px'),\n      ElementController.style('left', (xAxis - radius) + 'px'),\n      ElementController.style('fontSize', (radius * 2) + 'px')\n    )(wiseFaceDetectionCircle)\n  }\n\n  if (wiseFaceDetection !== false) {\n    _.isUndefined(wiseFaceDetection.fillColor) && (wiseFaceDetection.fillColor = '#dd2200')\n    _.isUndefined(wiseFaceDetection.heightRatio) && (wiseFaceDetection.heightRatio = 2.2)\n    _.isUndefined(wiseFaceDetection.widthRatio) && (wiseFaceDetection.widthRatio = false)\n\n    this.updateCircle = updateCircle\n    this.append = append\n    this.add = add\n    this.remove = remove\n    this.changeFillColor = changeFillColor\n  }\n}","/**\n * 포인트 추가/삭제 아이콘\n * @example\n var iconHelper = new IconHelper();\n  iconHelper.createIcon('+');\n  iconHelper.changePosition(10, 10);\n  iconHelper.show();\n\n  iconHelper.hide();\n  */\nconst ElementController = require('../../common/ElementController')\nconst _ = require('../../common/fp')\n\nmodule.exports = function IconHelper (groupHelper) { // eslint-disable-line\n  var PLUS_IMAGE = require('../../images/plus.svg')\n  var MINUS_IMAGE = require('../../images/minus.svg')\n\n  var iconText = null\n  var icon = null\n  var width = 16\n  var self = this\n  var clickEventHandler = null\n  var leaveEventHandler = null\n  var contextMenuEventHandler = null\n\n  /**\n   * Plus, Minus 아이콘 생성\n   * appendDom 시 사용\n   *\n   * @param {Boolean} iconType true: Plus icon, false: Minus icon\n   */\n  function createIcon (iconType) {\n    var src = iconType ? PLUS_IMAGE : MINUS_IMAGE\n\n    if (icon === null) {\n      icon = ElementController.createRect(width, width)\n      iconText = ElementController.createImage(src, width, width)[0]\n\n      ElementController.setAttr('fill', '#000000')(icon)\n\n      _.each(ElementController.style('opacity', 0))([icon, iconText])\n\n      if (clickEventHandler !== null) {\n\n        _.each(ElementController.style('cursor', 'pointer'))([icon, iconText])\n\n        icon.addEventListener('click', function (event) {\n          event.preventDefault()\n          event.stopPropagation()\n          clickEventHandler(event)\n        })\n        iconText.addEventListener('click', function (event) {\n          event.preventDefault()\n          event.stopPropagation()\n          if (clickEventHandler !== null) {\n            clickEventHandler(event)\n          }\n        })\n\n        iconText.addEventListener('mouseleave', function (event) {\n          event.preventDefault()\n          event.stopPropagation()\n          if (leaveEventHandler !== null) {\n            leaveEventHandler(event)\n          }\n        })\n\n        iconText.addEventListener('contextmenu', function (event) {\n          event.preventDefault()\n          event.stopPropagation()\n          if (contextMenuEventHandler !== null) {\n            contextMenuEventHandler(event)\n          }\n        })\n      }\n    }\n\n    groupHelper.appendChild(icon)\n    groupHelper.appendChild(iconText)\n  };\n  function changePosition (x, y) {\n    _.divEq(\n      ElementController.setAttr('x', x - width / 2),\n      ElementController.setAttr('y', y - width / 2)\n    )(icon)\n    _.divEq(\n      ElementController.setAttr('x', x - width / 2),\n      ElementController.setAttr('y', y - width / 2),\n    )(iconText)\n  };\n  function show () {\n    _.each(ElementController.style('opacity', 1))([icon, iconText])\n  };\n  function hide () {\n    if (icon === null) {\n      return\n    }\n\n    if (icon.style.opacity === '1') {\n      _.each(ElementController.style('opacity', 0))([icon, iconText])\n      self.changePosition(0, 0)\n    }\n  };\n  function onClick (callBack) {\n    clickEventHandler = callBack\n  };\n  function onLeave (callBack) {\n    leaveEventHandler = callBack\n  };\n  function onContextMenu (callBack) {\n    contextMenuEventHandler = callBack\n  };\n\n  this.createIcon = createIcon\n  this.changePosition = changePosition\n  this.show = show\n  this.hide = hide\n  this.onClick = onClick\n  this.onLeave = onLeave\n  this.onContextMenu = onContextMenu\n}\n","exports.MOVED_ATTR = 'is-moved'\nexports.ICON_HIDDEN_DELAY = 2000\nexports.CLICK_DETECTION_TIME = 100\n","/**\n * Line 태그 Helper\n */\nconst IconHelper = require('./icon-helper')\nconst FunnyMath = require('../../common/FunnyMath')\nconst ElementController = require('../../common/ElementController')\nconst _ = require('../../common/fp')\nconst {ICON_HIDDEN_DELAY} = require('../../modules/constants')\n\nmodule.exports = function LineHelper (draw, rootSVG) { // eslint-disable-line\n  'use strict'\n  var parentSvgMovedAttr = 'is-moved'\n  var lines = []\n  var tempArrForDragChecking = []\n  var iconHelper = new IconHelper(draw.groupHelper)\n  var hideOpacity = '0.5'\n  var hoveredLineIndex = null\n  var iconHelperTimer = null\n\n  const setDefaultColor = ElementController.setAttr('stroke', draw.options.lineColor)\n  const setSelectColor = setDefaultColor\n\n  iconHelper.onClick(function (event) {\n    backupPoints() // addPointInLine에서 드래그 체크를 하기 때문에 추가\n    addPointInLine.call({\n      lineIndex: hoveredLineIndex\n    }, event)\n    iconHelper.hide()\n  })\n\n  iconHelper.onLeave(iconHelper.hide)\n\n  function backupPoints () {\n    tempArrForDragChecking = draw.drawModel.getPoints()\n  }\n\n  function isPointsChanged () {\n    var currentPoints = draw.drawModel.getPoints()\n    if (tempArrForDragChecking.length !== currentPoints.length) {\n      return false\n    }\n\n    return _.pipe(\n      _.findIndex((item, index) => {\n        return item[0] !== currentPoints[index][0] || item[1] !== currentPoints[index][1]\n      }),\n      (index) => {\n        tempArrForDragChecking = []\n        return index === -1\n      }\n    )(tempArrForDragChecking)\n  }\n\n  function addLine (useLineEvent, useLineCursor) {\n    var newLine = ElementController.createLine(draw.options.lineStrokeWidth)\n    newLine.lineIndex = lines.length\n    if (draw.options.useEvent === true && useLineEvent !== false) {\n      bindEvent(newLine)\n    }\n    setDefaultColor(newLine)\n    if (useLineCursor !== false) {\n      draw.drawView.setCursor(newLine)\n    }\n    lines.push(newLine)\n  }\n\n  function hide (lineElement) {\n    if (draw.options.fill === true) {\n      ElementController.style('display', 'none')(lineElement)\n    } else {\n      ElementController.style('opacity', hideOpacity)(lineElement)\n    }\n  }\n\n  function show (lineElement) {\n    if (draw.options.fill === true) {\n      ElementController.style('display', 'inline')(lineElement)\n    } else {\n      ElementController.style('opacity', 1)(lineElement)\n    }\n  }\n\n  function showPointIcon (event) {\n    clearTimeout(iconHelperTimer)\n    if (\n      ElementController.getAttr(parentSvgMovedAttr)(rootSVG) === 'true' || // 폴리건 드래그를 하고 있을 때\n      draw.selectedLineIndex !== null || // 드래그를 하고 있을 때\n      this.style.opacity === hideOpacity || // 선택된 오브젝트가 아닐 때\n      draw.drawModel.getPointsLength() >= draw.options.maxPoint) { // 최대 포인트일 때\n      return\n    }\n    var pageAxis = ElementController.getPageAxis(rootSVG, event)\n    var xAxis = pageAxis[0]\n    var yAxis = pageAxis[1]\n    var leftAxis = null\n    var rightAxis = null\n\n    if (draw.options.minLineLength !== false) {\n      leftAxis = draw.drawModel.getAxis(this.lineIndex)\n      rightAxis = draw.drawModel.getAxis(this.lineIndex === lines.length - 1 ? 0 : this.lineIndex + 1)\n\n      if (\n        FunnyMath.pythagoreanTheorem(xAxis, yAxis, leftAxis[0], leftAxis[1]) < draw.options.minLineLength ||\n        FunnyMath.pythagoreanTheorem(xAxis, yAxis, rightAxis[0], rightAxis[1]) < draw.options.minLineLength\n      ) {\n        return\n      }\n    }\n\n    iconHelper.changePosition(pageAxis[0], pageAxis[1])\n    hoveredLineIndex = this.lineIndex\n    iconHelper.show()\n\n    iconHelperTimer = setTimeout(function () {\n      iconHelper.hide()\n    }, ICON_HIDDEN_DELAY)\n  }\n\n  function mouseUpHandler () {\n    setTimeout(function () {\n      draw.callCustomEvent('mouseup', draw.getData())\n    })\n  }\n\n  function contextMenuHandler (event) {\n    draw.callCustomEvent('linecontextmenu', event)\n  }\n\n  function bindEvent (lineElement) {\n    lineElement.addEventListener('contextmenu', contextMenuHandler)\n\n    if (draw.options.useOnlyRectangle === false && draw.options.fixedRatio === false) {\n      // Add Point\n      lineElement.addEventListener('mousemove', showPointIcon)\n      if (draw.options.fill === false) {\n        iconHelper.onContextMenu(contextMenuHandler)\n\n        lineElement.addEventListener('mousedown', selectLine)\n        lineElement.addEventListener('mouseup', mouseUpHandler)\n        lineElement.addEventListener('mouseleave', function () {\n          if (this.isSelected === true) {\n            mouseUpHandler()\n          }\n        })\n      }\n    }\n  }\n\n  function addPointInLine (event) {\n    var pageAxis = null\n    var xAxis = null\n    var yAxis = null\n\n    if (isPointsChanged() === false) {\n      // console.log(\"isPointsChanged() === false return\");\n      return\n    }\n\n    if (draw.drawModel.getPointsLength() >= draw.options.maxPoint) {\n      // console.log(\"pointsLength >= draw.options.maxPoint return\");\n      return\n    }\n\n    pageAxis = ElementController.getPageAxis(rootSVG, event)\n    xAxis = pageAxis[0]\n    yAxis = pageAxis[1]\n\n    draw.addPoint(xAxis, yAxis, this.lineIndex + 1)\n\n    mouseUpHandler()\n  }\n\n  function appendAll () {\n    _.each(line => draw.groupHelper.appendChild(line))(lines)\n\n    iconHelper.createIcon(true)\n  }\n\n  function selectLine () {\n    setSelectColor(this)\n    this.isSelected = true\n    draw.groupHelper.moveTopLayer()\n    backupPoints()\n  }\n\n  function appendAtLast () {\n    var lineLength = lines.length\n    var newLineElement = lines[lineLength - 1]\n    var nextElementSibling = lines[lineLength - 2].nextElementSibling\n\n    draw.groupHelper.insertBefore(\n      newLineElement,\n      nextElementSibling\n    )\n  }\n\n  function removeAll () {\n    _.each(line => draw.groupHelper.removeChild(line))(lines)\n  }\n\n  function getLines () {\n    return lines\n  }\n\n  function setLines (_lines) {\n    lines = _lines\n  }\n\n  this.addLine = addLine\n  this.setDefaultColor = setDefaultColor\n  this.setSelectColor = setSelectColor\n  this.appendAll = appendAll\n  this.appendAtLast = appendAtLast\n  this.bindEvent = bindEvent\n  this.removeAll = removeAll\n  this.hide = hide\n  this.show = show\n  this.getLines = getLines\n  this.setLines = setLines\n}\n","/**\n * Polygon과 Line 꼭지점 Helper\n */\nconst IconHelper = require('./icon-helper')\nconst ElementController = require('../../common/ElementController')\nconst _ = require('../../common/fp')\nconst {ICON_HIDDEN_DELAY} = require('../../modules/constants')\n\nmodule.exports = function CircleHelper (draw, rootSVG) { // eslint-disable-line\n  var isLeave = false\n  var iconHelper = new IconHelper(draw.groupHelper)\n  var iconHelperTimer = null\n  var hoveredPointIndex = null\n  var circles = []\n\n  const setDefaultColor = ElementController.setAttr('fill', draw.options.pointColor)\n  const setSelectColor = setDefaultColor\n\n  iconHelper.onClick(function (event) {\n    iconHelper.hide()\n    removeCircle.call({\n      circleIndex: hoveredPointIndex\n    }, event)\n    update()\n  })\n\n  function addCircle (radius, useCircleEvent, useCircleCursor) {\n    var newCircle = ElementController.createRect(radius * 2, radius * 2)\n    if (\n      draw.options.useResizeRectangle === true ||\n      (draw.options.useEvent === true && useCircleEvent !== false)\n    ) {\n      bindEvent(newCircle)\n    }\n    setDefaultColor(newCircle)\n    if (useCircleCursor !== false) {\n      draw.drawView.setCursor(newCircle)\n    }\n\n    newCircle.circleIndex = circles.length\n    circles.push(newCircle)\n  }\n\n  function bindEvent (circleElement) {\n    circleElement.onmousedown = selectCircle\n    circleElement.onmouseup = function () {\n      isLeave = false\n      if (draw.options.customDraw === true) {\n        return\n      }\n      update()\n    }\n    circleElement.addEventListener('mouseleave', function () {\n      isLeave = true\n    })\n\n    if (draw.options.fixedRatio !== true) {\n      circleElement.customContextmenu = removeCircle\n      circleElement.addEventListener('contextmenu', function (event) {\n        event.preventDefault()\n      })\n      circleElement.addEventListener('mouseover', showDeleteIcon)\n      circleElement.addEventListener('mouseout', hideDeleteIconWithDelay)\n      circleElement.addEventListener('mousedown', hideDeleteIcon)\n    }\n  }\n\n  function showDeleteIcon () {\n    var pointsLength = draw.drawModel.getPointsLength()\n\n    if (\n      draw.selectedCircleIndex !== null ||\n      pointsLength <= draw.options.minPoint) { // 최대 포인트일 때\n      return\n    }\n\n    hoveredPointIndex = this.circleIndex\n\n    var xAxis = parseInt(ElementController.getAttr('x')(this))\n    var yAxis = parseInt(ElementController.getAttr('y')(this))\n    var width = parseInt(ElementController.getAttr('width')(this))\n    var height = parseInt(ElementController.getAttr('height')(this))\n\n    if (xAxis - width * 2 < 0) {\n      xAxis += width * 2\n    } else {\n      xAxis -= width\n    }\n\n    if (yAxis - width * 2 < 0) {\n      yAxis += height * 2\n    } else {\n      yAxis -= height\n    }\n\n    clearTimeout(iconHelperTimer)\n\n    iconHelper.changePosition(xAxis, yAxis)\n    iconHelper.show()\n  }\n\n  function hideDeleteIcon () {\n    iconHelper.hide()\n  }\n\n  function hideDeleteIconWithDelay () {\n    clearTimeout(iconHelperTimer)\n    iconHelperTimer = setTimeout(function () {\n      iconHelper.hide()\n    }, ICON_HIDDEN_DELAY)\n  }\n\n  function update () {\n    setTimeout(function () {\n      draw.callCustomEvent('mouseup', draw.getData())\n    })\n  }\n\n  function isMouseLeave () {\n    return isLeave\n  }\n\n  function removeCircle (event) {\n    var self = this\n    var points = draw.drawModel.getPoints()\n    var pointsLength = points.length\n\n    event.preventDefault()\n\n    if (pointsLength <= draw.options.minPoint) {\n      return\n    }\n\n    if (this.nodeName === 'text') {\n      self = circles[pointsLength - 1]\n    }\n\n    points.splice(self.circleIndex, 1)\n    draw.drawModel.setPoints(points)\n    draw.reset()\n    draw.init()\n    draw.drawView.changeActiveStatus()\n  }\n\n  function selectCircle () {\n    isLeave = false\n    var self = this\n    var pointsLength = draw.drawModel.getPointsLength()\n    if (this.nodeName === 'text') {\n      self = circles[pointsLength - 1]\n    }\n\n    setSelectColor(self)\n    self.isSelected = true\n    draw.drawView.setCursor(rootSVG)\n  }\n\n  function appendAll () {\n    _.each(circle => draw.groupHelper.appendChild(circle))(circles)\n    iconHelper.createIcon(false)\n  }\n\n  function changeRadius (index, radius) {\n    _.divEq(\n      ElementController.setAttr('width', radius * 2),\n      ElementController.setAttr('height', radius * 2)\n    )(circles[index])\n  }\n\n  function appendAtLast () {\n    var circleLength = circles.length\n    var newCircleElement = circles[circleLength - 1]\n    var nextElementSibling = circles[circleLength - 2].nextElementSibling\n\n    if (draw.options.textInCircle === null || nextElementSibling === null) {\n      draw.groupHelper.appendChild(newCircleElement)\n    } else {\n      draw.groupHelper.insertBefore(\n        newCircleElement,\n        nextElementSibling\n      )\n    }\n  }\n\n  function removeAll () {\n    _.each(circle => {\n      draw.groupHelper.removeChild(circle)\n    })(circles)\n  }\n\n  function getCircles () {\n    return circles\n  }\n\n  function setCircles (_circles) {\n    circles = _circles\n  }\n\n  this.addCircle = addCircle\n  this.bindEvent = bindEvent\n  this.selectCircle = selectCircle\n  this.setDefaultColor = setDefaultColor\n  this.setSelectColor = setSelectColor\n  this.appendAll = appendAll\n  this.changeRadius = changeRadius\n  this.appendAtLast = appendAtLast\n  this.removeAll = removeAll\n  this.update = update\n  this.isMouseLeave = isMouseLeave\n  this.hide = ElementController.style('display', 'none')\n  this.show = ElementController.style('display', 'inline')\n  this.getCircles = getCircles\n  this.setCircles = setCircles\n}\n","/**\n * Text 태그 헬퍼\n */\nconst ElementController = require('../../common/ElementController')\nconst _ = require('../../common/fp')\n\nmodule.exports = function TextTagHelper (draw, rootSVG) { // eslint-disable-line\n  var textTag = null\n  function addText () {\n    if (draw.options.textInCircle !== null) {\n      textTag = _.pipe(\n        ElementController.createText,\n        _.divEq(\n          ElementController.style('fontSize', '12px'),\n          draw.drawView.setCursor\n        )\n      )(draw.options.textInCircle)\n      bindEvent()\n    }\n  }\n\n  function bindEvent () {\n    var circles = draw.circleHelper.getCircles()\n    var pointsLength = draw.drawModel.getPointsLength()\n    var lastCircle = circles[pointsLength - 1]\n\n    textTag.onmousedown = lastCircle.onmousedown\n    textTag.onmouseup = lastCircle.onmouseup\n    if (draw.options.fixedRatio !== true) {\n      textTag.addEventListener('contextmenu', lastCircle.customContextmenu)\n    }\n  }\n\n  function append () {\n    if (draw.options.textInCircle !== null) {\n      draw.groupHelper.appendChild(textTag)\n    }\n  }\n\n  function remove () {\n    if (draw.options.textInCircle !== null) {\n      draw.groupHelper.removeChild(textTag)\n    }\n  }\n\n  function show () {\n    if (draw.options.textInCircle !== null) {\n      ElementController.style('display', 'inline')(textTag)\n    }\n  }\n\n  function hide () {\n    if (draw.options.textInCircle !== null) {\n      ElementController.style('display', 'none')(textTag)\n    }\n  }\n\n  function getTextTag () {\n    return textTag\n  }\n\n  function setTextTag (_textTag) {\n    textTag = _textTag\n  }\n\n  this.addText = addText\n  this.append = append\n  this.remove = remove\n  this.show = show\n  this.hide = hide\n  this.getTextTag = getTextTag\n  this.setTextTag = setTextTag\n}\n","/**\n * Polygon 태그 헬퍼\n */\nconst ElementController = require('../../common/ElementController')\nconst _ = require('../../common/fp')\n\nmodule.exports = function PolygonHelper (draw, rootSVG) { // eslint-disable-line\n  'use strict'\n\n  var polygon = null\n  function addPolygon () {\n    polygon = ElementController.createPolygon()\n    if (draw.options.useEvent === true) {\n      bindEvent(polygon)\n    }\n    draw.drawView.setCursor(polygon)\n  }\n\n  function append () {\n    if (draw.options.fill === true) {\n      draw.groupHelper.appendChild(polygon)\n    }\n  }\n\n  function selectPolygon () {\n    setSelectColor()\n    polygon.isSelected = true\n    draw.groupHelper.moveTopLayer()\n  }\n\n  function bindEvent () {\n    polygon.onmousedown = selectPolygon\n    /*\n    @date: 2016-09-19\n    oncontextmenu로 하면 IE에서 정상 동작을 하지 않기 때문에 삭제됨.\n    polygon.oncontextmenu = function(event){\n      draw.callCustomEvent(\"polygoncontextmenu\", event);\n    };\n    */\n    polygon.onmouseup = function () {\n      if (draw.options.customDraw === true) {\n        return\n      }\n      update()\n    }\n    polygon.addEventListener('mouseleave', function () {\n      if (polygon.isSelected === true) {\n        update()\n      }\n    })\n    polygon.addEventListener('contextmenu', function (event) {\n      draw.callCustomEvent('polygoncontextmenu', event)\n    })\n  }\n\n  function remove () {\n    if (draw.options.fill === true) {\n      draw.groupHelper.removeChild(polygon)\n    }\n  }\n\n  function setDefaultColor () {\n    if (draw.options.fill === true) {\n      _.divEq(\n        ElementController.style('fill', draw.options.fillColor),\n        ElementController.style('opacity', draw.options.fillOpacity)\n      )(polygon)\n    }\n  }\n\n  function setSelectColor () {\n    if (polygon === null) {\n      return\n    }\n\n    var opacity = draw.options.fillOpacity\n    if (opacity > 0) {\n      opacity = opacity + opacity * 0.5\n    }\n    ElementController.style('opacity', opacity)\n  }\n\n  function update () {\n    setTimeout(function () {\n      draw.callCustomEvent('mouseup', draw.getData())\n    })\n  }\n\n  function getPolygon () {\n    return polygon\n  }\n\n  function setPolygon (_polygon) {\n    polygon = _polygon\n  }\n\n  this.addPolygon = addPolygon\n  this.append = append\n  this.bindEvent = bindEvent\n  this.selectPolygon = selectPolygon\n  this.remove = remove\n  this.setDefaultColor = setDefaultColor\n  this.setSelectColor = setSelectColor\n  this.getPolygon = getPolygon\n  this.setPolygon = setPolygon\n}\n","/**\n * 화살표 이미지 Helper\n */\nconst ElementController = require('../../common/ElementController')\nconst FunnyMath = require('../../common/FunnyMath')\nconst _ = require('../../common/fp')\n\nmodule.exports = function ArrowImageHelper (draw, rootSVG) { // eslint-disable-line\n  'use strict'\n\n  var IMAGE_WIDTH = 25\n  var IMAGE_HEIGHT = 33\n\n  var NORMAL_IMAGE = require('../../images/btn_in-out_normal.png')\n  var PRESS_IMAGE = require('../../images/btn_in-out_press.png')\n\n  var NORMAL_ALL_IMAGE = require('../../images/btn_all_normal.png')\n  var PRESS_ALL_IMAGE = require('../../images/btn_all_press.png')\n\n  var arrowImageContainner = null\n  var arrowImage = null\n  var halfArrowWidth = IMAGE_WIDTH / 2\n  var halfArrowHeight = IMAGE_HEIGHT / 2\n  var arrowTextContainner = null\n  var arrowText = []\n\n  var arrowQueue = ['L', 'R', 'LR']\n  var arrowQueueLength = arrowQueue.length\n  var arrowScope = []\n  var currentArrow = null\n\n  // set Scope of Arrow\n  // @ArrowImageView\n  function setArrowScope () {\n    var startIndex = _.findIndex(arrow => arrow === draw.options.arrow.min)(arrowQueue)\n    var endIndex = _.findIndex(arrow => arrow === draw.options.arrow.max)(arrowQueue)\n\n    for (var i = startIndex; i <= endIndex; i++) {\n      arrowScope.push(arrowQueue[i])\n    }\n  }\n\n  // @ArrowImageView\n  function getNextArrow (arrow) {\n    var nextIndex = _.findIndex((item, index, list) => {\n      return item === arrow && list.length - 1 !== index\n    })(arrowScope) + 1\n\n    return arrowQueue[nextIndex]\n  }\n\n  // @ArrowImageView\n  function addArrowGuideText () {\n    if (draw.options.arrow === null) {\n      return\n    }\n    if (_.negate(_.isUndefined(draw.options.arrow.text)) && draw.options.arrow.text === true) {\n      arrowTextContainner = ElementController.createGroup()\n      arrowText[0] = ElementController.createText('A')\n      arrowText[1] = ElementController.createText('B')\n      ElementController.appendChild(arrowTextContainner, arrowText[0])\n      ElementController.appendChild(arrowTextContainner, arrowText[1])\n    }\n  }\n\n  function show () {\n    _.each(ElementController.style('display', 'inline'))([\n      arrowImage, arrowTextContainner\n    ])\n  }\n\n  function hide () {\n    _.each(ElementController.style('display', 'none'))([\n      arrowImage, arrowTextContainner\n    ])\n  }\n\n  function changeArrowGuideText (xAxis, yAxis, angle) {\n    var radius = halfArrowWidth + 20\n    var textHalfWidth = 4\n    var textHalfHeight = 6\n    var getXAxisOfText = function (angle) {\n      return FunnyMath.getCosine(angle) * radius - textHalfWidth\n    }\n\n    var getYAxisOfText = function (angle) {\n      return FunnyMath.getSine(angle) * radius + textHalfHeight\n    }\n\n    var axis = [{\n      x: getXAxisOfText(angle + 180),\n      y: getYAxisOfText(angle + 180)\n    },\n    {\n      x: getXAxisOfText(angle),\n      y: getYAxisOfText(angle)\n    }]\n\n    if (arrowTextContainner !== null) {\n      _.divEq(\n        ElementController.setAttr('x', xAxis + axis[0].x),\n        ElementController.setAttr('y', yAxis + axis[0].y)\n      )(arrowText[0])\n      _.divEq(\n        ElementController.setAttr('x', xAxis + axis[1].x),\n        ElementController.setAttr('y', yAxis + axis[1].y)\n      )(arrowText[1])\n    }\n  }\n\n  function addImage () {\n    if (draw.useArrow === true) {\n      var imagePath = draw.options.arrow.mode === arrowQueue[arrowQueueLength - 1] ? NORMAL_ALL_IMAGE : NORMAL_IMAGE\n      var createdImage = ElementController.createImage(imagePath, IMAGE_WIDTH, IMAGE_HEIGHT, true)\n      arrowImage = createdImage[0]\n      arrowImageContainner = createdImage[1]\n\n      addArrowGuideText()\n      draw.drawView.setCursor(arrowImage)\n      bindEvent()\n      changeArrow(draw.options.arrow.mode)\n    }\n  }\n\n  function changeArrow (arrow) {\n    currentArrow = arrow\n    changeArrowImage()\n    changeArrowImagePath()\n  }\n\n  function getArrow () {\n    return currentArrow\n  }\n\n  function changeArrowImage () {\n    var startAxis = draw.drawModel.getAxis(0)\n    var endAxis = draw.drawModel.getAxis(1)\n    var angle = FunnyMath.getAngle(startAxis[0], startAxis[1], endAxis[0], endAxis[1])\n    var textAngle = angle\n    var degree = currentArrow === arrowQueue[1] ? 90 : 270\n\n    var lineCenter = FunnyMath.getLineCenter(startAxis[0], startAxis[1], endAxis[0], endAxis[1])\n\n    var xAxis = lineCenter[0]\n    var yAxis = lineCenter[1]\n\n    _.divEq(\n      ElementController.setAttr('x', xAxis),\n      ElementController.setAttr('y', yAxis)\n    )(arrowImage)\n\n    if (draw.options.notUseAutoChangeOfArrow !== true) {\n      if (Math.abs(angle) > 90) {\n        degree = degree === 90 ? 270 : 90\n        textAngle -= 180\n      }\n    }\n\n    changeArrowGuideText(xAxis, yAxis, textAngle)\n\n    angle += degree\n\n    ElementController.setAttr(\n      'transform',\n      `rotate(${angle} ${xAxis} ${yAxis}) translate(${halfArrowWidth * -1},${halfArrowHeight * -1})`\n    )(arrowImageContainner)\n  }\n\n  function changeArrowImagePath () {\n    var imagePath = currentArrow === arrowQueue[arrowQueueLength - 1] ? NORMAL_ALL_IMAGE : NORMAL_IMAGE\n    ElementController.setHrefAttr(imagePath)(arrowImage)\n  }\n\n  function bindEvent () {\n    if (draw.options.useEvent === true) {\n      arrowImage.onclick = function (event) {\n        event.stopPropagation()\n      }\n\n      arrowImage.onmousedown = function (event) {\n        event.stopPropagation()\n\n        var imagePath = currentArrow === arrowQueue[arrowQueueLength - 1] ? PRESS_ALL_IMAGE : PRESS_IMAGE\n\n        arrowImage.isSelected = true\n        ElementController.setHrefAttr(imagePath)(arrowImage)\n      }\n\n      arrowImage.onmouseup = function (event) {\n        event.stopPropagation()\n\n        if (arrowImage.isSelected === true) {\n          var arrow = getNextArrow(currentArrow)\n\n          arrowImage.isSelected = false\n\n          changeArrow(arrow)\n\n          draw.callCustomEvent('mouseup', draw.getData())\n        }\n      }\n\n      arrowImage.onmouseleave = function (event) {\n        event.stopPropagation()\n\n        if (arrowImage.isSelected === true) {\n          arrowImage.onmouseup(event)\n        }\n      }\n    }\n  }\n\n  function remove () {\n    if (draw.useArrow === true) {\n      arrowImageContainner.removeChild(arrowImage)\n      draw.groupHelper.removeChild(arrowImageContainner)\n\n      if (arrowTextContainner !== null) {\n        arrowTextContainner.removeChild(arrowText[0])\n        arrowTextContainner.removeChild(arrowText[1])\n\n        draw.groupHelper.removeChild(arrowTextContainner)\n      }\n    }\n  }\n\n  function append () {\n    if (arrowImageContainner !== null) {\n      arrowImageContainner.appendChild(arrowImage)\n      draw.groupHelper.appendChild(arrowImageContainner)\n    }\n\n    if (arrowTextContainner !== null) {\n      arrowTextContainner.appendChild(arrowText[0])\n      arrowTextContainner.appendChild(arrowText[1])\n\n      draw.groupHelper.appendChild(arrowTextContainner)\n    }\n  }\n\n  if (draw.useArrow === true) {\n    setArrowScope()\n  }\n\n  function resetData () {\n    arrowImageContainner = null\n    arrowImage = null\n    arrowTextContainner = null\n    arrowText = []\n  }\n\n  this.addImage = addImage\n  this.append = append\n  this.remove = remove\n  this.getArrow = getArrow\n  this.changeArrowImage = changeArrowImage\n  this.changeArrow = changeArrow\n  this.show = show\n  this.hide = hide\n  this.resetData = resetData\n}\n","/**\n * 이벤트 조작 객체\n */\nmodule.exports = {\n  bindEvent (name, callback) {\n    return (element) => {\n      element.addEventListener(name, callback)\n      return element\n    }\n  },\n  unbindEvent (name, callback) {\n    return (element) => {\n      element.removeEventListener(name, callback)\n      return element\n    }\n  },\n  bindBodyEvent (name, callback) {\n    return this.bindEvent(name, callback)(document.body)\n  },\n  unbindBodyEvent (name, callback) {\n    return this.unbindEvent(name, callback)(document.body)\n  }\n}\n","const GroupHelper = require('./group-helper')\nconst WiseFaceDetectionHelper = require('./wise-facedetection-helper')\nconst LineHelper = require('./line-helper')\nconst CircleHelper = require('./circle-helper')\nconst TextTagHelper = require('./text-helper')\nconst PolygonHelper = require('./polygon-helper')\nconst ArrowImageHelper = require('./arrow-image-helper')\n\nconst ElementController = require('../../common/ElementController')\nconst FunnyMath = require('../../common/FunnyMath')\nconst EventController = require('../../common/EventController')\nconst _ = require('../../common/fp')\nconst {MOVED_ATTR} = require('../../modules/constants')\n\nmodule.exports = function DrawView (draw, rootSVG) { // eslint-disable-line\n  var TEXT_POINT_RADIUS = 1.5\n\n  var parentSvgRatio = []\n  var parentSvgStartAxis = null\n\n  var selectedPolygon = null\n\n  var drawView = this\n\n  draw.selectedCircleIndex = null\n  draw.selectedLineIndex = null\n\n  draw.groupHelper = new GroupHelper(draw, rootSVG)\n  draw.wiseFaceDetectionHelper = new WiseFaceDetectionHelper(draw, rootSVG)\n  draw.lineHelper = new LineHelper(draw, rootSVG)\n  draw.circleHelper = new CircleHelper(draw, rootSVG)\n  draw.textTagHelper = new TextTagHelper(draw, rootSVG)\n  draw.polygonHelper = new PolygonHelper(draw, rootSVG)\n  draw.arrowImageHelper = new ArrowImageHelper(draw, rootSVG)\n\n  this.getArrow = draw.arrowImageHelper.getArrow\n  this.changeArrow = draw.arrowImageHelper.changeArrow\n  this.moveTopLayer = draw.groupHelper.moveTopLayer\n  this.changeFillColor = draw.wiseFaceDetectionHelper.changeFillColor\n  this.changeAxis = function () {\n    var polygonPoint = ''\n    var height = 0\n    var lines = draw.lineHelper.getLines()\n    var circles = draw.circleHelper.getCircles()\n    var textTag = draw.textTagHelper.getTextTag()\n    var polygon = draw.polygonHelper.getPolygon()\n    var points = draw.drawModel.getPoints()\n\n    _.each((line, index, lines, len) => {\n      const endAxisIndex = draw.options.fill === true && index === len - 1 ? 0 : index + 1\n      const [x1, y1] = points[index]\n      const [x2, y2] = points[endAxisIndex]\n\n      _.divEq(\n        ElementController.setAttr('x1', x1),\n        ElementController.setAttr('y1', y1),\n        ElementController.setAttr('x2', x2),\n        ElementController.setAttr('y2', y2)\n      )(line)\n    })(lines)\n\n    _.each((circle, index, _, len) => {\n      var pointAxis = points[index]\n      var circleXAxis = pointAxis[0]\n      var circleYAxis = pointAxis[1]\n      var width = parseInt(ElementController.getAttr('width')(circle))\n      var height = parseInt(ElementController.getAttr('height')(circle))\n\n      /**\n       * 고정비 사각형일 때, 부모의 영역를 넘어갈 경우 Safari에서\n       * 정상적으로 Cursor가 지정이 안되므로 2px 이동 시킨다.\n       */\n      if (draw.options.fixedRatio === false && draw.options.useOnlyRectangle === false) {\n        circleXAxis -= width / 2\n        circleYAxis -= height / 2\n      } else if (draw.options.fixedRatio === true) {\n        switch (index) {\n          case draw.rectangleIndex[0]:\n            circleXAxis -= width - draw.options.lineStrokeWidth / 2\n            circleYAxis -= height - draw.options.lineStrokeWidth / 2\n            break\n          case draw.rectangleIndex[1]:\n            circleXAxis -= draw.options.lineStrokeWidth / 2\n            circleYAxis -= height - draw.options.lineStrokeWidth / 2\n            break\n          case draw.rectangleIndex[2]:\n            circleXAxis -= width - draw.options.lineStrokeWidth / 2\n            circleYAxis -= height - draw.options.lineStrokeWidth / 2\n            break\n          case draw.rectangleIndex[3]:\n            circleXAxis -= width - draw.options.lineStrokeWidth / 2\n            circleYAxis -= draw.options.lineStrokeWidth / 2\n            break\n        }\n      }\n\n      circle.setAttributeNS(null, 'x', circleXAxis)\n      circle.setAttributeNS(null, 'y', circleYAxis)\n\n      if (index === len - 1 && draw.options.textInCircle !== null) {\n        textTag.setAttributeNS(null, 'x', pointAxis[0] - 3)\n        textTag.setAttributeNS(null, 'y', pointAxis[1] + 4)\n      }\n\n      if (draw.options.fill === true) {\n        polygonPoint += pointAxis[0] + ',' + pointAxis[1] + ' '\n      }\n    })(circles)\n\n    if (draw.options.fill === true) {\n      polygon.setAttributeNS(null, 'points', polygonPoint.replace(/[\\s]{1}$/, ''))\n    }\n\n    if (draw.useArrow === true) {\n      draw.arrowImageHelper.changeArrowImage()\n    }\n\n    if (draw.options.wiseFaceDetection !== false) {\n      var firstPoint = points[0]\n      var secondPoint = points[1]\n      var thridPoint = points[2]\n      var xAxis = FunnyMath.getLineCenter(secondPoint[0], secondPoint[1], thridPoint[0], thridPoint[1])[0]\n      var yAxis = FunnyMath.getLineCenter(firstPoint[0], firstPoint[1], secondPoint[0], secondPoint[1])[1]\n      height = 0\n\n      if ('heightRatio' in draw.options.wiseFaceDetection) {\n        height = firstPoint[1] - secondPoint[1]\n      } else if ('widthRatio' in draw.options.wiseFaceDetection) {\n        height = firstPoint[0] - secondPoint[0]\n      }\n\n      height = Math.abs(height)\n\n      draw.wiseFaceDetectionHelper.updateCircle(xAxis, yAxis, height)\n    }\n  }\n  this.resetAllColor = function () {\n    var lines = draw.lineHelper.getLines()\n    var circles = draw.circleHelper.getCircles()\n\n    _.each(line => draw.lineHelper.setDefaultColor(line))(lines)\n    _.each(circle => draw.lineHelper.setDefaultColor(circle))(circles)\n\n    draw.polygonHelper.setDefaultColor()\n  }\n  this.setAllColor = function () {\n    var lines = draw.lineHelper.getLines()\n    var circles = draw.circleHelper.getCircles()\n\n    _.each(line => draw.lineHelper.setSelectColor(line))(lines)\n    _.each(circle => draw.lineHelper.setSelectColor(circle))(circles)\n\n    draw.polygonHelper.setSelectColor()\n  }\n  this.setCursor = function (element) {\n    ElementController.style('cursor', draw.options.useCursor ? 'pointer' : 'default')(element)\n  }\n  this.resetCursor = function (element) {\n    ElementController.style('cursor', 'default')(element)\n  }\n  this.createSVGElement = function () {\n    var radius = draw.options.circleRadius\n    var pointsLength = draw.drawModel.getPointsLength()\n    var addLine = function () {\n      if (draw.options.fixedRatio === true) {\n        draw.lineHelper.addLine(false, false)\n      } else {\n        draw.lineHelper.addLine()\n      }\n    }\n\n    _.loop((i, len) => {\n      if (i < len - 1) {\n        addLine()\n      } else {\n        if (draw.options.textInCircle !== null) {\n          radius *= TEXT_POINT_RADIUS\n        }\n\n        if (draw.options.fill === true) {\n          addLine()\n          draw.polygonHelper.addPolygon()\n        }\n      }\n\n      if (draw.options.fixedRatio === true) {\n        if (i === draw.rectangleIndex[2]) {\n          draw.circleHelper.addCircle(radius)\n        } else {\n          // Circle을 작게 그려서 안보이게 함.\n          draw.circleHelper.addCircle(0, false, false)\n        }\n      } else {\n        draw.circleHelper.addCircle(radius)\n      }\n    })(pointsLength)\n\n    draw.textTagHelper.addText()\n    draw.arrowImageHelper.addImage()\n    draw.groupHelper.add()\n\n    if (draw.options.wiseFaceDetection !== false) {\n      draw.wiseFaceDetectionHelper.add()\n    }\n  }\n  this.appendDom = function () {\n    // appending sequense is important.\n    // Group -> Polygon -> Line -> Circle -> Text\n    draw.groupHelper.append()\n    draw.polygonHelper.append()\n    draw.lineHelper.appendAll()\n    draw.circleHelper.appendAll()\n    draw.textTagHelper.append()\n    draw.arrowImageHelper.append()\n\n    if (draw.options.wiseFaceDetection !== false) {\n      draw.wiseFaceDetectionHelper.append()\n    }\n  }\n  this.resetParentSvgAttr = function () {\n    window.setTimeout(function () {\n      ElementController.setAttr(MOVED_ATTR, false)(rootSVG)\n    }, 100)\n  }\n  this.removeAllElement = function () {\n    try {\n      draw.lineHelper.removeAll()\n      draw.circleHelper.removeAll()\n      draw.polygonHelper.remove()\n      draw.textTagHelper.remove()\n      draw.arrowImageHelper.remove()\n\n      if (draw.options.wiseFaceDetection !== false) {\n        draw.wiseFaceDetectionHelper.remove()\n      }\n\n      draw.groupHelper.remove()\n    } catch (e) {\n      /**\n       * hide 후 destroy를 하면 에러가 발생을 하는 데,\n       * 현재 태그들이 삭제되었는 지 확인 하는 로직대신\n       * 예외 처리가 간단하므로 예외처리를 한다.\n       */\n    }\n  }\n  this.addPoint = function (xAxis, yAxis, appendIndex) {\n    var newCircleRadius = draw.options.circleRadius\n    var pointsLength = draw.drawModel.getPointsLength()\n    // Set Axis\n    if (_.negate(_.isUndefined(appendIndex))) {\n      draw.drawModel.addAxis(xAxis, yAxis, appendIndex)\n    } else {\n      draw.drawModel.addAxis(xAxis, yAxis)\n    }\n\n    draw.lineHelper.addLine()\n    draw.lineHelper.appendAtLast()\n\n    if (draw.options.textInCircle !== null) {\n      newCircleRadius *= TEXT_POINT_RADIUS\n    }\n\n    draw.circleHelper.addCircle(newCircleRadius)\n\n    draw.circleHelper.changeRadius(pointsLength - 1, draw.options.circleRadius)\n    draw.circleHelper.appendAtLast()\n\n    draw.changeAxis()\n\n    if (draw.drawModel.isAllSelected) {\n      draw.setAllColor()\n    }\n  }\n  this.callCustomEvent = function (eventName, arg) {\n    var method = ''\n\n    if (\n      (draw.options.useResizeRectangle === true || draw.options.useEvent === true) &&\n      draw.options.event !== null &&\n      draw.options.customDraw === false\n    ) {\n      if (eventName in draw.options.event) {\n        method = Array.isArray(arg) === true ? 'apply' : 'call'\n        draw.options.event[eventName][method](draw, arg)\n      }\n    }\n  }\n  this.createArrow = function (arrowOptions) {\n    draw.useArrow = true\n    draw.options.arrow = _.clone(arrowOptions)\n    draw.arrowImageHelper.addImage()\n    draw.changeAxis()\n    draw.arrowImageHelper.append()\n  }\n  this.toggleDraggingStatus = function (statusType) {\n    var method = statusType === true ? 'add' : 'remove'\n    var className = 'svg-geometry'\n\n    document.body.classList[method](className)\n  }\n  this.resetElementStatus = function () {\n    var lines = draw.lineHelper.getLines()\n    var circles = draw.circleHelper.getCircles()\n    var polygon = draw.polygonHelper.getPolygon()\n\n    if (draw.selectedLineIndex !== null) {\n      lines[draw.selectedLineIndex].isSelected = false\n      draw.selectedLineIndex = null\n    }\n\n    if (draw.selectedCircleIndex !== null) {\n      circles.forEach(function (circle) {\n        if (circle.isSelected === true) {\n          circle.isSelected = false\n        }\n      })\n\n      draw.selectedCircleIndex = null\n    }\n\n    if (draw.options.fill === true) {\n      polygon.isSelected = false\n      selectedPolygon = null\n    }\n\n    if (draw.drawModel.isAllSelected === false) {\n      draw.resetAllColor()\n    }\n\n    drawView.resetCursor(rootSVG)\n\n    if (draw.options.fixedRatio === true) {\n      parentSvgRatio = []\n    }\n\n    parentSvgStartAxis = null\n  }\n  this.parentSVGMouseUpHandle = function () {\n    drawView.toggleDraggingStatus(false)\n\n    if (draw.selectedCircleIndex !== null && draw.circleHelper.isMouseLeave()) {\n      draw.circleHelper.update()\n    }\n\n    if (draw.selectedLineIndex !== null) {\n      drawView.callCustomEvent('mouseup', draw.getData())\n    }\n\n    drawView.resetElementStatus()\n    drawView.resetParentSvgAttr()\n  }\n  this.parentSVGMouseDownHandle = function (event) {\n    var idx = 0\n    var len = 0\n    var circles = draw.circleHelper.getCircles()\n    var lines = draw.lineHelper.getLines()\n    var polygon = draw.polygonHelper.getPolygon()\n    const isSelected = item => item.isSelected\n\n    parentSvgStartAxis = ElementController.getPageAxis(rootSVG, event)\n\n    _.pipe(\n      _.findIndex(isSelected),\n      index => {\n        index > -1 && (draw.selectedCircleIndex = index)\n      }\n    )(circles)\n\n\n    // Check selected Line\n    if (draw.selectedCircleIndex === null && draw.options.fixedRatio === false) {\n      _.pipe(\n        _.findIndex(isSelected),\n        index => {\n          index > -1 && (draw.selectedLineIndex = index)\n        }\n      )\n    }\n\n    if (draw.options.fixedRatio === true && draw.options.ratio !== false) {\n      parentSvgRatio = draw.options.ratio\n    } else if (draw.selectedCircleIndex !== null && draw.options.fixedRatio === true) {\n      // 최대 공약수를 구해서 메모리 최적화 필요\n      parentSvgRatio = [\n        draw.options.points[2][0] - draw.options.points[0][0],\n        draw.options.points[2][1] - draw.options.points[0][1]\n      ]\n    }\n\n    if (draw.options.fill === true) {\n      if (polygon.isSelected === true) {\n        selectedPolygon = true\n      }\n    }\n\n    if (draw.options.customDraw === true) {\n      draw.selectedCircleIndex =\n        (draw.options.useOnlyRectangle === true || draw.options.useRectangleForCustomDraw === true)\n          ? 2\n          : circles.length - 1\n      drawView.toggleDraggingStatus(true)\n    } else if (\n      draw.selectedCircleIndex !== null ||\n      draw.selectedLineIndex !== null ||\n      selectedPolygon !== null\n    ) {\n      ElementController.setAttr(MOVED_ATTR, true)(rootSVG)\n      drawView.toggleDraggingStatus(true)\n    }\n  }\n  const moveRectangle = (event) => {\n    let [changedX1, changedY1] = draw.drawModel.getAxis(draw.rectangleIndex[0])\n    let [changedX2, changedY2] = ElementController.getPageAxis(rootSVG, event)\n    let thirdPoint = draw.drawModel.getAxis(draw.rectangleIndex[2])\n\n    // 가로 Min, Max Validation\n    if (!drawView.validateGeometrySize(\n        Math.abs(changedX1 - changedX2),\n        Math.abs(changedY1 - thirdPoint[1])\n      )) {\n      changedX2 = thirdPoint[0]\n    }\n\n    // 세로 Min, Max Validation\n    if (!drawView.validateGeometrySize(\n        Math.abs(changedX1 - thirdPoint[0]),\n        Math.abs(changedY1 - changedY2)\n      )) {\n      changedY2 = thirdPoint[1]\n    }\n    return [changedX1, changedY1, changedX2, changedY2]\n  }\n  const moveFixedRect = (event) => {\n    var pageAxis = ElementController.getPageAxis(rootSVG, event)\n    var xAxis = pageAxis[0]\n    var yAxis = pageAxis[1]\n    var firstPoint = draw.drawModel.getAxis(draw.rectangleIndex[0])\n\n    var movedXAxis = xAxis - parentSvgStartAxis[0]\n    var movedYAxis = yAxis - parentSvgStartAxis[1]\n\n    var totalMovement = Math.abs(movedXAxis) + Math.abs(movedYAxis)\n\n    var incrementXAxis = parentSvgRatio[0] / (parentSvgRatio[1] + parentSvgRatio[0]) * totalMovement\n\n    if (movedXAxis < 0 || movedYAxis < 0) {\n      incrementXAxis *= -1\n    }\n\n    let changedX1 = firstPoint[0]\n    let changedX2 = xAxis + incrementXAxis\n    let changedY1 = firstPoint[1]\n    let changedY2 = changedY1 + ((changedX2 - changedX1) * parentSvgRatio[1] / parentSvgRatio[0])\n\n    // 변경된좌표 체크\n    if (draw.drawModel.validateAxis(changedX2, changedY2) === false) {\n      /**\n       * @date 2017-04-24\n       * maxSize로 적용한 것은 최대 사이즈로 정상 적용을 위해서 이다.\n       * 두번재 (x,y)가 0 보다 작을 때는 최소 사이즈보다 작을 때 이므로,\n       * 분기를 추가 한다.\n       */\n      if (\n        (changedX1 === 0 && changedY1 === 0) &&\n        (changedX2 > 0 && changedY2 > 0)\n      ) {\n        changedX2 = draw.options.maxSize.width\n        changedY2 = draw.options.maxSize.height\n      } else {\n        return\n      }\n    }\n\n    // Min, Max Validation\n    if (!drawView.validateGeometrySize(Math.abs(changedX1 - changedX2), Math.abs(changedY1 - changedY2))) {\n      return\n    }\n    return [changedX1, changedY1, changedX2, changedY2]\n  }\n  this.parentSVGMouseMoveHandle = function (event) {\n    if (draw.options.customDraw === true && draw.selectedCircleIndex === null) {\n      drawView.parentSVGMouseDownHandle(event)\n    }\n\n    if (\n      draw.selectedCircleIndex === null &&\n      draw.selectedLineIndex === null &&\n      selectedPolygon === null &&\n      draw.options.customDraw === false\n    ) {\n      return\n    }\n\n    var pageAxis = ElementController.getPageAxis(rootSVG, event)\n    var xAxis = pageAxis[0]\n    var yAxis = pageAxis[1]\n\n    var movedXAxis = xAxis - parentSvgStartAxis[0]\n    var movedYAxis = yAxis - parentSvgStartAxis[1]\n\n    var offsetWidth = ElementController.getSVGOffset(rootSVG)().width\n    var offsetHeight = ElementController.getSVGOffset(rootSVG)().height\n\n    var firstPoint = draw.drawModel.getAxis(draw.rectangleIndex[0])\n    var thirdPoint = draw.drawModel.getAxis(draw.rectangleIndex[2])\n\n    var prevPoints = []\n\n    var pointsLength = draw.drawModel.getPointsLength()\n\n    var changedX1 = 0\n    var changedX2 = 0\n    var changedY1 = 0\n    var changedY2 = 0\n\n    var self = null\n\n    var circles = []\n    var lines = []\n    var polygon = null\n\n    // 포인트를 선택하여 영역을 이동 시킬 때\n    if (draw.selectedCircleIndex !== null) {\n      /*\n      Point 이동 시 좌표 유효성 체크\n      움직였을 때의 거리를 계산하여 유효성을 체크한다.\n      */\n      if (xAxis < 0) {\n        xAxis = 0\n      } else if (xAxis > offsetWidth) {\n        xAxis = offsetWidth\n      }\n\n      if (yAxis < 0) {\n        yAxis = 0\n      } else if (yAxis > offsetHeight) {\n        yAxis = offsetHeight\n      }\n\n      // 사각형 리사이징\n      if (draw.options.fixedRatio === true || draw.options.useRectangleForCustomDraw === true) {\n        // 사각형\n        let axis = []\n        if (draw.options.useOnlyRectangle === true || draw.options.useRectangleForCustomDraw === true) {\n          axis = moveRectangle(event)\n        } else { // 고정비 확대\n          axis = moveFixedRect(event)\n        }\n\n        // 뒤집어지는 것을 방지 하기 위해 세번째 포인트가 첫번째 포인트 보다 적을 때 return\n        if (\n          _.isUndefined(axis) ||\n          (\n            draw.options.useRectangleForCustomDraw === false &&\n            (firstPoint[0] > axis[2] || firstPoint[1] > axis[3])\n          )\n        ) {\n          return\n        }\n\n        drawView.changeRectangle(...axis)\n\n        // 라인과 폴리곤 사각형의 Circle\n      } else {\n        var validateAxis = []\n        var leftAxisIndex = 0\n        var rightAxisIndex = 0\n        /**\n         * Custom Drawing 중일 때는 Line 제한을 하지 않고,\n         * custom 함수에서 클릭시 제한을 한다.\n         */\n        if (\n          draw.options.customDraw === false &&\n          draw.options.minLineLength !== false) {\n          circles = draw.circleHelper.getCircles()\n\n          if (!(draw.options.fill === false && draw.selectedCircleIndex === 0)) {\n            leftAxisIndex = draw.selectedCircleIndex === 0 ? circles.length - 1 : draw.selectedCircleIndex - 1\n            validateAxis.push(draw.drawModel.getAxis(leftAxisIndex))\n          }\n\n          if (!(draw.options.fill === false && draw.selectedCircleIndex === circles.length - 1)) {\n            rightAxisIndex = draw.selectedCircleIndex === circles.length - 1 ? 0 : draw.selectedCircleIndex + 1\n            validateAxis.push(draw.drawModel.getAxis(rightAxisIndex))\n          }\n\n          for (var i = 0, ii = validateAxis.length; i < ii; i++) {\n            self = validateAxis[i]\n\n            if (FunnyMath.pythagoreanTheorem(xAxis, yAxis, self[0], self[1]) < draw.options.minLineLength) {\n              return\n            }\n          }\n        }\n\n        prevPoints = draw.drawModel.getPoints()\n        prevPoints[draw.selectedCircleIndex] = [xAxis, yAxis]\n\n        if (draw.validateStabilization(prevPoints) === false) {\n          return\n        }\n\n        draw.drawModel.setAxis(draw.selectedCircleIndex, xAxis, yAxis)\n      }\n      // 라인을 선택하여 이동할 때\n    } else if (draw.options.fill === true && draw.selectedLineIndex !== null) {\n      lines = draw.lineHelper.getLines()\n      var startAxis = draw.drawModel.getAxis(draw.selectedLineIndex)\n      var endAxisIndex = draw.options.fill === true && draw.selectedLineIndex === lines.length - 1 ? 0 : draw.selectedLineIndex + 1\n      var endAxis = draw.drawModel.getAxis(endAxisIndex)\n\n      changedX1 = startAxis[0] + movedXAxis\n      changedY1 = startAxis[1] + movedYAxis\n      changedX2 = endAxis[0] + movedXAxis\n      changedY2 = endAxis[1] + movedYAxis\n\n      /*\n       * 라인 이동 시, 양쪽 끝의 유효성 체크하여\n       * 변경이 불가능하면 기존 좌표로 한다.\n       */\n      if (\n        draw.drawModel.validateAxis(changedX1, changedY1) === false ||\n        draw.drawModel.validateAxis(changedX2, changedY2) === false\n      ) {\n        changedX1 = startAxis[0]\n        changedY1 = startAxis[1]\n        changedX2 = endAxis[0]\n        changedY2 = endAxis[1]\n      }\n\n      prevPoints = draw.drawModel.getPoints()\n      prevPoints[draw.selectedLineIndex] = [changedX1, changedY1]\n      prevPoints[endAxisIndex] = [changedX2, changedY2]\n\n      if (draw.validateStabilization(prevPoints) === false) {\n        return\n      }\n\n      draw.drawModel.setAxis(draw.selectedLineIndex, changedX1, changedY1)\n      draw.drawModel.setAxis(endAxisIndex, changedX2, changedY2)\n      // 영역을 선택하여 이동할 때\n    } else if (draw.options.fill === true || draw.selectedLineIndex !== null) {\n      var isMoveOk = false\n      polygon = draw.polygonHelper.getPolygon()\n\n      if (polygon !== null) {\n        isMoveOk = polygon.isSelected === true\n      } else {\n        isMoveOk = draw.selectedLineIndex !== null\n      }\n\n      /*\n      Polygon 이동 시 좌표 유효성 체크\n      Polygon은 도형 전체가 움직이므로 모든 Point의 좌표를 체크한다.\n      */\n      if (draw.options.useOnlyRectangle === true || draw.options.fixedRatio === true) {\n        if (\n          firstPoint[0] + movedXAxis < 0 ||\n          thirdPoint[0] + movedXAxis > offsetWidth) {\n          movedXAxis = 0\n        }\n\n        if (\n          firstPoint[1] + movedYAxis < 0 ||\n          thirdPoint[1] + movedYAxis > offsetHeight) {\n          movedYAxis = 0\n        }\n      }\n\n      if (draw.drawModel.validateAllPoint(movedXAxis, 0) === false) {\n        movedXAxis = 0\n      }\n\n      if (draw.drawModel.validateAllPoint(0, movedYAxis) === false) {\n        movedYAxis = 0\n      }\n      if (isMoveOk) {\n        _.loop(index => {\n          const self = draw.drawModel.getAxis(index)\n          draw.drawModel.setAxis(index, self[0] + movedXAxis, self[1] + movedYAxis)\n        })(pointsLength)\n      }\n    }\n\n    parentSvgStartAxis = [xAxis, yAxis]\n\n    // Update\n    draw.changeAxis()\n  }\n  this.bindEvent = function () {\n    if (\n      draw.options.useResizeRectangle === true ||\n      draw.options.useEvent === true ||\n      draw.options.customDraw === true) {\n      parentSvgStartAxis = null\n      EventController.bindBodyEvent('mousedown', drawView.parentSVGMouseDownHandle)\n      EventController.bindBodyEvent('mousemove', drawView.parentSVGMouseMoveHandle)\n      EventController.bindBodyEvent('mouseup', drawView.parentSVGMouseUpHandle)\n      EventController.bindBodyEvent('mouseleave', drawView.parentSVGMouseUpHandle)\n    }\n  }\n  this.init = function () {\n    drawView.createSVGElement()\n\n    if (draw.options.initCenter === true) {\n      draw.drawModel.alignCenter()\n    }\n\n    draw.changeAxis()\n    draw.resetAllColor()\n    drawView.bindEvent()\n    drawView.appendDom()\n  }\n  this.reset = function () {\n    drawView.removeAllElement()\n    drawView.unbindEvent()\n    draw.lineHelper.setLines([])\n    draw.circleHelper.setCircles([])\n    draw.polygonHelper.setPolygon(null)\n    draw.textTagHelper.setTextTag(null)\n    draw.arrowImageHelper.resetData()\n  }\n  this.unbindEvent = function () {\n    EventController.unbindBodyEvent('mousedown', drawView.parentSVGMouseDownHandle)\n    EventController.unbindBodyEvent('mousemove', drawView.parentSVGMouseMoveHandle)\n    EventController.unbindBodyEvent('mouseup', drawView.parentSVGMouseUpHandle)\n    EventController.unbindBodyEvent('mouseleave', drawView.parentSVGMouseUpHandle)\n    // document.documentElement.removeEventListener('mouseup', documentElementMouseMoveHandle);\n  }\n  this.endDraw = function () {\n    draw.options.customDraw = false\n    draw.options.useRectangleForCustomDraw = false\n    drawView.resetElementStatus()\n    drawView.resetParentSvgAttr()\n  }\n  this.changeRectangleToSize = function (width, height) {\n    if (draw.options.useOnlyRectangle !== true && draw.options.fixedRatio !== true) {\n      return\n    }\n\n    var firstPoint = draw.drawModel.getAxis(0)\n    var thirdPoint = draw.drawModel.getAxis(2)\n    var offset = ElementController.getSVGOffset(rootSVG)()\n    var changedX1 = 0\n    var changedX3 = 0\n    var changedY1 = 0\n    var changedY3 = 0\n\n    /*\n     * 세번째 좌표가 오른쪽 하단 끝에 있을 경우\n     * 세번째 좌표를 기준으로 변경을 하고,\n     * 그렇지 않을 경우 첫번째 좌표를 기준으로 한다.\n     */\n    if (thirdPoint[0] >= offset.width) {\n      changedX1 = thirdPoint[0] - width\n      changedX3 = thirdPoint[0]\n    } else {\n      changedX1 = firstPoint[0]\n      changedX3 = firstPoint[0] + width\n    }\n\n    if (thirdPoint[1] >= offset.height) {\n      changedY1 = thirdPoint[1] - height\n      changedY3 = thirdPoint[1]\n    } else {\n      changedY1 = firstPoint[1]\n      changedY3 = firstPoint[1] + height\n    }\n\n    drawView.changeRectangle(changedX1, changedY1, changedX3, changedY3, true)\n    draw.changeAxis()\n  }\n  this.changeRectangle = function (x1, y1, x2, y2, flagForchangeFirstAxis) {\n    if (flagForchangeFirstAxis === true) {\n      draw.drawModel.setAxis(0, x1, y1)\n    }\n\n    draw.drawModel.setAxis(draw.rectangleIndex[1], x1, y2)\n    draw.drawModel.setAxis(draw.rectangleIndex[2], x2, y2)\n    draw.drawModel.setAxis(draw.rectangleIndex[3], x2, y1)\n  }\n  this.changeNormalStatus = function () {\n    var lines = draw.lineHelper.getLines()\n    var circles = draw.circleHelper.getCircles()\n\n    lines.forEach(function (line) {\n      draw.lineHelper.hide(line)\n    })\n\n    circles.forEach(function (circle) {\n      draw.circleHelper.hide(circle)\n    })\n\n    if (draw.useArrow === true) {\n      draw.arrowImageHelper.hide()\n    }\n\n    draw.textTagHelper.hide()\n\n    draw.resetAllColor()\n  }\n  this.changeActiveStatus = function () {\n    var lines = draw.lineHelper.getLines()\n    var circles = draw.circleHelper.getCircles()\n\n    lines.forEach(function (line) {\n      draw.lineHelper.show(line)\n    })\n\n    circles.forEach(function (circle) {\n      draw.circleHelper.show(circle)\n    })\n\n    if (draw.useArrow === true) {\n      draw.arrowImageHelper.show()\n    }\n\n    draw.textTagHelper.show()\n\n    draw.setAllColor()\n  }\n  this.validateGeometrySize = function (geometryWidth, geometryHeight) {\n    if (_.negate(_.isUndefined(draw.options.minSize))) {\n      if (geometryWidth < draw.options.minSize.width || geometryHeight < draw.options.minSize.height) {\n        return false\n      }\n    }\n\n    if (_.negate(_.isUndefined(draw.options.maxSize))) {\n      if (geometryWidth > draw.options.maxSize.width || geometryHeight > draw.options.maxSize.height) {\n        return false\n      }\n    }\n\n    return true\n  }\n}\n","'use strict'\n/**\n * SVG 태그에 옵션에 맞게 Polygon, Line을 추가한다.\n *\n * @example\nsvgGeometry.draw({\n  color: '#ff9832',\n  selectedColor: '#ff5732',\n  lineStrokeWidth: 5,\n  circleRadius: 8,\n  fill: true,\n  fillOpacity: 0,\n  useEvent: true,\n  points: [\n    [303,469],\n    [437,461],\n    [475,374],\n    [423,248],\n    [291,270],\n    [224,388],\n    [219,472]\n  ]\n});\n */\n/**\n * DrawModel\n *\n * DrawView - DrawController\n * ArrowImageView - ArrowImageController\n * CircleView - CircleController\n * GroupView - GroupController\n * IconView - IconController\n * LineView - LineController\n * PolygonView - PolygonController\n * TextView - TextController\n * WiseFaceDetectionView - WiseFaceDetectionController\n */\nconst FunnyMath = require('../../common/FunnyMath')\nconst DrawModel = require('./DrawModel')\nconst DrawView = require('./DrawView')\nconst _ = require('../../common/fp')\n\nmodule.exports = function Draw (rootSVG, options) {\n  var draw = this\n\n  var MINIMUM_ANGLE = 1\n\n  draw.options = _.merge({\n    fillColor: '#cccccc',\n    lineColor: '#cccccc',\n    pointColor: '#cccccc',\n    points: [ [0, 0], [100, 100] ],\n    lineStrokeWidth: 3,\n    circleRadius: 5,\n    minLineLength: 30,\n    textInCircle: null,\n    arrow: null,\n    useEvent: false,\n    useResizeRectangle: false,\n    notUseMoveTopLayer: false,\n    useCursor: false,\n    useOnlyRectangle: false,\n    useRectangleForCustomDraw: false,\n    fill: false,\n    fillOpacity: 0.5,\n    fixedRatio: false,\n    ratio: false,\n    event: {},\n    customDraw: false,\n    minSize: {\n      width: 30,\n      height: 30\n    },\n    maxSize: false,\n    minPoint: 4,\n    maxPoint: 8,\n    initCenter: false,\n    mirror: false,\n    flip: false,\n    notUseAutoChangeOfArrow: false,\n    wiseFaceDetection: false\n  }, options)\n\n  draw.useArrow = true\n\n  if (draw.options.arrow === null) {\n    draw.useArrow = false\n  } else if (draw.options.arrow.mode === '') {\n    draw.useArrow = false\n  }\n\n  if (draw.options.useOnlyRectangle === true) {\n    draw.options.fixedRatio = true\n  }\n\n  draw.drawModel = new DrawModel(draw, rootSVG)\n  draw.drawView = new DrawView(draw, rootSVG)\n\n  draw.rectangleIndex = draw.drawModel.getRectangleIndex()\n\n  draw.callCustomEvent = draw.drawView.callCustomEvent\n  draw.init = draw.drawView.init\n  draw.addPoint = draw.drawView.addPoint\n  draw.hide = draw.drawView.removeAllElement\n  draw.show = draw.drawView.appendDom\n  draw.active = draw.drawView.changeActiveStatus\n  draw.normal = draw.drawView.changeNormalStatus\n  draw.getData = function () {\n    return {\n      points: draw.drawModel.getPoints(),\n      arrow: draw.drawView.getArrow()\n    }\n  }\n  draw.reset = draw.drawView.reset\n  draw.destroy = draw.drawView.reset\n  draw.endDraw = draw.drawView.endDraw\n  draw.createArrow = draw.drawView.createArrow\n  draw.changeArrow = draw.drawView.changeArrow\n  draw.changeMinSizeOption = draw.drawModel.changeMinSizeOption\n  draw.changeMaxSizeOption = draw.drawModel.changeMaxSizeOption\n  draw.changeRectangleToSize = draw.drawView.changeRectangleToSize\n  draw.modifyPoints = draw.drawModel.modifyPoints\n  draw.alignCenter = draw.drawModel.alignCenter\n  draw.validateAxis = draw.drawModel.validateAxis\n  draw.stopEvent = draw.drawView.unbindEvent\n  draw.startEvent = draw.drawView.bindEvent\n  draw.moveTopLayer = draw.drawView.moveTopLayer\n  draw.changeWFDFillColor = draw.drawView.changeFillColor\n  draw.changeAxis = draw.drawView.changeAxis\n  draw.resetAllColor = function () {\n    draw.drawView.resetAllColor()\n    draw.drawModel.setIsAllSelectedState(false)\n  }\n  draw.setAllColor = function () {\n    draw.drawView.setAllColor()\n    draw.drawModel.setIsAllSelectedState(true)\n  }\n\n  draw.validateStabilization = validateStabilization\n  draw.validateIntersection = validateIntersection\n  draw.validateMinimumAngle = validateMinimumAngle\n\n  draw.drawView.init()\n\n  // @DrawUtil\n  function validateMinimumAngle (prevPoints) {\n    var points = []\n    var pointsLength = 0\n\n    try {\n      points = _.isUndefined(prevPoints)\n        ? _.clone(draw.drawModel.getPoints())\n        : _.clone(prevPoints)\n      pointsLength = points.length\n\n      /**\n       * 삼각형부터 체크\n       */\n      if (pointsLength >= 3 && draw.options.fill === true) {\n        var vertextAngle = Math.abs(FunnyMath.getVertextAngle(points[0], points[1], points[2]))\n        if (vertextAngle < MINIMUM_ANGLE) {\n          return false\n        }\n\n        _.loop(() => {\n          points.push(points.shift())\n        })(pointsLength)\n      }\n    } catch (e) {\n      console.warn(e)\n    }\n\n    return true\n  }\n\n  // @DrawUtil\n  function validateIntersection (prevPoints) {\n    var returnVal = true\n    var points = 0\n    var pointsLength = 0\n\n    // 고정비 사각형, 직각사각형, 라인은 교차 체크를 하지 않음.\n    if (draw.options.fill === false || draw.options.fixedRatio === true) {\n      return\n    }\n\n    try {\n      points = _.isUndefined(prevPoints)\n        ? _.clone(draw.drawModel.getPoints())\n        : _.clone(prevPoints)\n      pointsLength = points.length\n\n      for (var i = 0; i < pointsLength - 1; i++) {\n        var firstLineFirstPoint = points[i]\n        var firstLineSecondPoint = points[i + 1]\n\n        for (var j = i + 1; j < pointsLength; j++) {\n          var secondLineFirstPoint = points[j]\n          var secondLineSecondPointIndex = ((j + 1) === pointsLength ? 0 : (j + 1))\n          var secondLineSecondPoint = points[secondLineSecondPointIndex]\n\n          if (FunnyMath.checkLineIntersection(\n            firstLineFirstPoint[0],\n            firstLineFirstPoint[1],\n            firstLineSecondPoint[0],\n            firstLineSecondPoint[1],\n            secondLineFirstPoint[0],\n            secondLineFirstPoint[1],\n            secondLineSecondPoint[0],\n            secondLineSecondPoint[1]\n          ) === false) {\n            returnVal = false\n            break\n          }\n        }\n      }\n    } catch (e) {\n      console.info(e)\n    }\n\n    return returnVal\n  }\n\n  // @DrawUtil\n  function validateStabilization (prevPoints) {\n    var points = _.isUndefined(prevPoints)\n      ? _.clone(draw.drawModel.getPoints())\n      : _.clone(prevPoints)\n    var returnVal = true\n\n    if (validateMinimumAngle(points) === false || validateIntersection(points) === false) {\n      returnVal = false\n    }\n\n    return returnVal\n  }\n}","const Draw = require('../draw')\n\nconst convertRectanglePoints = (x1, y1, x2, y2) => {\n  return [\n    [x1, y1], [x1, y2], [x2, y2], [x2, y1]\n  ]\n}\n\nconst callStartEvent = (options, obj) => {\n  if ('start' in options.event) {\n    options.event.start(obj)\n  }\n}\n\nconst callEndEvent = (options, obj) => {\n  if ('end' in options.event) {\n    options.event.end(obj)\n  }\n}\n\nconst init = () => {\n  return {\n    obj: null,\n    currentPoint: 0,\n    options: null\n  }\n}\n\nconst start = (rootSVG, options, axis, currentPoint) => {\n  const obj = new Draw(rootSVG, options)\n  callStartEvent(options, obj)\n  currentPoint++\n\n  return {\n    obj,\n    currentPoint\n  }\n}\n\nconst end = (obj, options) => {\n  obj.endDraw()\n  callEndEvent(options, obj)\n  return init()\n}\n\nconst destroy = (obj) => {\n  obj.destory()\n  return init()\n}\n\nconst isFirst = (currentPoint) => currentPoint === 0\n\n/**\n * @todo\n * State 상속으로 사용했던 부분 함수로 교체\n */\nclass State {\n  constructor(rootSVG) {\n    const {\n      obj,\n      currentPoint,\n      options\n    } = init()\n    this._rootSVG = rootSVG\n    this._obj = obj\n    this._currentPoint = currentPoint\n    this._options = options\n  }\n\n  start(options, axis) {\n    this._options = options\n    const {\n      obj, currentPoint\n    } = start(this._rootSVG, options, axis, this._currentPoint)\n    this._obj = obj\n    this._currentPoint = currentPoint\n  }\n\n  end() {\n    const {\n      obj,\n      currentPoint,\n      options\n    } = end(this._obj, this._options)\n    this._obj = obj\n    this._currentPoint = currentPoint\n    this._options = options\n  }\n\n  add() {}\n  isLast() {}\n\n  isFirst() {\n    return isFirst(this._currentPoint)\n  }\n\n  destroy() {\n    const {\n      obj,\n      currentPoint,\n      options\n    } = destroy(this._obj)\n    this._obj = obj\n    this._currentPoint = currentPoint\n    this._options = options\n  }\n\n  convertRectanglePoints (...args) {\n    return convertRectanglePoints(...args)\n  }\n}\n\nmodule.exports = State","const State = require('./state')\n\nclass FixedRatioState extends State {\n  constructor(rootSVG) {\n    super(rootSVG)\n  }\n\n  start(options, axis) {\n    var points = []\n    if (options.minSize === false) {\n      points = this.convertRectanglePoints(\n        axis[0], axis[1],\n        axis[0] + options.ratio[0], axis[1] + options.ratio[1]\n      )\n    } else {\n      points = this.convertRectanglePoints(\n        axis[0], axis[1],\n        axis[0] + options.minSize.width, axis[1] + options.minSize.height\n      )\n    }\n    options.points = points\n\n    super.start(options, axis)\n  }\n\n  end() {\n    super.end()\n  }\n\n  isLast() {\n    return this._currentPoint !== 0\n  }\n}\n\n\nmodule.exports = FixedRatioState\n","const State = require('./state')\n\nclass RectangleState extends State {\n  constructor(rootSVG) {\n    super(rootSVG)\n  }\n\n  start(options, axis) {\n    options.points = this.convertRectanglePoints(axis[0], axis[1], axis[0], axis[1])\n    super.start(options, axis)\n  }\n\n  end() {\n    super.end()\n  }\n\n  isLast() {\n    return this._currentPoint !== 0\n  }\n}\n\nmodule.exports = RectangleState","const State = require('./state')\nconst FunnyMath = require('../../common/FunnyMath')\nconst _ = require('../../common/fp')\n\nclass LineState extends State {\n  constructor(rootSVG) {\n    super(rootSVG)\n  }\n\n  start(options, axis) {\n    options.points = [axis, axis]\n    super.start(options, axis)\n    this._currentPoint = 2\n  }\n\n  end() {\n    super.end()\n  }\n\n  add(axis) {\n    if (this.validateAllAxis(this._options.minLineLength) === false) {\n      return\n    }\n\n    if (this._currentPoint > 2) {\n      if (this._obj.validateStabilization() === false) {\n        return\n      }\n    }\n\n    this._obj.addPoint(axis[0], axis[1])\n    this._currentPoint++\n  }\n\n  isLast() {\n    if (this._currentPoint === this._options.minPoint) {\n      if (this.validateAllAxis(this._options.minLineLength) === false || this._obj.validateStabilization() === false) {\n        return false\n      }\n      return true\n    }\n    return false\n  }\n\n  validateAllAxis() {\n    var points = this._obj.getData().points\n    var pythagoreanTheorem = FunnyMath.pythagoreanTheorem\n\n    return !_.find((startAxis, index, points) => {\n      var endAxis = index === points.length - 1 ?\n        points[0] : points[index + 1]\n\n      if (pythagoreanTheorem(startAxis[0], startAxis[1], endAxis[0], endAxis[1]) < this._options.minLineLength) {\n        return true\n      }\n    })(points)\n  }\n}\n\n\nmodule.exports = LineState","'use strict'\nconst EventController = require('../../common/EventController')\nconst ElementController = require('../../common/ElementController')\nconst _ = require('../../common/fp')\nconst FixedRatioState = require('./fixed_ratio_state')\nconst RectangleState = require('./ractangle_state')\nconst LineState = require('./line_state')\nconst {MOVED_ATTR} = require('../../modules/constants')\n\n/**\n * 하고 싶은 것\n * OOP -> FP\n * 1. 모두 순수 함수로 변경\n * 2. 클로저 사용으로 변경\n * \n * 함수 실행 => 역할부여\n * 1. create instance\n * 2. bindevent\n * 3. trigger click\n * 4. bind cancel event\n * 5. trigger click\n * 6. unbind cancel event\n */\n\nconst getState = (options) => {\n  if (options.useOnlyRectangle === true) {\n    if (options.fixedRatio === true) {\n      return FixedRatioState\n    }\n    return RectangleState\n  }\n  return LineState\n}\n\nconst calibrateOptions = (options) => {\n  const newOptions = _.merge({\n    minPoint: 4,\n    event: {},\n    fixedRatio: false,\n    useOnlyRectangle: false,\n    ratio: false,\n    minLineLength: 20,\n    minSize: false\n  }, options)\n\n  newOptions.fixedRatio && (newOptions.useOnlyRectangle = true)\n  newOptions.customDraw = true\n\n  return newOptions\n}\n\nconst addEventListener = (element, eventName, eventListener) => {\n  EventController.bindEvent(eventName, eventListener)(element)\n\n  return () => {\n    EventController.unbindEvent(eventName, eventListener)(element)\n  }\n}\n\nconst bindEvent = (rootSVG, state, options) => {\n  let unbindContextMenu\n  let unbindESCkeyEvent\n  const bindContextMenu = () => {\n    return addEventListener(rootSVG, 'contextmenu', stopDrawing)\n  }\n  const bindESCkeyEvent = () => {\n    return addEventListener(document, 'keyup', ({keyCode}) => {\n      keyCode === 27 && (stopDrawing())\n    })\n  }\n  const stopDrawing  = () => {\n    if (state.isFirst() === false) {\n      state.destroy()\n      endDraw()\n    }\n  }\n\n  const startDraw = () => {\n    unbindContextMenu = bindContextMenu()\n    unbindESCkeyEvent = bindESCkeyEvent()\n  }\n\n  const endDraw = () => {\n    unbindContextMenu()\n    unbindESCkeyEvent()\n  }\n\n  return addEventListener(rootSVG, 'click', (event) => {\n    if (ElementController.getAttr(MOVED_ATTR)(rootSVG) === 'true') {\n      return\n    }\n    const axis = ElementController.getPageAxis(rootSVG, event)\n\n    if (state.isFirst()) {\n      startDraw()\n      state.start(options, axis)\n    } else if (state.isLast()) {\n      endDraw()\n      state.end()\n    } else {\n      state.add(axis)\n    }\n  })\n}\n\nmodule.exports = (rootSVG, _options) => {\n  const options = calibrateOptions(_options)\n  const StateConstructor = getState(options)\n  const state = new StateConstructor(rootSVG)\n  const unbindEvent = bindEvent(rootSVG, state, options)\n\n  return {\n    destroy: unbindEvent\n  }\n}\n","'use strict'\nconst CustomEditor = require('./customeditor')\nconst Draw = require('./draw')\nconst EventController = require('../common/EventController')\nconst ElementController = require('../common/ElementController')\nconst _ = require('../common/fp')\nconst {\n  MOVED_ATTR,\n  CLICK_DETECTION_TIME\n} = require('../modules/constants')\n\nclass CustomEditorV2 extends CustomEditor {\n  constructor(rootSVG, options) {\n    super(rootSVG, options)\n    this._mouseDownTimer = null\n    this._svgObj = null\n  }\n\n  unbindEvent() {\n    _.divEq(\n      EventController.unbindEvent('click', this.parentSVGClickHandle),\n      EventController.unbindEvent('mousedown', this.parentSVGMouseDownHandle),\n      EventController.unbindEvent('mouseup', this.parentSVGMouseUpHandle)\n    )(this._rootSVG)\n  }\n\n  createParentSVGClickHandle () {\n    const fn = super.createParentSVGClickHandle()\n    return (event) => {\n      this._options.useRectangleForCustomDraw = false\n      fn(event)\n    }\n  }\n\n  bindEvent() {\n    this.parentSVGMouseDownHandle = this.createParentSVGMouseDownHandle()\n    this.parentSVGMouseUpHandle = this.createParentSVGMouseUpHandle()\n    this.parentSVGClickHandle = this.createParentSVGClickHandle()\n\n    _.divEq(\n      EventController.bindEvent('mousedown', this.parentSVGMouseDownHandle),\n      EventController.bindEvent('mouseup', this.parentSVGMouseUpHandle)\n    )(this._rootSVG)\n  }\n\n  bindCancelEvent() {\n    this.bindContextMenu()\n    document.addEventListener('keyup', this.handleESCKey)\n  }\n\n  unbindCancelEvent() {\n    this.unbindContextMenu()\n    document.removeEventListener('keyup', this.handleESCKey)\n  }\n\n  removeDrawingGeometry() {\n    super.removeDrawingGeometry()\n    if (this._state.isFirst() === false) {\n      this.restartDrawing()\n    }\n  }\n\n  restartDrawing() {\n    this.unbindCancelEvent()\n    this.unbindEvent()\n    this.bindEvent()\n  }\n\n  endDraw() {\n    super.endDraw()\n    this.restartDrawing()\n  }\n\n  endDragEvent() {\n    this._svgObj.endDraw()\n    this.unbindCancelEvent()\n    this.restartDrawing()\n    this._svgObj = null\n  }\n\n  createParentSVGMouseUpHandle () {\n    return (event) => {\n      var isCheckingDragEvent = this._mouseDownTimer !== null\n\n      if (isCheckingDragEvent) {\n        this.abortCheckingDragEvent(event)\n        return\n      }\n\n      var isRightMouseBtn = event.buttons === 2\n      var isUsingParent = ElementController.getAttr(MOVED_ATTR)(this._rootSVG) === 'true'\n\n      if (isRightMouseBtn || isUsingParent || this._svgObj === null) {\n        return\n      }\n      this.endDragEvent()\n    }\n  }\n\n  abortCheckingDragEvent(event) {\n    window.clearTimeout(this._mouseDownTimer)\n    this._mouseDownTimer = null\n\n    this.parentSVGClickHandle(event)\n\n    _.divEq(\n      EventController.unbindEvent('mousedown', this.parentSVGMouseDownHandle),\n      EventController.unbindEvent('mouseup', this.parentSVGMouseUpHandle),\n      EventController.bindEvent('click', this.parentSVGClickHandle)\n    )(this._rootSVG)\n\n  }\n\n  createParentSVGMouseDownHandle () {\n    return (event) => {\n      const isRightMouseBtn = event.buttons === 2\n      const isNotCurrentTarget = event.currentTarget !== event.target\n      const isUsingParent = ElementController.getAttr(MOVED_ATTR)(this._rootSVG) === 'true'\n\n      if (isRightMouseBtn || isNotCurrentTarget || isUsingParent) {\n        return\n      }\n\n      this.startCheckingDragEvent(event)\n    }\n  }\n\n  startCheckingDragEvent(event) {\n    window.clearTimeout(this._mouseDownTimer)\n\n    this._mouseDownTimer = window.setTimeout((axis) => this.startDragEvent(axis),\n      CLICK_DETECTION_TIME,\n      ElementController.getPageAxis(this._rootSVG, event)\n    )\n  }\n\n  startDragEvent(axis) {\n    var DEFAULT_OBJECT_SIZE = 30\n    this._mouseDownTimer = null\n    this._options.points = [\n      axis, [axis[0], axis[1] + DEFAULT_OBJECT_SIZE],\n      [axis[0] + DEFAULT_OBJECT_SIZE, axis[1] + DEFAULT_OBJECT_SIZE],\n      [axis[0] + DEFAULT_OBJECT_SIZE, axis[1]]\n    ]\n\n    this._options.useRectangleForCustomDraw = true\n\n    this._svgObj = new Draw(this._rootSVG, this._options)\n    this.bindCancelEvent()\n  }\n}\n\n\nmodule.exports = CustomEditorV2\n","'use strict'\n/**\n * SVG를 사용한 Drawing 툴 모듈이다.\n * Plugin 중 'draw'를 통해서 영역을 조작한다.\n *\n * @class\n * @param {Object} rootSVG svg tag\n * @example\n<caption>HTML Resource</caption>\n<script src=\"./svg_drawing/modules/svg_geometry_product.js\"></script>\n<script src=\"./svg_drawing/modules/svg_geometry.js\"></script>\n\n<script src=\"./svg_drawing/plugins/draw/arrow-image-helper.js\"></script>\n<script src=\"./svg_drawing/plugins/draw/circle-helper.js\"></script>\n<script src=\"./svg_drawing/plugins/draw/group-helper.js\"></script>\n<script src=\"./svg_drawing/plugins/draw/icon-helper.js\"></script>\n<script src=\"./svg_drawing/plugins/draw/line-helper.js\"></script>\n<script src=\"./svg_drawing/plugins/draw/polygon-helper.js\"></script>\n<script src=\"./svg_drawing/plugins/draw/text-helper.js\"></script>\n<script src=\"./svg_drawing/plugins/draw/wise-facedetection-helper.js\"></script>\n<script src=\"./svg_drawing/plugins/draw/index.js\"></script>\n\n* @example\n<caption>HTML</caption>\n<svg\n  width=\"500\"\n  height=\"500\"\n  id=\"svg_polygon\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n  xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n</svg>\n\n * @example\n<caption>Javascript</caption>\nvar rootSVG = document.getElementById(\"svg_polygon\");\nvar svgGeometry = new SVGGeometry(rootSVG);\nsvgGeometry.draw({\n  color: '#ff9832',\n  selectedColor: '#ff5732',\n  lineStrokeWidth: 5,\n  circleRadius: 8,\n  fill: true,\n  fillOpacity: 0,\n  useEvent: true,\n  points: [\n    [303,469],\n    [437,461],\n    [475,374],\n    [423,248],\n    [291,270],\n    [224,388],\n    [219,472]\n  ]\n});\n */\nconst Draw = require('../plugins/draw')\nconst customEditor = require('../plugins/customeditor')\nconst CustomEditorV2 = require('../plugins/svg_geometry_plugin_customeditor_v2')\n\nconst ElementController = require('../common/ElementController')\nconst _ = require('../common/fp')\n\nclass SVGGeometry {\n  constructor (rootSVG) {\n    _.divEq(\n      ElementController.setAttr('draggable', false),\n      ElementController.style('cursor', 'normal'),\n      ElementController.style('userSelect', 'none'),\n      ElementController.style('mozUserSelect', 'none'),\n      ElementController.style('webkitUserSelect', 'none'),\n      ElementController.style('msUserSelect', 'none')\n    )(rootSVG)\n    this._rootSVG = rootSVG\n  }\n  draw (options) {\n    return new Draw(this._rootSVG, options)\n  }\n  customEditor (options) {\n    return customEditor(this._rootSVG, options)\n  }\n  customEditorV2 (options) {\n    return this.customEditor (options)\n    // return new CustomEditorV2(this._rootSVG, options)\n  }\n}\n\nmodule.exports = SVGGeometry\n","const SVGGeometry = require('../src/modules/svg_geometry')\n\nmodule.exports = function Polygon () {\n  var svgTag = document.getElementById('svg_polygon')\n  var svgGeometry = new SVGGeometry(svgTag)\n  var polygonObject = null\n\n  var draw = function () {\n    polygonObject = svgGeometry.draw({\n      fillColor: '#ff6633',\n      lineColor: '#ff6633',\n      pointColor: '#ff6633',\n      lineStrokeWidth: 5,\n      circleRadius: 6,\n      fill: true,\n      points: [\n        [156.5, 370],\n        [239.5, 304],\n        [321.5, 366],\n        [286.5, 271],\n        [370.5, 220],\n        [271.5, 221],\n        [238.5, 125],\n        [210.5, 222],\n        [114.5, 225],\n        [197.5, 272]\n      ],\n      minPoint: 2,\n      maxPoint: 10,\n      useEvent: true,\n      useCursor: true,\n      event: {\n        mouseup: getPoints,\n        polygoncontextmenu: function () {\n          alert('polygoncontextmenu')\n        }\n      }\n    })\n  }\n\n  var addPoint = function () {\n    polygonObject.addPoint()\n  }\n\n  function getPoints () {\n    var data = polygonObject.getData()\n    var log = document.getElementById('svg_polygon_log')\n    log.innerHTML = ''\n\n    for (var i = 0, len = data.points.length; i < len; i++) {\n      var self = data.points[i]\n      log.innerHTML += '[' + self[0] + ',' + self[1] + ']'\n\n      if (i < len - 1) {\n        log.innerHTML += ','\n      }\n    }\n  }\n\n  return {\n    draw: draw,\n    addPoint: addPoint,\n    getPoints: getPoints\n  }\n}\n","const SVGGeometry = require('../src/modules/svg_geometry')\n\nmodule.exports = function UWAPrivacyPolygon(){\n\tvar svgTag = document.getElementById('svg_privacy_polygon');\n\tvar selectTag = document.getElementById(\"svg_privacy_polygon_list\");\n\tvar svgGeometry = new SVGGeometry(svgTag);\n\tvar svgDrawingObj = [];\n\n\tvar customObj = null;\n\n\tvar options = {\n\t\tlineStrokeWidth: 5,\n\t\tcircleRadius: 8,\n\t\tuseEvent: true,\n\t\tmaxPoint: 8,\n\t\tfill: true,\n\t\tfillOpacity: 0,\n\t\tevent: {\n\t\t\tend: function(obj){\n\t\t\t\taddSvgDrawingObj(obj);\n\t\t\t\tupdatelog();\n\t\t\t},\n\t\t\tmouseup: updatelog\n\t\t}\n\t};\n\n\tfunction addSvgDrawingObj(obj){\n\t\tsvgDrawingObj.push(obj);\n\t\tselectTag.innerHTML = '';\n\t\tfor(var i = 0, len = svgDrawingObj.length; i < len; i++){\n\t\t\tselectTag.innerHTML += \"<option>\" + i + \"</option>\";\n\t\t}\n\t}\n\n\tfunction selectShape(){\n\t\tfor(var i = 0, len = svgDrawingObj.length; i < len; i++){\n\t\t\tvar method = parseInt(selectTag.value) === i ? \"active\" : \"normal\";\n\t\t\tsvgDrawingObj[i][method]();\n\t\t}\t\n\t}\n\n\tfunction addPoint(){\n\t\tvar selectedObjIndex = parseInt(selectTag.value);\n\t\tsvgDrawingObj[selectedObjIndex].addPoint();\n\t}\n\n\tfunction startDrawing(){\n\t\tif(customObj === null){\n\t\t\tcustomObj = svgGeometry.customEditor(options);\t\n\t\t}\n\t}\n\n\tfunction init(){\n\t\tstartDrawing();\n\n\t\toptions.points = [\n\t\t\t[219, 59],[80, 109],[96, 238],[190, 189]\n\t\t];\n\n\t\taddSvgDrawingObj(svgGeometry.draw(options));\n\n\t\toptions.points = [\n\t\t\t[363, 81],[302, 133],[348, 217],[466, 160]\n\t\t];\n\n\t\taddSvgDrawingObj(svgGeometry.draw(options));\n\t}\n\n\tfunction stopDrawing(){\n\t\tif(customObj !== null){\n\t\t\tcustomObj.destroy();\n\t\t\tcustomObj = null;\n\t\t}\n\t}\n\n\tfunction updatelog(){\n\t\tvar svgPrivacyLog = document.getElementById(\"svg_privacy_polygon_log\");\n\t\tvar logStr = '';\n\n\t\tfor(var i = 0, len = svgDrawingObj.length; i < len; i++){\n\t\t\tvar data = svgDrawingObj[i].getData().points;\n\t\t\tlogStr += \"index : \" + i + \" data: \";\n\n\t\t\tfor(var j = 0, jLen = data.length; j < jLen; j++){\n\t\t\t\tlogStr += \"[\" + data[j][0] + \", \" + data[j][1] + \"],\";\n\t\t\t}\n\n\t\t\tlogStr += \"<br>\";\n\t\t}\n\n\t\tsvgPrivacyLog.innerHTML = logStr;\n\t}\n\n\tfunction removeDrawingGeometry(){\n\t\tif(customObj !== null){\n\t\t\tcustomObj.removeDrawingGeometry();\n\t\t}\n\t}\n\n\treturn {\n\t\tselectShape: selectShape,\n\t\tinit: init,\n\t\tstartDrawing: startDrawing,\n\t\tstopDrawing: stopDrawing,\n\t\taddPoint: addPoint,\n\t\tremoveDrawingGeometry: removeDrawingGeometry\n\t}\n}","const SVGGeometry = require('../src/modules/svg_geometry')\n\nmodule.exports = function UWAPrivacyRectangle(){\n\tvar svgTag = document.getElementById('svg_privacy_rectangle');\n\tvar svgGeometry = new SVGGeometry(svgTag);\n\tvar svgDrawingObj = [];\n\tvar minSize = {\n\t\twidth: 50,\n\t\theight: 50\n\t};\n\tvar maxSize = {\n\t\twidth: 250,\n\t\theight: 250\n\t};\n\n\tvar startDrawing = function(){\n\t\tvar options = {\n\t\t\tlineStrokeWidth: 5,\n\t\t\tcircleRadius: 8,\n\t\t\tuseEvent: false,\n\t\t\tuseResizeRectangle: true,\n\t\t\tfill: true,\n\t\t\tfillOpacity: 0,\n\t\t\tfixedRatio: true,\n\t\t\tminSize: minSize,\n\t\t\tmaxSize: maxSize,\n\t\t\tratio: [1, 1],\n\t\t\tevent: {\n\t\t\t\tmouseup: updatelog\n\t\t\t}\n\t\t};\n\n\t\toptions.event.end = function(obj){\n\t\t\tsvgDrawingObj.push(obj);\n\t\t\tupdatelog();\n\t\t};\n\n\t\toptions.wiseFaceDetection = {\n\t\t\tstrokeWidth: 2,\n\t\t\tstrokeColor: '#dd5500',\n\t\t\tfillOpacity: 0,\n\t\t\theightRatio: 2.2\n\t\t};\n\n\t\tsvgGeometry.customEditor(options);\n\n\t\toptions.points = [\n\t\t\t [0, 0],\n\t\t\t [0, 100],\n\t\t\t [100, 100],\n\t\t\t [100, 0]\n\t\t];\n\n\t\tsvgDrawingObj.push(svgGeometry.draw(options));\n\t};\n\n\tvar updatelog = function(){\n\t\tvar svgPrivacyLog = document.getElementById(\"svg_privacy_rectangle_log\");\n\t\tvar logStr = '';\n\n\t\tfor(var i = 0, len = svgDrawingObj.length; i < len; i++){\n\t\t\tvar data = svgDrawingObj[i].getData().points;\n\t\t\tlogStr += \"index : \" + i + \" data: \";\n\n\t\t\tfor(var j = 0, jLen = data.length; j < jLen; j++){\n\t\t\t\tlogStr += \"[\" + data[j][0] + \", \" + data[j][1] + \"],\";\n\t\t\t}\n\n\t\t\tlogStr += \"<br>\";\n\t\t}\n\n\t\tsvgPrivacyLog.innerHTML = logStr;\n\t};\n\n\tfunction changeMinMaxSize(){\n\t\tvar minElem = document.getElementById(\"svg_privacy_rectangle_min\");\n\t\tvar maxElem = document.getElementById(\"svg_privacy_rectangle_max\");\n\n\t\tminSize.width = minSize.height = parseInt(minElem.value);\n\t\tmaxSize.width = maxSize.height = parseInt(maxElem.value);\n\n\t\tfor(var i = 0, len = svgDrawingObj.length; i < len; i++){\n\t\t\tvar self = svgDrawingObj[i];\n\t\t\tself.changeMinSizeOption(minSize);\n\t\t\tself.changeMaxSizeOption(maxSize);\n\t\t}\n\t}\n\n\tfunction changeRectangleToMinSize(){\n\t\tfor(var i = 0, len = svgDrawingObj.length; i < len; i++){\n\t\t\tvar self = svgDrawingObj[i];\n\t\t\tself.changeRectangleToSize(minSize.width, minSize.height);\n\t\t}\t\n\t}\n\n\tfunction changeRectangleToMaxSize(){\n\t\tfor(var i = 0, len = svgDrawingObj.length; i < len; i++){\n\t\t\tvar self = svgDrawingObj[i];\n\t\t\tself.changeRectangleToSize(maxSize.width, maxSize.height);\n\t\t}\t\n\t}\n\n\treturn {\n\t\tstartDrawing: startDrawing,\n\t\tchangeMinMaxSize: changeMinMaxSize,\n\t\tchangeRectangleToMinSize: changeRectangleToMinSize,\n\t\tchangeRectangleToMaxSize: changeRectangleToMaxSize\n\t};\n}","const SVGGeometry = require('../src/modules/svg_geometry')\n\nmodule.exports = function Line(){\n\tvar svgTag = document.getElementById('svg_line');\n\tvar svgGeometry = new SVGGeometry(svgTag);\n\tvar lineObject = [];\n\n\tvar draw = function(){\n\t\tlineObject.push(svgGeometry.draw({\n\t\t\tlineColor: '#ff6633',\n\t\t\tpointColor: '#ff6633',\n\t\t\tlineStrokeWidth: 4,\n\t\t\tcircleRadius: 6,\n\t\t\tminPoint: 2,\n\t\t\tmaxPoint: 8,\n\t\t\tpoints: [\n\t\t\t\t[70,242],\n\t\t\t\t[362,380]\n\t\t\t],\n\t\t\tuseEvent: true\n\t\t}));\n\n\t\tlineObject.push(svgGeometry.draw({\n\t\t\tlineColor: '#ff6633',\n\t\t\tpointColor: '#ff6633',\n\t\t\tlineStrokeWidth: 4,\n\t\t\tcircleRadius: 6,\n\t\t\tminPoint: 2,\n\t\t\tmaxPoint: 8,\n\t\t\tpoints: [\n\t\t\t\t[70,270],\n\t\t\t\t[380,270]\n\t\t\t],\n\t\t\tuseEvent: true\n\t\t}));\n\n\t\tsvgGeometry.customEditor({\n\t\t\tlineColor: '#ff6633',\n\t\t\tpointColor: '#ff6633',\n\t\t\tlineStrokeWidth: 4,\n\t\t\tcircleRadius: 6,\n\t\t\tminPoint: 2,\n\t\t\tmaxPoint: 8,\n\t\t\tuseEvent: true\n\t\t});\n\t};\n\n\treturn {\n\t\tdraw: draw\n\t}\n}","const SVGGeometry = require('../src/modules/svg_geometry')\n\nmodule.exports = function FixedRatio(){\n\tvar svgTag = document.getElementById('svg_fixed_ratio');\n\tvar svgGeometry = new SVGGeometry(svgTag);\n\tvar kindSVGObj = [];\n\n\tvar draw = function(){\n\t\t//Bule\n\t\tkindSVGObj.push(svgGeometry.draw({\n\t\t\tfillColor: '#7fa9e3',\n\t\t\tlineColor: '#7fa9e3',\n\t\t\tpointColor: '#7fa9e3',\n\t\t\tlineStrokeWidth: 4,\n\t\t\tcircleRadius: 8,\n\t\t\tuseCursor: true,\n\t\t\tfill: true,\n\t\t\tpoints: [\n\t\t\t\t[10, 10],\n\t\t\t\t[10, 100],\n\t\t\t\t[130, 100],\n\t\t\t\t[130, 10]\n\t\t\t],\n\t\t\tfixedRatio: true,\n\t\t\tuseEvent: true\n\t\t}));\n\n\t\t//Red\n\t\tkindSVGObj.push(svgGeometry.draw({\n\t\t\tfillColor: '#e38d7f',\n\t\t\tlineColor: '#e38d7f',\n\t\t\tpointColor: '#e38d7f',\n\t\t\tlineStrokeWidth: 4,\n\t\t\tcircleRadius: 8,\n\t\t\tuseCursor: true,\n\t\t\tfill: true,\n\t\t\tpoints: [\n\t\t\t\t[200, 10],\n\t\t\t\t[200, 210],\n\t\t\t\t[400, 210],\n\t\t\t\t[400, 10]\n\t\t\t],\n\t\t\tfixedRatio: true,\n\t\t\tuseEvent: true\n\t\t}));\n\n\t\t//Green\n\t\tkindSVGObj.push(svgGeometry.draw({\n\t\t\tfillColor: '#7fe3a8',\n\t\t\tlineColor: '#7fe3a8',\n\t\t\tpointColor: '#7fe3a8',\n\t\t\tlineStrokeWidth: 4,\n\t\t\tcircleRadius: 8,\n\t\t\tuseCursor: true,\n\t\t\tfill: true,\n\t\t\tpoints: [\n\t\t\t\t[100, 250],\n\t\t\t\t[100, 430],\n\t\t\t\t[460, 430],\n\t\t\t\t[460, 250]\n\t\t\t],\n\t\t\tfixedRatio: true,\n\t\t\tuseEvent: true\n\t\t}));\n\t};\n\n\tfunction alignCenter(){\n\t\tfor(var i = 0, ii = kindSVGObj.length; i < ii; i++){\n\t\t\tkindSVGObj[i].alignCenter();\n\t\t}\n\t}\n\n\treturn {\n\t\tdraw: draw,\n\t\talignCenter: alignCenter\n\t};\n}","const SVGGeometry = require('./src/modules/svg_geometry')\nconst Polygon = require('./scripts/polygon.js')\nconst UWAPrivacyPolygon = require('./scripts/uwa_privacy_polygon.js')\nconst UWAPrivacyRectangle = require('./scripts/uwa_privacy_rectangle.js')\nconst Line = require('./scripts/line.js')\nconst FixedRatio = require('./scripts/fixedratio.js')\n\nvar lineObject = null\nvar kindSVGDrawing = null\nwindow.onload = function () {\n  var polygon = new Polygon()\n  polygon.draw()\n  getElem('svg_polygon_add_point').onclick = polygon.addPoint\n  getElem('svg_polygon_get_point').onclick = polygon.getPoints\n\n  var fixedRatio = new FixedRatio()\n  fixedRatio.draw()\n  getElem('svg_fixed_ratio_btn').onclick = fixedRatio.alignCenter\n\n  var line = new Line()\n  line.draw()\n\n  var uwaPrivacyPolygon = new UWAPrivacyPolygon()\n  uwaPrivacyPolygon.init()\n  getElem('svg_privacy_polygon_remove_drawing_geometry').onclick = uwaPrivacyPolygon.removeDrawingGeometry\n  getElem('svg_privacy_polygon_stop_drawing').onclick = uwaPrivacyPolygon.stopDrawing\n  getElem('svg_privacy_polygon_start_drawing').onclick = uwaPrivacyPolygon.startDrawing\n  getElem('svg_privacy_polygon_list').onchange = uwaPrivacyPolygon.selectShape\n  getElem('svg_privacy_polygon_add_point').onclick = uwaPrivacyPolygon.addPoint\n\n  var uwaPrivacyRectangle = new UWAPrivacyRectangle()\n  uwaPrivacyRectangle.startDrawing()\n  getElem('svg_privacy_rectangle_min').onchange = uwaPrivacyRectangle.changeMinMaxSize\n  getElem('svg_privacy_rectangle_max').onchange = uwaPrivacyRectangle.changeMinMaxSize\n  getElem('svg_privacy_rectangle_change_min').onclick = uwaPrivacyRectangle.changeRectangleToMinSize\n  getElem('svg_privacy_rectangle_change_max').onclick = uwaPrivacyRectangle.changeRectangleToMaxSize\n}\n\nfunction getElem (id) {\n  return document.getElementById(id)\n}\nvar colorFactory = {\n  red: '#CE534D',\n  blue: '#3184F9',\n  includeArea: {\n    fill: '#ff6633',\n    line: '#ff6633',\n    point: '#ff6633'\n  },\n  excludeArea: {\n    fill: '#000000',\n    line: '#ffffff',\n    point: '#999999'\n  }\n}\nfunction getROIOptions () {\n  return {\n    fillColor: colorFactory.includeArea.fill,\n    lineColor: colorFactory.includeArea.line,\n    pointColor: colorFactory.includeArea.point,\n    lineStrokeWidth: 4,\n    circleRadius: 5,\n    useEvent: true,\n    useCursor: true,\n    minPoint: 4,\n    maxPoint: 8,\n    fill: true,\n    fillOpacity: '0.2'\n  }\n}\n\nfunction getLineOptions () {\n  return {\n    fillColor: colorFactory.includeArea.fill,\n    lineColor: colorFactory.includeArea.line,\n    pointColor: colorFactory.includeArea.point,\n    lineStrokeWidth: 4,\n    circleRadius: 6,\n    useEvent: true,\n    useCursor: true,\n    minPoint: 2,\n    maxPoint: 8,\n    arrow: {\n      mode: 'R',\n      min: 'L',\n      max: 'LR',\n      text: true\n    }\n  }\n}\n\nwindow.addEventListener('load', function () {\n  // [Face Detection] Wise FaceDetection ROI\n  var wiseFDROI = document.getElementById('wfd_roi')\n  var wiseFDROIEditor = new SVGGeometry(wiseFDROI)\n  var wiseFDOptions = getROIOptions()\n  wiseFDOptions.points = [\n    [0, 0],\n    [0, 480],\n    [854, 480],\n    [854, 0]\n  ]\n  wiseFDOptions.ratio = [1.77, 1]\n  wiseFDOptions.fixedRatio = true\n  wiseFDOptions.wiseFaceDetection = {\n    strokeWidth: 2,\n    strokeColor: colorFactory.includeArea.line,\n    fillOpacity: 0,\n    heightRatio: 4 // Wise Face Detection에 표현되는 원의 반지름 %\n  }\n  wiseFDROIEditor.draw(wiseFDOptions)\n\n  // [MD, IVA] ROI\n  var roi = document.getElementById('roi')\n  var roiEditor = new SVGGeometry(roi)\n  var roiOptions = getROIOptions()\n  var roiObj = []\n  var selectROIObj = function (obj) {\n    for (var i = 0, ii = roiObj.length; i < ii; i++) {\n      roiObj[i].normal()\n    }\n\n    obj.active()\n  }\n  var defaultROIPoints = [\n    [\n      [686, 319],\n      [455, 333],\n      [465, 467],\n      [694, 459]\n    ],\n    [\n      [294, 46],\n      [135, 55],\n      [150, 216],\n      [367, 194]\n    ]\n  ]\n  roiOptions.event = {\n    start: function () {\n\n    },\n    end: function (obj) {\n      roiObj.push(obj)\n      selectROIObj(obj)\n    },\n    mouseup: function () {\n      var self = this\n      // 포인트가 추가된뒤에 active 효과를 적용\n      setTimeout(function () {\n        selectROIObj(self)\n      })\n    }\n  }\n\n  roiEditor.customEditorV2(roiOptions)\n  for (var i = 0, ii = defaultROIPoints.length; i < ii; i++) {\n    roiOptions.points = defaultROIPoints[i]\n    roiOptions.fillColor = i === 0 ? colorFactory.includeArea.fill : colorFactory.excludeArea.fill\n    roiOptions.pointColor = i === 0 ? colorFactory.includeArea.point : colorFactory.excludeArea.point\n    roiOptions.lineColor = i === 0 ? colorFactory.includeArea.line : colorFactory.excludeArea.line\n    roiObj.push(roiEditor.draw(roiOptions))\n  }\n  selectROIObj(roiObj[0])\n\n  // [IVA] Virtual Line\n  var virtualLine = document.getElementById('virtual_line')\n  var virtualLineEditor = new SVGGeometry(virtualLine)\n  var virtualLineOptions = getLineOptions()\n  virtualLineOptions.fillColor = colorFactory.blue\n  virtualLineOptions.lineColor = colorFactory.blue\n  virtualLineOptions.pointColor = colorFactory.blue\n  var virtualLineObj = []\n  var defaultVirtualLinePoints = [\n    [\n      [736, 146],\n      [455, 333]\n    ],\n    [\n      [651, 332],\n      [295, 152]\n    ]\n  ]\n  var selectLineObj = function (obj) {\n    for (var i = 0, ii = virtualLineObj.length; i < ii; i++) {\n      virtualLineObj[i].normal()\n    }\n\n    obj.active()\n  }\n  virtualLineOptions.event = {\n    start: function () {},\n    end: function (obj) {\n      virtualLineObj.push(obj)\n      selectLineObj(obj)\n    },\n    mouseup: function () {\n      var self = this\n      setTimeout(function () {\n        selectLineObj(self)\n      })\n    }\n  }\n  virtualLineEditor.customEditor(virtualLineOptions)\n  for (var i = 0, ii = defaultVirtualLinePoints.length; i < ii; i++) {\n    virtualLineOptions.points = defaultVirtualLinePoints[i]\n    virtualLineObj.push(virtualLineEditor.draw(virtualLineOptions))\n  }\n  selectLineObj(virtualLineObj[0])\n\n  // [IVA] Common Calibration\n  var commonCalibration = document.getElementById('common_calibration')\n  var commonCalibrationEditor = new SVGGeometry(commonCalibration)\n  var commonCalibrationOptions = getROIOptions()\n  commonCalibrationOptions.initCenter = true\n  commonCalibrationOptions.notUseMoveTopLayer = true\n  commonCalibrationOptions.useOnlyRectangle = true\n  commonCalibrationOptions.minSize = {\n    width: 100,\n    height: 100\n  }\n  commonCalibrationOptions.maxSize = {\n    width: 854,\n    height: 480\n  }\n  commonCalibrationOptions.points = [\n    [0, 0],\n    [0, 480],\n    [854, 480],\n    [854, 0]\n  ]\n  commonCalibrationOptions.fillColor = colorFactory.red\n  commonCalibrationOptions.lineColor = colorFactory.red\n  commonCalibrationOptions.pointColor = colorFactory.red\n  commonCalibrationEditor.draw(commonCalibrationOptions)\n  commonCalibrationOptions.points = [\n    [0, 0],\n    [0, 100],\n    [100, 100],\n    [100, 0]\n  ]\n  commonCalibrationOptions.fillColor = colorFactory.blue\n  commonCalibrationOptions.lineColor = colorFactory.blue\n  commonCalibrationOptions.pointColor = colorFactory.blue\n  commonCalibrationEditor.draw(commonCalibrationOptions)\n})\n"]}